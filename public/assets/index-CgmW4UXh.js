function Lv(s,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in s)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(s,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function vm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tc={exports:{}},gi={},bc={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Dv(){if(Kf)return Ce;Kf=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,H={};function b(N,j,ie){this.props=N,this.context=j,this.refs=H,this.updater=ie||R}b.prototype.isReactComponent={},b.prototype.setState=function(N,j){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,j,"setState")},b.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function V(){}V.prototype=b.prototype;function Q(N,j,ie){this.props=N,this.context=j,this.refs=H,this.updater=ie||R}var ce=Q.prototype=new V;ce.constructor=Q,F(ce,b.prototype),ce.isPureReactComponent=!0;var pe=Array.isArray,Ee=Object.prototype.hasOwnProperty,we={current:null},ye={key:!0,ref:!0,__self:!0,__source:!0};function De(N,j,ie){var ae,xe={},fe=null,Re=null;if(j!=null)for(ae in j.ref!==void 0&&(Re=j.ref),j.key!==void 0&&(fe=""+j.key),j)Ee.call(j,ae)&&!ye.hasOwnProperty(ae)&&(xe[ae]=j[ae]);var E=arguments.length-2;if(E===1)xe.children=ie;else if(1<E){for(var A=Array(E),q=0;q<E;q++)A[q]=arguments[q+2];xe.children=A}if(N&&N.defaultProps)for(ae in E=N.defaultProps,E)xe[ae]===void 0&&(xe[ae]=E[ae]);return{$$typeof:s,type:N,key:fe,ref:Re,props:xe,_owner:we.current}}function ze(N,j){return{$$typeof:s,type:N.type,key:j,ref:N.ref,props:N.props,_owner:N._owner}}function oe(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function Ge(N){var j={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return j[ie]})}var Me=/\/+/g;function O(N,j){return typeof N=="object"&&N!==null&&N.key!=null?Ge(""+N.key):j.toString(36)}function se(N,j,ie,ae,xe){var fe=typeof N;(fe==="undefined"||fe==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(fe){case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case s:case e:Re=!0}}if(Re)return Re=N,xe=xe(Re),N=ae===""?"."+O(Re,0):ae,pe(xe)?(ie="",N!=null&&(ie=N.replace(Me,"$&/")+"/"),se(xe,j,ie,"",function(q){return q})):xe!=null&&(oe(xe)&&(xe=ze(xe,ie+(!xe.key||Re&&Re.key===xe.key?"":(""+xe.key).replace(Me,"$&/")+"/")+N)),j.push(xe)),1;if(Re=0,ae=ae===""?".":ae+":",pe(N))for(var E=0;E<N.length;E++){fe=N[E];var A=ae+O(fe,E);Re+=se(fe,j,ie,A,xe)}else if(A=x(N),typeof A=="function")for(N=A.call(N),E=0;!(fe=N.next()).done;)fe=fe.value,A=ae+O(fe,E++),Re+=se(fe,j,ie,A,xe);else if(fe==="object")throw j=String(N),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Re}function Se(N,j,ie){if(N==null)return N;var ae=[],xe=0;return se(N,ae,"","",function(fe){return j.call(ie,fe,xe++)}),ae}function K(N){if(N._status===-1){var j=N._result;j=j(),j.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=j)}if(N._status===1)return N._result.default;throw N._result}var X={current:null},M={transition:null},D={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:M,ReactCurrentOwner:we};function L(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Se,forEach:function(N,j,ie){Se(N,function(){j.apply(this,arguments)},ie)},count:function(N){var j=0;return Se(N,function(){j++}),j},toArray:function(N){return Se(N,function(j){return j})||[]},only:function(N){if(!oe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=b,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=Q,Ce.StrictMode=i,Ce.Suspense=m,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Ce.act=L,Ce.cloneElement=function(N,j,ie){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ae=F({},N.props),xe=N.key,fe=N.ref,Re=N._owner;if(j!=null){if(j.ref!==void 0&&(fe=j.ref,Re=we.current),j.key!==void 0&&(xe=""+j.key),N.type&&N.type.defaultProps)var E=N.type.defaultProps;for(A in j)Ee.call(j,A)&&!ye.hasOwnProperty(A)&&(ae[A]=j[A]===void 0&&E!==void 0?E[A]:j[A])}var A=arguments.length-2;if(A===1)ae.children=ie;else if(1<A){E=Array(A);for(var q=0;q<A;q++)E[q]=arguments[q+2];ae.children=E}return{$$typeof:s,type:N.type,key:xe,ref:fe,props:ae,_owner:Re}},Ce.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Ce.createElement=De,Ce.createFactory=function(N){var j=De.bind(null,N);return j.type=N,j},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:p,render:N}},Ce.isValidElement=oe,Ce.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:K}},Ce.memo=function(N,j){return{$$typeof:y,type:N,compare:j===void 0?null:j}},Ce.startTransition=function(N){var j=M.transition;M.transition={};try{N()}finally{M.transition=j}},Ce.unstable_act=L,Ce.useCallback=function(N,j){return X.current.useCallback(N,j)},Ce.useContext=function(N){return X.current.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N){return X.current.useDeferredValue(N)},Ce.useEffect=function(N,j){return X.current.useEffect(N,j)},Ce.useId=function(){return X.current.useId()},Ce.useImperativeHandle=function(N,j,ie){return X.current.useImperativeHandle(N,j,ie)},Ce.useInsertionEffect=function(N,j){return X.current.useInsertionEffect(N,j)},Ce.useLayoutEffect=function(N,j){return X.current.useLayoutEffect(N,j)},Ce.useMemo=function(N,j){return X.current.useMemo(N,j)},Ce.useReducer=function(N,j,ie){return X.current.useReducer(N,j,ie)},Ce.useRef=function(N){return X.current.useRef(N)},Ce.useState=function(N){return X.current.useState(N)},Ce.useSyncExternalStore=function(N,j,ie){return X.current.useSyncExternalStore(N,j,ie)},Ce.useTransition=function(){return X.current.useTransition()},Ce.version="18.3.1",Ce}var Gf;function yu(){return Gf||(Gf=1,bc.exports=Dv()),bc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function Mv(){if(qf)return gi;qf=1;var s=yu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,y){var w,_={},x=null,R=null;y!==void 0&&(x=""+y),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(R=m.ref);for(w in m)i.call(m,w)&&!c.hasOwnProperty(w)&&(_[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)_[w]===void 0&&(_[w]=m[w]);return{$$typeof:e,type:p,key:x,ref:R,props:_,_owner:l.current}}return gi.Fragment=n,gi.jsx=h,gi.jsxs=h,gi}var Yf;function Uv(){return Yf||(Yf=1,Tc.exports=Mv()),Tc.exports}var d=Uv(),P=yu();const _m=vm(P),Fv=Lv({__proto__:null,default:_m},[P]);var Zo={},Rc={exports:{}},Pt={},Pc={exports:{}},jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function $v(){return Qf||(Qf=1,function(s){function e(M,D){var L=M.length;M.push(D);e:for(;0<L;){var N=L-1>>>1,j=M[N];if(0<l(j,D))M[N]=D,M[L]=j,L=N;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var D=M[0],L=M.pop();if(L!==D){M[0]=L;e:for(var N=0,j=M.length,ie=j>>>1;N<ie;){var ae=2*(N+1)-1,xe=M[ae],fe=ae+1,Re=M[fe];if(0>l(xe,L))fe<j&&0>l(Re,xe)?(M[N]=Re,M[fe]=L,N=fe):(M[N]=xe,M[ae]=L,N=ae);else if(fe<j&&0>l(Re,L))M[N]=Re,M[fe]=L,N=fe;else break e}}return D}function l(M,D){var L=M.sortIndex-D.sortIndex;return L!==0?L:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var m=[],y=[],w=1,_=null,x=3,R=!1,F=!1,H=!1,b=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(M){for(var D=n(y);D!==null;){if(D.callback===null)i(y);else if(D.startTime<=M)i(y),D.sortIndex=D.expirationTime,e(m,D);else break;D=n(y)}}function pe(M){if(H=!1,ce(M),!F)if(n(m)!==null)F=!0,K(Ee);else{var D=n(y);D!==null&&X(pe,D.startTime-M)}}function Ee(M,D){F=!1,H&&(H=!1,V(De),De=-1),R=!0;var L=x;try{for(ce(D),_=n(m);_!==null&&(!(_.expirationTime>D)||M&&!Ge());){var N=_.callback;if(typeof N=="function"){_.callback=null,x=_.priorityLevel;var j=N(_.expirationTime<=D);D=s.unstable_now(),typeof j=="function"?_.callback=j:_===n(m)&&i(m),ce(D)}else i(m);_=n(m)}if(_!==null)var ie=!0;else{var ae=n(y);ae!==null&&X(pe,ae.startTime-D),ie=!1}return ie}finally{_=null,x=L,R=!1}}var we=!1,ye=null,De=-1,ze=5,oe=-1;function Ge(){return!(s.unstable_now()-oe<ze)}function Me(){if(ye!==null){var M=s.unstable_now();oe=M;var D=!0;try{D=ye(!0,M)}finally{D?O():(we=!1,ye=null)}}else we=!1}var O;if(typeof Q=="function")O=function(){Q(Me)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Se=se.port2;se.port1.onmessage=Me,O=function(){Se.postMessage(null)}}else O=function(){b(Me,0)};function K(M){ye=M,we||(we=!0,O())}function X(M,D){De=b(function(){M(s.unstable_now())},D)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_continueExecution=function(){F||R||(F=!0,K(Ee))},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_getFirstCallbackNode=function(){return n(m)},s.unstable_next=function(M){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var L=x;x=D;try{return M()}finally{x=L}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var L=x;x=M;try{return D()}finally{x=L}},s.unstable_scheduleCallback=function(M,D,L){var N=s.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,M){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=L+j,M={id:w++,callback:D,priorityLevel:M,startTime:L,expirationTime:j,sortIndex:-1},L>N?(M.sortIndex=L,e(y,M),n(m)===null&&M===n(y)&&(H?(V(De),De=-1):H=!0,X(pe,L-N))):(M.sortIndex=j,e(m,M),F||R||(F=!0,K(Ee))),M},s.unstable_shouldYield=Ge,s.unstable_wrapCallback=function(M){var D=x;return function(){var L=x;x=D;try{return M.apply(this,arguments)}finally{x=L}}}}(jc)),jc}var Jf;function zv(){return Jf||(Jf=1,Pc.exports=$v()),Pc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function Bv(){if(Xf)return Pt;Xf=1;var s=yu(),e=zv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(l[t]=r,t=0;t<r.length;t++)i.add(r[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function x(t){return m.call(_,t)?!0:m.call(w,t)?!1:y.test(t)?_[t]=!0:(w[t]=!0,!1)}function R(t,r,o,a){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F(t,r,o,a){if(r===null||typeof r>"u"||R(t,r,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function H(t,r,o,a,u,f,g){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=f,this.removeEmptyString=g}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new H(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];b[r]=new H(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new H(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new H(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new H(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new H(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new H(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new H(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new H(t,5,!1,t.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function Q(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(V,Q);b[r]=new H(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(V,Q);b[r]=new H(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(V,Q);b[r]=new H(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new H(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new H(t,1,!1,t.toLowerCase(),null,!0,!0)});function ce(t,r,o,a){var u=b.hasOwnProperty(r)?b[r]:null;(u!==null?u.type!==0:a||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(F(r,o,u,a)&&(o=null),a||u===null?x(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):u.mustUseProperty?t[u.propertyName]=o===null?u.type===3?!1:"":o:(r=u.attributeName,a=u.attributeNamespace,o===null?t.removeAttribute(r):(u=u.type,o=u===3||u===4&&o===!0?"":""+o,a?t.setAttributeNS(a,r,o):t.setAttribute(r,o))))}var pe=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),we=Symbol.for("react.portal"),ye=Symbol.for("react.fragment"),De=Symbol.for("react.strict_mode"),ze=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),M=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var L=Object.assign,N;function j(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var ie=!1;function ae(t,r){if(!t||ie)return"";ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(T){var a=T}Reflect.construct(t,[],r)}else{try{r.call()}catch(T){a=T}t.call(r.prototype)}else{try{throw Error()}catch(T){a=T}t()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var u=T.stack.split(`
`),f=a.stack.split(`
`),g=u.length-1,v=f.length-1;1<=g&&0<=v&&u[g]!==f[v];)v--;for(;1<=g&&0<=v;g--,v--)if(u[g]!==f[v]){if(g!==1||v!==1)do if(g--,v--,0>v||u[g]!==f[v]){var S=`
`+u[g].replace(" at new "," at ");return t.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",t.displayName)),S}while(1<=g&&0<=v);break}}}finally{ie=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?j(t):""}function xe(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=ae(t.type,!1),t;case 11:return t=ae(t.type.render,!1),t;case 1:return t=ae(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ye:return"Fragment";case we:return"Portal";case ze:return"Profiler";case De:return"StrictMode";case O:return"Suspense";case se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ge:return(t.displayName||"Context")+".Consumer";case oe:return(t._context.displayName||"Context")+".Provider";case Me:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Se:return r=t.displayName||null,r!==null?r:fe(t.type)||"Memo";case K:r=t._payload,t=t._init;try{return fe(t(r))}catch{}}return null}function Re(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(r);case 8:return r===De?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function E(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function q(t){var r=A(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function G(t){t._valueTracker||(t._valueTracker=q(t))}function le(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),a="";return t&&(a=A(t)?t.checked?"true":"false":t.value),t=a,t!==o?(r.setValue(t),!0):!1}function he(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ne(t,r){var o=r.checked;return L({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function W(t,r){var o=r.defaultValue==null?"":r.defaultValue,a=r.checked!=null?r.checked:r.defaultChecked;o=E(r.value!=null?r.value:o),t._wrapperState={initialChecked:a,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ke(t,r){r=r.checked,r!=null&&ce(t,"checked",r,!1)}function _e(t,r){ke(t,r);var o=E(r.value),a=r.type;if(o!=null)a==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Xe(t,r.type,o):r.hasOwnProperty("defaultValue")&&Xe(t,r.type,E(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ne(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var a=r.type;if(!(a!=="submit"&&a!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Xe(t,r,o){(r!=="number"||he(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Pe=Array.isArray;function pt(t,r,o,a){if(t=t.options,r){r={};for(var u=0;u<o.length;u++)r["$"+o[u]]=!0;for(o=0;o<t.length;o++)u=r.hasOwnProperty("$"+t[o].value),t[o].selected!==u&&(t[o].selected=u),u&&a&&(t[o].defaultSelected=!0)}else{for(o=""+E(o),r=null,u=0;u<t.length;u++){if(t[u].value===o){t[u].selected=!0,a&&(t[u].defaultSelected=!0);return}r!==null||t[u].disabled||(r=t[u])}r!==null&&(r.selected=!0)}}function Et(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dr(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Pe(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:E(o)}}function nd(t,r){var o=E(r.value),a=E(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),a!=null&&(t.defaultValue=""+a)}function rd(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function sd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?sd(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hi,id=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,a,u){MSApp.execUnsafeLocalFunction(function(){return t(r,o,a,u)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Hi=Hi||document.createElement("div"),Hi.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Hi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function js(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fy=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(t){Fy.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),As[r]=As[t]})});function od(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||As.hasOwnProperty(t)&&As[t]?(""+r).trim():r+"px"}function ld(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var a=o.indexOf("--")===0,u=od(o,r[o],a);o==="float"&&(o="cssFloat"),a?t.setProperty(o,u):t[o]=u}}var $y=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $l(t,r){if(r){if($y[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function zl(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function Wl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hl=null,Fr=null,$r=null;function ad(t){if(t=ti(t)){if(typeof Hl!="function")throw Error(n(280));var r=t.stateNode;r&&(r=po(r),Hl(t.stateNode,t.type,r))}}function cd(t){Fr?$r?$r.push(t):$r=[t]:Fr=t}function ud(){if(Fr){var t=Fr,r=$r;if($r=Fr=null,ad(t),r)for(t=0;t<r.length;t++)ad(r[t])}}function dd(t,r){return t(r)}function hd(){}var Vl=!1;function fd(t,r,o){if(Vl)return t(r,o);Vl=!0;try{return dd(t,r,o)}finally{Vl=!1,(Fr!==null||$r!==null)&&(hd(),ud())}}function Os(t,r){var o=t.stateNode;if(o===null)return null;var a=po(o);if(a===null)return null;o=a[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Kl=!1;if(p)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Kl=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Kl=!1}function zy(t,r,o,a,u,f,g,v,S){var T=Array.prototype.slice.call(arguments,3);try{r.apply(o,T)}catch($){this.onError($)}}var Ds=!1,Vi=null,Ki=!1,Gl=null,By={onError:function(t){Ds=!0,Vi=t}};function Wy(t,r,o,a,u,f,g,v,S){Ds=!1,Vi=null,zy.apply(By,arguments)}function Hy(t,r,o,a,u,f,g,v,S){if(Wy.apply(this,arguments),Ds){if(Ds){var T=Vi;Ds=!1,Vi=null}else throw Error(n(198));Ki||(Ki=!0,Gl=T)}}function hr(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function pd(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function md(t){if(hr(t)!==t)throw Error(n(188))}function Vy(t){var r=t.alternate;if(!r){if(r=hr(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,a=r;;){var u=o.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===o)return md(u),t;if(f===a)return md(u),r;f=f.sibling}throw Error(n(188))}if(o.return!==a.return)o=u,a=f;else{for(var g=!1,v=u.child;v;){if(v===o){g=!0,o=u,a=f;break}if(v===a){g=!0,a=u,o=f;break}v=v.sibling}if(!g){for(v=f.child;v;){if(v===o){g=!0,o=f,a=u;break}if(v===a){g=!0,a=f,o=u;break}v=v.sibling}if(!g)throw Error(n(189))}}if(o.alternate!==a)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function gd(t){return t=Vy(t),t!==null?yd(t):null}function yd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=yd(t);if(r!==null)return r;t=t.sibling}return null}var vd=e.unstable_scheduleCallback,_d=e.unstable_cancelCallback,Ky=e.unstable_shouldYield,Gy=e.unstable_requestPaint,Ze=e.unstable_now,qy=e.unstable_getCurrentPriorityLevel,ql=e.unstable_ImmediatePriority,xd=e.unstable_UserBlockingPriority,Gi=e.unstable_NormalPriority,Yy=e.unstable_LowPriority,wd=e.unstable_IdlePriority,qi=null,sn=null;function Qy(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(qi,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:Zy,Jy=Math.log,Xy=Math.LN2;function Zy(t){return t>>>=0,t===0?32:31-(Jy(t)/Xy|0)|0}var Yi=64,Qi=4194304;function Ms(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ji(t,r){var o=t.pendingLanes;if(o===0)return 0;var a=0,u=t.suspendedLanes,f=t.pingedLanes,g=o&268435455;if(g!==0){var v=g&~u;v!==0?a=Ms(v):(f&=g,f!==0&&(a=Ms(f)))}else g=o&~u,g!==0?a=Ms(g):f!==0&&(a=Ms(f));if(a===0)return 0;if(r!==0&&r!==a&&(r&u)===0&&(u=a&-a,f=r&-r,u>=f||u===16&&(f&4194240)!==0))return r;if((a&4)!==0&&(a|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=a;0<r;)o=31-Gt(r),u=1<<o,a|=t[o],r&=~u;return a}function e0(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t0(t,r){for(var o=t.suspendedLanes,a=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes;0<f;){var g=31-Gt(f),v=1<<g,S=u[g];S===-1?((v&o)===0||(v&a)!==0)&&(u[g]=e0(v,r)):S<=r&&(t.expiredLanes|=v),f&=~v}}function Yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sd(){var t=Yi;return Yi<<=1,(Yi&4194240)===0&&(Yi=64),t}function Ql(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Us(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Gt(r),t[r]=o}function n0(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<o;){var u=31-Gt(o),f=1<<u;r[u]=0,a[u]=-1,t[u]=-1,o&=~f}}function Jl(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var a=31-Gt(o),u=1<<a;u&r|t[a]&r&&(t[a]|=r),o&=~u}}var Le=0;function Cd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Nd,Xl,Ed,kd,Id,Zl=!1,Xi=[],jn=null,An=null,On=null,Fs=new Map,$s=new Map,Ln=[],r0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(t,r){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Fs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(r.pointerId)}}function zs(t,r,o,a,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},r!==null&&(r=ti(r),r!==null&&Xl(r)),t):(t.eventSystemFlags|=a,r=t.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),t)}function s0(t,r,o,a,u){switch(r){case"focusin":return jn=zs(jn,t,r,o,a,u),!0;case"dragenter":return An=zs(An,t,r,o,a,u),!0;case"mouseover":return On=zs(On,t,r,o,a,u),!0;case"pointerover":var f=u.pointerId;return Fs.set(f,zs(Fs.get(f)||null,t,r,o,a,u)),!0;case"gotpointercapture":return f=u.pointerId,$s.set(f,zs($s.get(f)||null,t,r,o,a,u)),!0}return!1}function bd(t){var r=fr(t.target);if(r!==null){var o=hr(r);if(o!==null){if(r=o.tag,r===13){if(r=pd(o),r!==null){t.blockedOn=r,Id(t.priority,function(){Ed(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zi(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ta(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var a=new o.constructor(o.type,o);Bl=a,o.target.dispatchEvent(a),Bl=null}else return r=ti(o),r!==null&&Xl(r),t.blockedOn=o,!1;r.shift()}return!0}function Rd(t,r,o){Zi(t)&&o.delete(r)}function i0(){Zl=!1,jn!==null&&Zi(jn)&&(jn=null),An!==null&&Zi(An)&&(An=null),On!==null&&Zi(On)&&(On=null),Fs.forEach(Rd),$s.forEach(Rd)}function Bs(t,r){t.blockedOn===r&&(t.blockedOn=null,Zl||(Zl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,i0)))}function Ws(t){function r(u){return Bs(u,t)}if(0<Xi.length){Bs(Xi[0],t);for(var o=1;o<Xi.length;o++){var a=Xi[o];a.blockedOn===t&&(a.blockedOn=null)}}for(jn!==null&&Bs(jn,t),An!==null&&Bs(An,t),On!==null&&Bs(On,t),Fs.forEach(r),$s.forEach(r),o=0;o<Ln.length;o++)a=Ln[o],a.blockedOn===t&&(a.blockedOn=null);for(;0<Ln.length&&(o=Ln[0],o.blockedOn===null);)bd(o),o.blockedOn===null&&Ln.shift()}var zr=pe.ReactCurrentBatchConfig,eo=!0;function o0(t,r,o,a){var u=Le,f=zr.transition;zr.transition=null;try{Le=1,ea(t,r,o,a)}finally{Le=u,zr.transition=f}}function l0(t,r,o,a){var u=Le,f=zr.transition;zr.transition=null;try{Le=4,ea(t,r,o,a)}finally{Le=u,zr.transition=f}}function ea(t,r,o,a){if(eo){var u=ta(t,r,o,a);if(u===null)va(t,r,a,to,o),Td(t,a);else if(s0(u,t,r,o,a))a.stopPropagation();else if(Td(t,a),r&4&&-1<r0.indexOf(t)){for(;u!==null;){var f=ti(u);if(f!==null&&Nd(f),f=ta(t,r,o,a),f===null&&va(t,r,a,to,o),f===u)break;u=f}u!==null&&a.stopPropagation()}else va(t,r,a,null,o)}}var to=null;function ta(t,r,o,a){if(to=null,t=Wl(a),t=fr(t),t!==null)if(r=hr(t),r===null)t=null;else if(o=r.tag,o===13){if(t=pd(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return to=t,null}function Pd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qy()){case ql:return 1;case xd:return 4;case Gi:case Yy:return 16;case wd:return 536870912;default:return 16}default:return 16}}var Dn=null,na=null,no=null;function jd(){if(no)return no;var t,r=na,o=r.length,a,u="value"in Dn?Dn.value:Dn.textContent,f=u.length;for(t=0;t<o&&r[t]===u[t];t++);var g=o-t;for(a=1;a<=g&&r[o-a]===u[f-a];a++);return no=u.slice(t,1<a?1-a:void 0)}function ro(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function so(){return!0}function Ad(){return!1}function Ot(t){function r(o,a,u,f,g){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(o=t[v],this[v]=o?o(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?so:Ad,this.isPropagationStopped=Ad,this}return L(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=so)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=so)},persist:function(){},isPersistent:so}),r}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Ot(Br),Hs=L({},Br,{view:0,detail:0}),a0=Ot(Hs),sa,ia,Vs,io=L({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vs&&(Vs&&t.type==="mousemove"?(sa=t.screenX-Vs.screenX,ia=t.screenY-Vs.screenY):ia=sa=0,Vs=t),sa)},movementY:function(t){return"movementY"in t?t.movementY:ia}}),Od=Ot(io),c0=L({},io,{dataTransfer:0}),u0=Ot(c0),d0=L({},Hs,{relatedTarget:0}),oa=Ot(d0),h0=L({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Ot(h0),p0=L({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),m0=Ot(p0),g0=L({},Br,{data:0}),Ld=Ot(g0),y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x0(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=_0[t])?!!r[t]:!1}function la(){return x0}var w0=L({},Hs,{key:function(t){if(t.key){var r=y0[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(t){return t.type==="keypress"?ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S0=Ot(w0),C0=L({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=Ot(C0),N0=L({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),E0=Ot(N0),k0=L({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),I0=Ot(k0),T0=L({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=Ot(T0),R0=[9,13,27,32],aa=p&&"CompositionEvent"in window,Ks=null;p&&"documentMode"in document&&(Ks=document.documentMode);var P0=p&&"TextEvent"in window&&!Ks,Md=p&&(!aa||Ks&&8<Ks&&11>=Ks),Ud=" ",Fd=!1;function $d(t,r){switch(t){case"keyup":return R0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wr=!1;function j0(t,r){switch(t){case"compositionend":return zd(r);case"keypress":return r.which!==32?null:(Fd=!0,Ud);case"textInput":return t=r.data,t===Ud&&Fd?null:t;default:return null}}function A0(t,r){if(Wr)return t==="compositionend"||!aa&&$d(t,r)?(t=jd(),no=na=Dn=null,Wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Md&&r.locale!=="ko"?null:r.data;default:return null}}var O0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!O0[t.type]:r==="textarea"}function Wd(t,r,o,a){cd(a),r=uo(r,"onChange"),0<r.length&&(o=new ra("onChange","change",null,o,a),t.push({event:o,listeners:r}))}var Gs=null,qs=null;function L0(t){lh(t,0)}function oo(t){var r=qr(t);if(le(r))return t}function D0(t,r){if(t==="change")return r}var Hd=!1;if(p){var ca;if(p){var ua="oninput"in document;if(!ua){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),ua=typeof Vd.oninput=="function"}ca=ua}else ca=!1;Hd=ca&&(!document.documentMode||9<document.documentMode)}function Kd(){Gs&&(Gs.detachEvent("onpropertychange",Gd),qs=Gs=null)}function Gd(t){if(t.propertyName==="value"&&oo(qs)){var r=[];Wd(r,qs,t,Wl(t)),fd(L0,r)}}function M0(t,r,o){t==="focusin"?(Kd(),Gs=r,qs=o,Gs.attachEvent("onpropertychange",Gd)):t==="focusout"&&Kd()}function U0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oo(qs)}function F0(t,r){if(t==="click")return oo(r)}function $0(t,r){if(t==="input"||t==="change")return oo(r)}function z0(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var qt=typeof Object.is=="function"?Object.is:z0;function Ys(t,r){if(qt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),a=Object.keys(r);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!m.call(r,u)||!qt(t[u],r[u]))return!1}return!0}function qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,r){var o=qd(t);t=0;for(var a;o;){if(o.nodeType===3){if(a=t+o.textContent.length,t<=r&&a>=r)return{node:o,offset:r-t};t=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qd(o)}}function Qd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Qd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Jd(){for(var t=window,r=he();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=he(t.document)}return r}function da(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function B0(t){var r=Jd(),o=t.focusedElem,a=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Qd(o.ownerDocument.documentElement,o)){if(a!==null&&da(o)){if(r=a.start,t=a.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var u=o.textContent.length,f=Math.min(a.start,u);a=a.end===void 0?f:Math.min(a.end,u),!t.extend&&f>a&&(u=a,a=f,f=u),u=Yd(o,f);var g=Yd(o,a);u&&g&&(t.rangeCount!==1||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(r=r.createRange(),r.setStart(u.node,u.offset),t.removeAllRanges(),f>a?(t.addRange(r),t.extend(g.node,g.offset)):(r.setEnd(g.node,g.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W0=p&&"documentMode"in document&&11>=document.documentMode,Hr=null,ha=null,Qs=null,fa=!1;function Xd(t,r,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fa||Hr==null||Hr!==he(a)||(a=Hr,"selectionStart"in a&&da(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Qs&&Ys(Qs,a)||(Qs=a,a=uo(ha,"onSelect"),0<a.length&&(r=new ra("onSelect","select",null,r,o),t.push({event:r,listeners:a}),r.target=Hr)))}function lo(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Vr={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},pa={},Zd={};p&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function ao(t){if(pa[t])return pa[t];if(!Vr[t])return t;var r=Vr[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Zd)return pa[t]=r[o];return t}var eh=ao("animationend"),th=ao("animationiteration"),nh=ao("animationstart"),rh=ao("transitionend"),sh=new Map,ih="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(t,r){sh.set(t,r),c(r,[t])}for(var ma=0;ma<ih.length;ma++){var ga=ih[ma],H0=ga.toLowerCase(),V0=ga[0].toUpperCase()+ga.slice(1);Mn(H0,"on"+V0)}Mn(eh,"onAnimationEnd"),Mn(th,"onAnimationIteration"),Mn(nh,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(rh,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function oh(t,r,o){var a=t.type||"unknown-event";t.currentTarget=o,Hy(a,r,void 0,t),t.currentTarget=null}function lh(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var a=t[o],u=a.event;a=a.listeners;e:{var f=void 0;if(r)for(var g=a.length-1;0<=g;g--){var v=a[g],S=v.instance,T=v.currentTarget;if(v=v.listener,S!==f&&u.isPropagationStopped())break e;oh(u,v,T),f=S}else for(g=0;g<a.length;g++){if(v=a[g],S=v.instance,T=v.currentTarget,v=v.listener,S!==f&&u.isPropagationStopped())break e;oh(u,v,T),f=S}}}if(Ki)throw t=Gl,Ki=!1,Gl=null,t}function Be(t,r){var o=r[Na];o===void 0&&(o=r[Na]=new Set);var a=t+"__bubble";o.has(a)||(ah(r,t,2,!1),o.add(a))}function ya(t,r,o){var a=0;r&&(a|=4),ah(o,t,a,r)}var co="_reactListening"+Math.random().toString(36).slice(2);function Xs(t){if(!t[co]){t[co]=!0,i.forEach(function(o){o!=="selectionchange"&&(K0.has(o)||ya(o,!1,t),ya(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[co]||(r[co]=!0,ya("selectionchange",!1,r))}}function ah(t,r,o,a){switch(Pd(r)){case 1:var u=o0;break;case 4:u=l0;break;default:u=ea}o=u.bind(null,r,o,t),u=void 0,!Kl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),a?u!==void 0?t.addEventListener(r,o,{capture:!0,passive:u}):t.addEventListener(r,o,!0):u!==void 0?t.addEventListener(r,o,{passive:u}):t.addEventListener(r,o,!1)}function va(t,r,o,a,u){var f=a;if((r&1)===0&&(r&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var v=a.stateNode.containerInfo;if(v===u||v.nodeType===8&&v.parentNode===u)break;if(g===4)for(g=a.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===u||S.nodeType===8&&S.parentNode===u))return;g=g.return}for(;v!==null;){if(g=fr(v),g===null)return;if(S=g.tag,S===5||S===6){a=f=g;continue e}v=v.parentNode}}a=a.return}fd(function(){var T=f,$=Wl(o),z=[];e:{var U=sh.get(t);if(U!==void 0){var J=ra,ee=t;switch(t){case"keypress":if(ro(o)===0)break e;case"keydown":case"keyup":J=S0;break;case"focusin":ee="focus",J=oa;break;case"focusout":ee="blur",J=oa;break;case"beforeblur":case"afterblur":J=oa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=u0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=E0;break;case eh:case th:case nh:J=f0;break;case rh:J=I0;break;case"scroll":J=a0;break;case"wheel":J=b0;break;case"copy":case"cut":case"paste":J=m0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Dd}var te=(r&4)!==0,et=!te&&t==="scroll",k=te?U!==null?U+"Capture":null:U;te=[];for(var C=T,I;C!==null;){I=C;var B=I.stateNode;if(I.tag===5&&B!==null&&(I=B,k!==null&&(B=Os(C,k),B!=null&&te.push(Zs(C,B,I)))),et)break;C=C.return}0<te.length&&(U=new J(U,ee,null,o,$),z.push({event:U,listeners:te}))}}if((r&7)===0){e:{if(U=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",U&&o!==Bl&&(ee=o.relatedTarget||o.fromElement)&&(fr(ee)||ee[mn]))break e;if((J||U)&&(U=$.window===$?$:(U=$.ownerDocument)?U.defaultView||U.parentWindow:window,J?(ee=o.relatedTarget||o.toElement,J=T,ee=ee?fr(ee):null,ee!==null&&(et=hr(ee),ee!==et||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(J=null,ee=T),J!==ee)){if(te=Od,B="onMouseLeave",k="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(te=Dd,B="onPointerLeave",k="onPointerEnter",C="pointer"),et=J==null?U:qr(J),I=ee==null?U:qr(ee),U=new te(B,C+"leave",J,o,$),U.target=et,U.relatedTarget=I,B=null,fr($)===T&&(te=new te(k,C+"enter",ee,o,$),te.target=I,te.relatedTarget=et,B=te),et=B,J&&ee)t:{for(te=J,k=ee,C=0,I=te;I;I=Kr(I))C++;for(I=0,B=k;B;B=Kr(B))I++;for(;0<C-I;)te=Kr(te),C--;for(;0<I-C;)k=Kr(k),I--;for(;C--;){if(te===k||k!==null&&te===k.alternate)break t;te=Kr(te),k=Kr(k)}te=null}else te=null;J!==null&&ch(z,U,J,te,!1),ee!==null&&et!==null&&ch(z,et,ee,te,!0)}}e:{if(U=T?qr(T):window,J=U.nodeName&&U.nodeName.toLowerCase(),J==="select"||J==="input"&&U.type==="file")var re=D0;else if(Bd(U))if(Hd)re=$0;else{re=U0;var ue=M0}else(J=U.nodeName)&&J.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(re=F0);if(re&&(re=re(t,T))){Wd(z,re,o,$);break e}ue&&ue(t,U,T),t==="focusout"&&(ue=U._wrapperState)&&ue.controlled&&U.type==="number"&&Xe(U,"number",U.value)}switch(ue=T?qr(T):window,t){case"focusin":(Bd(ue)||ue.contentEditable==="true")&&(Hr=ue,ha=T,Qs=null);break;case"focusout":Qs=ha=Hr=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,Xd(z,o,$);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":Xd(z,o,$)}var de;if(aa)e:{switch(t){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Wr?$d(t,o)&&(me="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(me="onCompositionStart");me&&(Md&&o.locale!=="ko"&&(Wr||me!=="onCompositionStart"?me==="onCompositionEnd"&&Wr&&(de=jd()):(Dn=$,na="value"in Dn?Dn.value:Dn.textContent,Wr=!0)),ue=uo(T,me),0<ue.length&&(me=new Ld(me,t,null,o,$),z.push({event:me,listeners:ue}),de?me.data=de:(de=zd(o),de!==null&&(me.data=de)))),(de=P0?j0(t,o):A0(t,o))&&(T=uo(T,"onBeforeInput"),0<T.length&&($=new Ld("onBeforeInput","beforeinput",null,o,$),z.push({event:$,listeners:T}),$.data=de))}lh(z,r)})}function Zs(t,r,o){return{instance:t,listener:r,currentTarget:o}}function uo(t,r){for(var o=r+"Capture",a=[];t!==null;){var u=t,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Os(t,o),f!=null&&a.unshift(Zs(t,f,u)),f=Os(t,r),f!=null&&a.push(Zs(t,f,u))),t=t.return}return a}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ch(t,r,o,a,u){for(var f=r._reactName,g=[];o!==null&&o!==a;){var v=o,S=v.alternate,T=v.stateNode;if(S!==null&&S===a)break;v.tag===5&&T!==null&&(v=T,u?(S=Os(o,f),S!=null&&g.unshift(Zs(o,S,v))):u||(S=Os(o,f),S!=null&&g.push(Zs(o,S,v)))),o=o.return}g.length!==0&&t.push({event:r,listeners:g})}var G0=/\r\n?/g,q0=/\u0000|\uFFFD/g;function uh(t){return(typeof t=="string"?t:""+t).replace(G0,`
`).replace(q0,"")}function ho(t,r,o){if(r=uh(r),uh(t)!==r&&o)throw Error(n(425))}function fo(){}var _a=null,xa=null;function wa(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Sa=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,Q0=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(t){return dh.resolve(null).then(t).catch(J0)}:Sa;function J0(t){setTimeout(function(){throw t})}function Ca(t,r){var o=r,a=0;do{var u=o.nextSibling;if(t.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(a===0){t.removeChild(u),Ws(r);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=u}while(o);Ws(r)}function Un(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function hh(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),on="__reactFiber$"+Gr,ei="__reactProps$"+Gr,mn="__reactContainer$"+Gr,Na="__reactEvents$"+Gr,X0="__reactListeners$"+Gr,Z0="__reactHandles$"+Gr;function fr(t){var r=t[on];if(r)return r;for(var o=t.parentNode;o;){if(r=o[mn]||o[on]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=hh(t);t!==null;){if(o=t[on])return o;t=hh(t)}return r}t=o,o=t.parentNode}return null}function ti(t){return t=t[on]||t[mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function po(t){return t[ei]||null}var Ea=[],Yr=-1;function Fn(t){return{current:t}}function We(t){0>Yr||(t.current=Ea[Yr],Ea[Yr]=null,Yr--)}function $e(t,r){Yr++,Ea[Yr]=t.current,t.current=r}var $n={},mt=Fn($n),kt=Fn(!1),pr=$n;function Qr(t,r){var o=t.type.contextTypes;if(!o)return $n;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===r)return a.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in o)u[f]=r[f];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=u),u}function It(t){return t=t.childContextTypes,t!=null}function mo(){We(kt),We(mt)}function fh(t,r,o){if(mt.current!==$n)throw Error(n(168));$e(mt,r),$e(kt,o)}function ph(t,r,o){var a=t.stateNode;if(r=r.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var u in a)if(!(u in r))throw Error(n(108,Re(t)||"Unknown",u));return L({},o,a)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,pr=mt.current,$e(mt,t),$e(kt,kt.current),!0}function mh(t,r,o){var a=t.stateNode;if(!a)throw Error(n(169));o?(t=ph(t,r,pr),a.__reactInternalMemoizedMergedChildContext=t,We(kt),We(mt),$e(mt,t)):We(kt),$e(kt,o)}var gn=null,yo=!1,ka=!1;function gh(t){gn===null?gn=[t]:gn.push(t)}function ev(t){yo=!0,gh(t)}function zn(){if(!ka&&gn!==null){ka=!0;var t=0,r=Le;try{var o=gn;for(Le=1;t<o.length;t++){var a=o[t];do a=a(!0);while(a!==null)}gn=null,yo=!1}catch(u){throw gn!==null&&(gn=gn.slice(t+1)),vd(ql,zn),u}finally{Le=r,ka=!1}}return null}var Jr=[],Xr=0,vo=null,_o=0,Ft=[],$t=0,mr=null,yn=1,vn="";function gr(t,r){Jr[Xr++]=_o,Jr[Xr++]=vo,vo=t,_o=r}function yh(t,r,o){Ft[$t++]=yn,Ft[$t++]=vn,Ft[$t++]=mr,mr=t;var a=yn;t=vn;var u=32-Gt(a)-1;a&=~(1<<u),o+=1;var f=32-Gt(r)+u;if(30<f){var g=u-u%5;f=(a&(1<<g)-1).toString(32),a>>=g,u-=g,yn=1<<32-Gt(r)+u|o<<u|a,vn=f+t}else yn=1<<f|o<<u|a,vn=t}function Ia(t){t.return!==null&&(gr(t,1),yh(t,1,0))}function Ta(t){for(;t===vo;)vo=Jr[--Xr],Jr[Xr]=null,_o=Jr[--Xr],Jr[Xr]=null;for(;t===mr;)mr=Ft[--$t],Ft[$t]=null,vn=Ft[--$t],Ft[$t]=null,yn=Ft[--$t],Ft[$t]=null}var Lt=null,Dt=null,qe=!1,Yt=null;function vh(t,r){var o=Ht(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function _h(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Lt=t,Dt=Un(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Lt=t,Dt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=mr!==null?{id:yn,overflow:vn}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Ht(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Lt=t,Dt=null,!0):!1;default:return!1}}function ba(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ra(t){if(qe){var r=Dt;if(r){var o=r;if(!_h(t,r)){if(ba(t))throw Error(n(418));r=Un(o.nextSibling);var a=Lt;r&&_h(t,r)?vh(a,o):(t.flags=t.flags&-4097|2,qe=!1,Lt=t)}}else{if(ba(t))throw Error(n(418));t.flags=t.flags&-4097|2,qe=!1,Lt=t}}}function xh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function xo(t){if(t!==Lt)return!1;if(!qe)return xh(t),qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!wa(t.type,t.memoizedProps)),r&&(r=Dt)){if(ba(t))throw wh(),Error(n(418));for(;r;)vh(t,r),r=Un(r.nextSibling)}if(xh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){Dt=Un(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}Dt=null}}else Dt=Lt?Un(t.stateNode.nextSibling):null;return!0}function wh(){for(var t=Dt;t;)t=Un(t.nextSibling)}function Zr(){Dt=Lt=null,qe=!1}function Pa(t){Yt===null?Yt=[t]:Yt.push(t)}var tv=pe.ReactCurrentBatchConfig;function ni(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var a=o.stateNode}if(!a)throw Error(n(147,t));var u=a,f=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(g){var v=u.refs;g===null?delete v[f]:v[f]=g},r._stringRef=f,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function wo(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Sh(t){var r=t._init;return r(t._payload)}function Ch(t){function r(k,C){if(t){var I=k.deletions;I===null?(k.deletions=[C],k.flags|=16):I.push(C)}}function o(k,C){if(!t)return null;for(;C!==null;)r(k,C),C=C.sibling;return null}function a(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function u(k,C){return k=Yn(k,C),k.index=0,k.sibling=null,k}function f(k,C,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<C?(k.flags|=2,C):I):(k.flags|=2,C)):(k.flags|=1048576,C)}function g(k){return t&&k.alternate===null&&(k.flags|=2),k}function v(k,C,I,B){return C===null||C.tag!==6?(C=Sc(I,k.mode,B),C.return=k,C):(C=u(C,I),C.return=k,C)}function S(k,C,I,B){var re=I.type;return re===ye?$(k,C,I.props.children,B,I.key):C!==null&&(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&Sh(re)===C.type)?(B=u(C,I.props),B.ref=ni(k,C,I),B.return=k,B):(B=Vo(I.type,I.key,I.props,null,k.mode,B),B.ref=ni(k,C,I),B.return=k,B)}function T(k,C,I,B){return C===null||C.tag!==4||C.stateNode.containerInfo!==I.containerInfo||C.stateNode.implementation!==I.implementation?(C=Cc(I,k.mode,B),C.return=k,C):(C=u(C,I.children||[]),C.return=k,C)}function $(k,C,I,B,re){return C===null||C.tag!==7?(C=Nr(I,k.mode,B,re),C.return=k,C):(C=u(C,I),C.return=k,C)}function z(k,C,I){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Sc(""+C,k.mode,I),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ee:return I=Vo(C.type,C.key,C.props,null,k.mode,I),I.ref=ni(k,null,C),I.return=k,I;case we:return C=Cc(C,k.mode,I),C.return=k,C;case K:var B=C._init;return z(k,B(C._payload),I)}if(Pe(C)||D(C))return C=Nr(C,k.mode,I,null),C.return=k,C;wo(k,C)}return null}function U(k,C,I,B){var re=C!==null?C.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return re!==null?null:v(k,C,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ee:return I.key===re?S(k,C,I,B):null;case we:return I.key===re?T(k,C,I,B):null;case K:return re=I._init,U(k,C,re(I._payload),B)}if(Pe(I)||D(I))return re!==null?null:$(k,C,I,B,null);wo(k,I)}return null}function J(k,C,I,B,re){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(I)||null,v(C,k,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ee:return k=k.get(B.key===null?I:B.key)||null,S(C,k,B,re);case we:return k=k.get(B.key===null?I:B.key)||null,T(C,k,B,re);case K:var ue=B._init;return J(k,C,I,ue(B._payload),re)}if(Pe(B)||D(B))return k=k.get(I)||null,$(C,k,B,re,null);wo(C,B)}return null}function ee(k,C,I,B){for(var re=null,ue=null,de=C,me=C=0,lt=null;de!==null&&me<I.length;me++){de.index>me?(lt=de,de=null):lt=de.sibling;var Ae=U(k,de,I[me],B);if(Ae===null){de===null&&(de=lt);break}t&&de&&Ae.alternate===null&&r(k,de),C=f(Ae,C,me),ue===null?re=Ae:ue.sibling=Ae,ue=Ae,de=lt}if(me===I.length)return o(k,de),qe&&gr(k,me),re;if(de===null){for(;me<I.length;me++)de=z(k,I[me],B),de!==null&&(C=f(de,C,me),ue===null?re=de:ue.sibling=de,ue=de);return qe&&gr(k,me),re}for(de=a(k,de);me<I.length;me++)lt=J(de,k,me,I[me],B),lt!==null&&(t&&lt.alternate!==null&&de.delete(lt.key===null?me:lt.key),C=f(lt,C,me),ue===null?re=lt:ue.sibling=lt,ue=lt);return t&&de.forEach(function(Qn){return r(k,Qn)}),qe&&gr(k,me),re}function te(k,C,I,B){var re=D(I);if(typeof re!="function")throw Error(n(150));if(I=re.call(I),I==null)throw Error(n(151));for(var ue=re=null,de=C,me=C=0,lt=null,Ae=I.next();de!==null&&!Ae.done;me++,Ae=I.next()){de.index>me?(lt=de,de=null):lt=de.sibling;var Qn=U(k,de,Ae.value,B);if(Qn===null){de===null&&(de=lt);break}t&&de&&Qn.alternate===null&&r(k,de),C=f(Qn,C,me),ue===null?re=Qn:ue.sibling=Qn,ue=Qn,de=lt}if(Ae.done)return o(k,de),qe&&gr(k,me),re;if(de===null){for(;!Ae.done;me++,Ae=I.next())Ae=z(k,Ae.value,B),Ae!==null&&(C=f(Ae,C,me),ue===null?re=Ae:ue.sibling=Ae,ue=Ae);return qe&&gr(k,me),re}for(de=a(k,de);!Ae.done;me++,Ae=I.next())Ae=J(de,k,me,Ae.value,B),Ae!==null&&(t&&Ae.alternate!==null&&de.delete(Ae.key===null?me:Ae.key),C=f(Ae,C,me),ue===null?re=Ae:ue.sibling=Ae,ue=Ae);return t&&de.forEach(function(Ov){return r(k,Ov)}),qe&&gr(k,me),re}function et(k,C,I,B){if(typeof I=="object"&&I!==null&&I.type===ye&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ee:e:{for(var re=I.key,ue=C;ue!==null;){if(ue.key===re){if(re=I.type,re===ye){if(ue.tag===7){o(k,ue.sibling),C=u(ue,I.props.children),C.return=k,k=C;break e}}else if(ue.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&Sh(re)===ue.type){o(k,ue.sibling),C=u(ue,I.props),C.ref=ni(k,ue,I),C.return=k,k=C;break e}o(k,ue);break}else r(k,ue);ue=ue.sibling}I.type===ye?(C=Nr(I.props.children,k.mode,B,I.key),C.return=k,k=C):(B=Vo(I.type,I.key,I.props,null,k.mode,B),B.ref=ni(k,C,I),B.return=k,k=B)}return g(k);case we:e:{for(ue=I.key;C!==null;){if(C.key===ue)if(C.tag===4&&C.stateNode.containerInfo===I.containerInfo&&C.stateNode.implementation===I.implementation){o(k,C.sibling),C=u(C,I.children||[]),C.return=k,k=C;break e}else{o(k,C);break}else r(k,C);C=C.sibling}C=Cc(I,k.mode,B),C.return=k,k=C}return g(k);case K:return ue=I._init,et(k,C,ue(I._payload),B)}if(Pe(I))return ee(k,C,I,B);if(D(I))return te(k,C,I,B);wo(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,C!==null&&C.tag===6?(o(k,C.sibling),C=u(C,I),C.return=k,k=C):(o(k,C),C=Sc(I,k.mode,B),C.return=k,k=C),g(k)):o(k,C)}return et}var es=Ch(!0),Nh=Ch(!1),So=Fn(null),Co=null,ts=null,ja=null;function Aa(){ja=ts=Co=null}function Oa(t){var r=So.current;We(So),t._currentValue=r}function La(t,r,o){for(;t!==null;){var a=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,a!==null&&(a.childLanes|=r)):a!==null&&(a.childLanes&r)!==r&&(a.childLanes|=r),t===o)break;t=t.return}}function ns(t,r){Co=t,ja=ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Tt=!0),t.firstContext=null)}function zt(t){var r=t._currentValue;if(ja!==t)if(t={context:t,memoizedValue:r,next:null},ts===null){if(Co===null)throw Error(n(308));ts=t,Co.dependencies={lanes:0,firstContext:t}}else ts=ts.next=t;return r}var yr=null;function Da(t){yr===null?yr=[t]:yr.push(t)}function Eh(t,r,o,a){var u=r.interleaved;return u===null?(o.next=o,Da(r)):(o.next=u.next,u.next=o),r.interleaved=o,_n(t,a)}function _n(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Bn=!1;function Ma(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Wn(t,r,o){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(je&2)!==0){var u=a.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),a.pending=r,_n(t,o)}return u=a.interleaved,u===null?(r.next=r,Da(a)):(r.next=u.next,u.next=r),a.interleaved=r,_n(t,o)}function No(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var a=r.lanes;a&=t.pendingLanes,o|=a,r.lanes=o,Jl(t,o)}}function Ih(t,r){var o=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?u=f=g:f=f.next=g,o=o.next}while(o!==null);f===null?u=f=r:f=f.next=r}else u=f=r;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,effects:a.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Eo(t,r,o,a){var u=t.updateQueue;Bn=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var S=v,T=S.next;S.next=null,g===null?f=T:g.next=T,g=S;var $=t.alternate;$!==null&&($=$.updateQueue,v=$.lastBaseUpdate,v!==g&&(v===null?$.firstBaseUpdate=T:v.next=T,$.lastBaseUpdate=S))}if(f!==null){var z=u.baseState;g=0,$=T=S=null,v=f;do{var U=v.lane,J=v.eventTime;if((a&U)===U){$!==null&&($=$.next={eventTime:J,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var ee=t,te=v;switch(U=r,J=o,te.tag){case 1:if(ee=te.payload,typeof ee=="function"){z=ee.call(J,z,U);break e}z=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=te.payload,U=typeof ee=="function"?ee.call(J,z,U):ee,U==null)break e;z=L({},z,U);break e;case 2:Bn=!0}}v.callback!==null&&v.lane!==0&&(t.flags|=64,U=u.effects,U===null?u.effects=[v]:U.push(v))}else J={eventTime:J,lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},$===null?(T=$=J,S=z):$=$.next=J,g|=U;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;U=v,v=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);if($===null&&(S=z),u.baseState=S,u.firstBaseUpdate=T,u.lastBaseUpdate=$,r=u.shared.interleaved,r!==null){u=r;do g|=u.lane,u=u.next;while(u!==r)}else f===null&&(u.shared.lanes=0);xr|=g,t.lanes=g,t.memoizedState=z}}function Th(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var a=t[r],u=a.callback;if(u!==null){if(a.callback=null,a=o,typeof u!="function")throw Error(n(191,u));u.call(a)}}}var ri={},ln=Fn(ri),si=Fn(ri),ii=Fn(ri);function vr(t){if(t===ri)throw Error(n(174));return t}function Ua(t,r){switch($e(ii,r),$e(si,t),$e(ln,ri),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Fl(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Fl(r,t)}We(ln),$e(ln,r)}function rs(){We(ln),We(si),We(ii)}function bh(t){vr(ii.current);var r=vr(ln.current),o=Fl(r,t.type);r!==o&&($e(si,t),$e(ln,o))}function Fa(t){si.current===t&&(We(ln),We(si))}var Ye=Fn(0);function ko(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $a=[];function za(){for(var t=0;t<$a.length;t++)$a[t]._workInProgressVersionPrimary=null;$a.length=0}var Io=pe.ReactCurrentDispatcher,Ba=pe.ReactCurrentBatchConfig,_r=0,Qe=null,nt=null,it=null,To=!1,oi=!1,li=0,nv=0;function gt(){throw Error(n(321))}function Wa(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!qt(t[o],r[o]))return!1;return!0}function Ha(t,r,o,a,u,f){if(_r=f,Qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Io.current=t===null||t.memoizedState===null?ov:lv,t=o(a,u),oi){f=0;do{if(oi=!1,li=0,25<=f)throw Error(n(301));f+=1,it=nt=null,r.updateQueue=null,Io.current=av,t=o(a,u)}while(oi)}if(Io.current=Po,r=nt!==null&&nt.next!==null,_r=0,it=nt=Qe=null,To=!1,r)throw Error(n(300));return t}function Va(){var t=li!==0;return li=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Qe.memoizedState=it=t:it=it.next=t,it}function Bt(){if(nt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var r=it===null?Qe.memoizedState:it.next;if(r!==null)it=r,nt=t;else{if(t===null)throw Error(n(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},it===null?Qe.memoizedState=it=t:it=it.next=t}return it}function ai(t,r){return typeof r=="function"?r(t):r}function Ka(t){var r=Bt(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=nt,u=a.baseQueue,f=o.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}a.baseQueue=u=f,o.pending=null}if(u!==null){f=u.next,a=a.baseState;var v=g=null,S=null,T=f;do{var $=T.lane;if((_r&$)===$)S!==null&&(S=S.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:t(a,T.action);else{var z={lane:$,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};S===null?(v=S=z,g=a):S=S.next=z,Qe.lanes|=$,xr|=$}T=T.next}while(T!==null&&T!==f);S===null?g=a:S.next=v,qt(a,r.memoizedState)||(Tt=!0),r.memoizedState=a,r.baseState=g,r.baseQueue=S,o.lastRenderedState=a}if(t=o.interleaved,t!==null){u=t;do f=u.lane,Qe.lanes|=f,xr|=f,u=u.next;while(u!==t)}else u===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Ga(t){var r=Bt(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=o.dispatch,u=o.pending,f=r.memoizedState;if(u!==null){o.pending=null;var g=u=u.next;do f=t(f,g.action),g=g.next;while(g!==u);qt(f,r.memoizedState)||(Tt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),o.lastRenderedState=f}return[f,a]}function Rh(){}function Ph(t,r){var o=Qe,a=Bt(),u=r(),f=!qt(a.memoizedState,u);if(f&&(a.memoizedState=u,Tt=!0),a=a.queue,qa(Oh.bind(null,o,a,t),[t]),a.getSnapshot!==r||f||it!==null&&it.memoizedState.tag&1){if(o.flags|=2048,ci(9,Ah.bind(null,o,a,u,r),void 0,null),ot===null)throw Error(n(349));(_r&30)!==0||jh(o,r,u)}return u}function jh(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Qe.updateQueue,r===null?(r={lastEffect:null,stores:null},Qe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Ah(t,r,o,a){r.value=o,r.getSnapshot=a,Lh(r)&&Dh(t)}function Oh(t,r,o){return o(function(){Lh(r)&&Dh(t)})}function Lh(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!qt(t,o)}catch{return!0}}function Dh(t){var r=_n(t,1);r!==null&&Zt(r,t,1,-1)}function Mh(t){var r=an();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:t},r.queue=t,t=t.dispatch=iv.bind(null,Qe,t),[r.memoizedState,t]}function ci(t,r,o,a){return t={tag:t,create:r,destroy:o,deps:a,next:null},r=Qe.updateQueue,r===null?(r={lastEffect:null,stores:null},Qe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(a=o.next,o.next=t,t.next=a,r.lastEffect=t)),t}function Uh(){return Bt().memoizedState}function bo(t,r,o,a){var u=an();Qe.flags|=t,u.memoizedState=ci(1|r,o,void 0,a===void 0?null:a)}function Ro(t,r,o,a){var u=Bt();a=a===void 0?null:a;var f=void 0;if(nt!==null){var g=nt.memoizedState;if(f=g.destroy,a!==null&&Wa(a,g.deps)){u.memoizedState=ci(r,o,f,a);return}}Qe.flags|=t,u.memoizedState=ci(1|r,o,f,a)}function Fh(t,r){return bo(8390656,8,t,r)}function qa(t,r){return Ro(2048,8,t,r)}function $h(t,r){return Ro(4,2,t,r)}function zh(t,r){return Ro(4,4,t,r)}function Bh(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Wh(t,r,o){return o=o!=null?o.concat([t]):null,Ro(4,4,Bh.bind(null,r,t),o)}function Ya(){}function Hh(t,r){var o=Bt();r=r===void 0?null:r;var a=o.memoizedState;return a!==null&&r!==null&&Wa(r,a[1])?a[0]:(o.memoizedState=[t,r],t)}function Vh(t,r){var o=Bt();r=r===void 0?null:r;var a=o.memoizedState;return a!==null&&r!==null&&Wa(r,a[1])?a[0]:(t=t(),o.memoizedState=[t,r],t)}function Kh(t,r,o){return(_r&21)===0?(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=o):(qt(o,r)||(o=Sd(),Qe.lanes|=o,xr|=o,t.baseState=!0),r)}function rv(t,r){var o=Le;Le=o!==0&&4>o?o:4,t(!0);var a=Ba.transition;Ba.transition={};try{t(!1),r()}finally{Le=o,Ba.transition=a}}function Gh(){return Bt().memoizedState}function sv(t,r,o){var a=Gn(t);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},qh(t))Yh(r,o);else if(o=Eh(t,r,o,a),o!==null){var u=Ct();Zt(o,t,a,u),Qh(o,r,a)}}function iv(t,r,o){var a=Gn(t),u={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(qh(t))Yh(r,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var g=r.lastRenderedState,v=f(g,o);if(u.hasEagerState=!0,u.eagerState=v,qt(v,g)){var S=r.interleaved;S===null?(u.next=u,Da(r)):(u.next=S.next,S.next=u),r.interleaved=u;return}}catch{}finally{}o=Eh(t,r,u,a),o!==null&&(u=Ct(),Zt(o,t,a,u),Qh(o,r,a))}}function qh(t){var r=t.alternate;return t===Qe||r!==null&&r===Qe}function Yh(t,r){oi=To=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Qh(t,r,o){if((o&4194240)!==0){var a=r.lanes;a&=t.pendingLanes,o|=a,r.lanes=o,Jl(t,o)}}var Po={readContext:zt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},ov={readContext:zt,useCallback:function(t,r){return an().memoizedState=[t,r===void 0?null:r],t},useContext:zt,useEffect:Fh,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,bo(4194308,4,Bh.bind(null,r,t),o)},useLayoutEffect:function(t,r){return bo(4194308,4,t,r)},useInsertionEffect:function(t,r){return bo(4,2,t,r)},useMemo:function(t,r){var o=an();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var a=an();return r=o!==void 0?o(r):r,a.memoizedState=a.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=sv.bind(null,Qe,t),[a.memoizedState,t]},useRef:function(t){var r=an();return t={current:t},r.memoizedState=t},useState:Mh,useDebugValue:Ya,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=Mh(!1),r=t[0];return t=rv.bind(null,t[1]),an().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var a=Qe,u=an();if(qe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),ot===null)throw Error(n(349));(_r&30)!==0||jh(a,r,o)}u.memoizedState=o;var f={value:o,getSnapshot:r};return u.queue=f,Fh(Oh.bind(null,a,f,t),[t]),a.flags|=2048,ci(9,Ah.bind(null,a,f,o,r),void 0,null),o},useId:function(){var t=an(),r=ot.identifierPrefix;if(qe){var o=vn,a=yn;o=(a&~(1<<32-Gt(a)-1)).toString(32)+o,r=":"+r+"R"+o,o=li++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=nv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},lv={readContext:zt,useCallback:Hh,useContext:zt,useEffect:qa,useImperativeHandle:Wh,useInsertionEffect:$h,useLayoutEffect:zh,useMemo:Vh,useReducer:Ka,useRef:Uh,useState:function(){return Ka(ai)},useDebugValue:Ya,useDeferredValue:function(t){var r=Bt();return Kh(r,nt.memoizedState,t)},useTransition:function(){var t=Ka(ai)[0],r=Bt().memoizedState;return[t,r]},useMutableSource:Rh,useSyncExternalStore:Ph,useId:Gh,unstable_isNewReconciler:!1},av={readContext:zt,useCallback:Hh,useContext:zt,useEffect:qa,useImperativeHandle:Wh,useInsertionEffect:$h,useLayoutEffect:zh,useMemo:Vh,useReducer:Ga,useRef:Uh,useState:function(){return Ga(ai)},useDebugValue:Ya,useDeferredValue:function(t){var r=Bt();return nt===null?r.memoizedState=t:Kh(r,nt.memoizedState,t)},useTransition:function(){var t=Ga(ai)[0],r=Bt().memoizedState;return[t,r]},useMutableSource:Rh,useSyncExternalStore:Ph,useId:Gh,unstable_isNewReconciler:!1};function Qt(t,r){if(t&&t.defaultProps){r=L({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Qa(t,r,o,a){r=t.memoizedState,o=o(a,r),o=o==null?r:L({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var jo={isMounted:function(t){return(t=t._reactInternals)?hr(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var a=Ct(),u=Gn(t),f=xn(a,u);f.payload=r,o!=null&&(f.callback=o),r=Wn(t,f,u),r!==null&&(Zt(r,t,u,a),No(r,t,u))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var a=Ct(),u=Gn(t),f=xn(a,u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Wn(t,f,u),r!==null&&(Zt(r,t,u,a),No(r,t,u))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Ct(),a=Gn(t),u=xn(o,a);u.tag=2,r!=null&&(u.callback=r),r=Wn(t,u,a),r!==null&&(Zt(r,t,a,o),No(r,t,a))}};function Jh(t,r,o,a,u,f,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,f,g):r.prototype&&r.prototype.isPureReactComponent?!Ys(o,a)||!Ys(u,f):!0}function Xh(t,r,o){var a=!1,u=$n,f=r.contextType;return typeof f=="object"&&f!==null?f=zt(f):(u=It(r)?pr:mt.current,a=r.contextTypes,f=(a=a!=null)?Qr(t,u):$n),r=new r(o,f),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=jo,t.stateNode=r,r._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=f),r}function Zh(t,r,o,a){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,a),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,a),r.state!==t&&jo.enqueueReplaceState(r,r.state,null)}function Ja(t,r,o,a){var u=t.stateNode;u.props=o,u.state=t.memoizedState,u.refs={},Ma(t);var f=r.contextType;typeof f=="object"&&f!==null?u.context=zt(f):(f=It(r)?pr:mt.current,u.context=Qr(t,f)),u.state=t.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(Qa(t,r,f,o),u.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(r=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),r!==u.state&&jo.enqueueReplaceState(u,u.state,null),Eo(t,o,u,a),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308)}function ss(t,r){try{var o="",a=r;do o+=xe(a),a=a.return;while(a);var u=o}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:r,stack:u,digest:null}}function Xa(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Za(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var cv=typeof WeakMap=="function"?WeakMap:Map;function ef(t,r,o){o=xn(-1,o),o.tag=3,o.payload={element:null};var a=r.value;return o.callback=function(){Fo||(Fo=!0,pc=a),Za(t,r)},o}function tf(t,r,o){o=xn(-1,o),o.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var u=r.value;o.payload=function(){return a(u)},o.callback=function(){Za(t,r)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){Za(t,r),typeof a!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var g=r.stack;this.componentDidCatch(r.value,{componentStack:g!==null?g:""})}),o}function nf(t,r,o){var a=t.pingCache;if(a===null){a=t.pingCache=new cv;var u=new Set;a.set(r,u)}else u=a.get(r),u===void 0&&(u=new Set,a.set(r,u));u.has(o)||(u.add(o),t=Cv.bind(null,t,r,o),r.then(t,t))}function rf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function sf(t,r,o,a,u){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=xn(-1,1),r.tag=2,Wn(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=u,t)}var uv=pe.ReactCurrentOwner,Tt=!1;function St(t,r,o,a){r.child=t===null?Nh(r,null,o,a):es(r,t.child,o,a)}function of(t,r,o,a,u){o=o.render;var f=r.ref;return ns(r,u),a=Ha(t,r,o,a,f,u),o=Va(),t!==null&&!Tt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,wn(t,r,u)):(qe&&o&&Ia(r),r.flags|=1,St(t,r,a,u),r.child)}function lf(t,r,o,a,u){if(t===null){var f=o.type;return typeof f=="function"&&!wc(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=f,af(t,r,f,a,u)):(t=Vo(o.type,null,a,r,r.mode,u),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,(t.lanes&u)===0){var g=f.memoizedProps;if(o=o.compare,o=o!==null?o:Ys,o(g,a)&&t.ref===r.ref)return wn(t,r,u)}return r.flags|=1,t=Yn(f,a),t.ref=r.ref,t.return=r,r.child=t}function af(t,r,o,a,u){if(t!==null){var f=t.memoizedProps;if(Ys(f,a)&&t.ref===r.ref)if(Tt=!1,r.pendingProps=a=f,(t.lanes&u)!==0)(t.flags&131072)!==0&&(Tt=!0);else return r.lanes=t.lanes,wn(t,r,u)}return ec(t,r,o,a,u)}function cf(t,r,o){var a=r.pendingProps,u=a.children,f=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(os,Mt),Mt|=o;else{if((o&1073741824)===0)return t=f!==null?f.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,$e(os,Mt),Mt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:o,$e(os,Mt),Mt|=a}else f!==null?(a=f.baseLanes|o,r.memoizedState=null):a=o,$e(os,Mt),Mt|=a;return St(t,r,u,o),r.child}function uf(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function ec(t,r,o,a,u){var f=It(o)?pr:mt.current;return f=Qr(r,f),ns(r,u),o=Ha(t,r,o,a,f,u),a=Va(),t!==null&&!Tt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,wn(t,r,u)):(qe&&a&&Ia(r),r.flags|=1,St(t,r,o,u),r.child)}function df(t,r,o,a,u){if(It(o)){var f=!0;go(r)}else f=!1;if(ns(r,u),r.stateNode===null)Oo(t,r),Xh(r,o,a),Ja(r,o,a,u),a=!0;else if(t===null){var g=r.stateNode,v=r.memoizedProps;g.props=v;var S=g.context,T=o.contextType;typeof T=="object"&&T!==null?T=zt(T):(T=It(o)?pr:mt.current,T=Qr(r,T));var $=o.getDerivedStateFromProps,z=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function";z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==a||S!==T)&&Zh(r,g,a,T),Bn=!1;var U=r.memoizedState;g.state=U,Eo(r,a,g,u),S=r.memoizedState,v!==a||U!==S||kt.current||Bn?(typeof $=="function"&&(Qa(r,o,$,a),S=r.memoizedState),(v=Bn||Jh(r,o,v,a,U,S,T))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=a,r.memoizedState=S),g.props=a,g.state=S,g.context=T,a=v):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),a=!1)}else{g=r.stateNode,kh(t,r),v=r.memoizedProps,T=r.type===r.elementType?v:Qt(r.type,v),g.props=T,z=r.pendingProps,U=g.context,S=o.contextType,typeof S=="object"&&S!==null?S=zt(S):(S=It(o)?pr:mt.current,S=Qr(r,S));var J=o.getDerivedStateFromProps;($=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==z||U!==S)&&Zh(r,g,a,S),Bn=!1,U=r.memoizedState,g.state=U,Eo(r,a,g,u);var ee=r.memoizedState;v!==z||U!==ee||kt.current||Bn?(typeof J=="function"&&(Qa(r,o,J,a),ee=r.memoizedState),(T=Bn||Jh(r,o,T,a,U,ee,S)||!1)?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ee,S),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ee,S)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(r.flags|=1024),r.memoizedProps=a,r.memoizedState=ee),g.props=a,g.state=ee,g.context=S,a=T):(typeof g.componentDidUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(r.flags|=1024),a=!1)}return tc(t,r,o,a,f,u)}function tc(t,r,o,a,u,f){uf(t,r);var g=(r.flags&128)!==0;if(!a&&!g)return u&&mh(r,o,!1),wn(t,r,f);a=r.stateNode,uv.current=r;var v=g&&typeof o.getDerivedStateFromError!="function"?null:a.render();return r.flags|=1,t!==null&&g?(r.child=es(r,t.child,null,f),r.child=es(r,null,v,f)):St(t,r,v,f),r.memoizedState=a.state,u&&mh(r,o,!0),r.child}function hf(t){var r=t.stateNode;r.pendingContext?fh(t,r.pendingContext,r.pendingContext!==r.context):r.context&&fh(t,r.context,!1),Ua(t,r.containerInfo)}function ff(t,r,o,a,u){return Zr(),Pa(u),r.flags|=256,St(t,r,o,a),r.child}var nc={dehydrated:null,treeContext:null,retryLane:0};function rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function pf(t,r,o){var a=r.pendingProps,u=Ye.current,f=!1,g=(r.flags&128)!==0,v;if((v=g)||(v=t!==null&&t.memoizedState===null?!1:(u&2)!==0),v?(f=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(u|=1),$e(Ye,u&1),t===null)return Ra(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(g=a.children,t=a.fallback,f?(a=r.mode,f=r.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Ko(g,a,0,null),t=Nr(t,a,o,null),f.return=r,t.return=r,f.sibling=t,r.child=f,r.child.memoizedState=rc(o),r.memoizedState=nc,t):sc(r,g));if(u=t.memoizedState,u!==null&&(v=u.dehydrated,v!==null))return dv(t,r,g,a,v,u,o);if(f){f=a.fallback,g=r.mode,u=t.child,v=u.sibling;var S={mode:"hidden",children:a.children};return(g&1)===0&&r.child!==u?(a=r.child,a.childLanes=0,a.pendingProps=S,r.deletions=null):(a=Yn(u,S),a.subtreeFlags=u.subtreeFlags&14680064),v!==null?f=Yn(v,f):(f=Nr(f,g,o,null),f.flags|=2),f.return=r,a.return=r,a.sibling=f,r.child=a,a=f,f=r.child,g=t.child.memoizedState,g=g===null?rc(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=t.childLanes&~o,r.memoizedState=nc,a}return f=t.child,t=f.sibling,a=Yn(f,{mode:"visible",children:a.children}),(r.mode&1)===0&&(a.lanes=o),a.return=r,a.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=a,r.memoizedState=null,a}function sc(t,r){return r=Ko({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Ao(t,r,o,a){return a!==null&&Pa(a),es(r,t.child,null,o),t=sc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function dv(t,r,o,a,u,f,g){if(o)return r.flags&256?(r.flags&=-257,a=Xa(Error(n(422))),Ao(t,r,g,a)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(f=a.fallback,u=r.mode,a=Ko({mode:"visible",children:a.children},u,0,null),f=Nr(f,u,g,null),f.flags|=2,a.return=r,f.return=r,a.sibling=f,r.child=a,(r.mode&1)!==0&&es(r,t.child,null,g),r.child.memoizedState=rc(g),r.memoizedState=nc,f);if((r.mode&1)===0)return Ao(t,r,g,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var v=a.dgst;return a=v,f=Error(n(419)),a=Xa(f,a,void 0),Ao(t,r,g,a)}if(v=(g&t.childLanes)!==0,Tt||v){if(a=ot,a!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(a.suspendedLanes|g))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,_n(t,u),Zt(a,t,u,-1))}return xc(),a=Xa(Error(n(421))),Ao(t,r,g,a)}return u.data==="$?"?(r.flags|=128,r.child=t.child,r=Nv.bind(null,t),u._reactRetry=r,null):(t=f.treeContext,Dt=Un(u.nextSibling),Lt=r,qe=!0,Yt=null,t!==null&&(Ft[$t++]=yn,Ft[$t++]=vn,Ft[$t++]=mr,yn=t.id,vn=t.overflow,mr=r),r=sc(r,a.children),r.flags|=4096,r)}function mf(t,r,o){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r),La(t.return,r,o)}function ic(t,r,o,a,u){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=o,f.tailMode=u)}function gf(t,r,o){var a=r.pendingProps,u=a.revealOrder,f=a.tail;if(St(t,r,a.children,o),a=Ye.current,(a&2)!==0)a=a&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mf(t,o,r);else if(t.tag===19)mf(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if($e(Ye,a),(r.mode&1)===0)r.memoizedState=null;else switch(u){case"forwards":for(o=r.child,u=null;o!==null;)t=o.alternate,t!==null&&ko(t)===null&&(u=o),o=o.sibling;o=u,o===null?(u=r.child,r.child=null):(u=o.sibling,o.sibling=null),ic(r,!1,u,o,f);break;case"backwards":for(o=null,u=r.child,r.child=null;u!==null;){if(t=u.alternate,t!==null&&ko(t)===null){r.child=u;break}t=u.sibling,u.sibling=o,o=u,u=t}ic(r,!0,o,null,f);break;case"together":ic(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Oo(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function wn(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),xr|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Yn(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Yn(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function hv(t,r,o){switch(r.tag){case 3:hf(r),Zr();break;case 5:bh(r);break;case 1:It(r.type)&&go(r);break;case 4:Ua(r,r.stateNode.containerInfo);break;case 10:var a=r.type._context,u=r.memoizedProps.value;$e(So,a._currentValue),a._currentValue=u;break;case 13:if(a=r.memoizedState,a!==null)return a.dehydrated!==null?($e(Ye,Ye.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?pf(t,r,o):($e(Ye,Ye.current&1),t=wn(t,r,o),t!==null?t.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(a=(o&r.childLanes)!==0,(t.flags&128)!==0){if(a)return gf(t,r,o);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),$e(Ye,Ye.current),a)break;return null;case 22:case 23:return r.lanes=0,cf(t,r,o)}return wn(t,r,o)}var yf,oc,vf,_f;yf=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},oc=function(){},vf=function(t,r,o,a){var u=t.memoizedProps;if(u!==a){t=r.stateNode,vr(ln.current);var f=null;switch(o){case"input":u=ne(t,u),a=ne(t,a),f=[];break;case"select":u=L({},u,{value:void 0}),a=L({},a,{value:void 0}),f=[];break;case"textarea":u=Et(t,u),a=Et(t,a),f=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=fo)}$l(o,a);var g;o=null;for(T in u)if(!a.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var v=u[T];for(g in v)v.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?f||(f=[]):(f=f||[]).push(T,null));for(T in a){var S=a[T];if(v=u?.[T],a.hasOwnProperty(T)&&S!==v&&(S!=null||v!=null))if(T==="style")if(v){for(g in v)!v.hasOwnProperty(g)||S&&S.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in S)S.hasOwnProperty(g)&&v[g]!==S[g]&&(o||(o={}),o[g]=S[g])}else o||(f||(f=[]),f.push(T,o)),o=S;else T==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,v=v?v.__html:void 0,S!=null&&v!==S&&(f=f||[]).push(T,S)):T==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push(T,""+S):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(S!=null&&T==="onScroll"&&Be("scroll",t),f||v===S||(f=[])):(f=f||[]).push(T,S))}o&&(f=f||[]).push("style",o);var T=f;(r.updateQueue=T)&&(r.flags|=4)}},_f=function(t,r,o,a){o!==a&&(r.flags|=4)};function ui(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function yt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,a=0;if(r)for(var u=t.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=a,t.childLanes=o,r}function fv(t,r,o){var a=r.pendingProps;switch(Ta(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(r),null;case 1:return It(r.type)&&mo(),yt(r),null;case 3:return a=r.stateNode,rs(),We(kt),We(mt),za(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xo(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yt!==null&&(yc(Yt),Yt=null))),oc(t,r),yt(r),null;case 5:Fa(r);var u=vr(ii.current);if(o=r.type,t!==null&&r.stateNode!=null)vf(t,r,o,a,u),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!a){if(r.stateNode===null)throw Error(n(166));return yt(r),null}if(t=vr(ln.current),xo(r)){a=r.stateNode,o=r.type;var f=r.memoizedProps;switch(a[on]=r,a[ei]=f,t=(r.mode&1)!==0,o){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(u=0;u<Js.length;u++)Be(Js[u],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":W(a,f),Be("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Be("invalid",a);break;case"textarea":dr(a,f),Be("invalid",a)}$l(o,f),u=null;for(var g in f)if(f.hasOwnProperty(g)){var v=f[g];g==="children"?typeof v=="string"?a.textContent!==v&&(f.suppressHydrationWarning!==!0&&ho(a.textContent,v,t),u=["children",v]):typeof v=="number"&&a.textContent!==""+v&&(f.suppressHydrationWarning!==!0&&ho(a.textContent,v,t),u=["children",""+v]):l.hasOwnProperty(g)&&v!=null&&g==="onScroll"&&Be("scroll",a)}switch(o){case"input":G(a),Ne(a,f,!0);break;case"textarea":G(a),rd(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=fo)}a=u,r.updateQueue=a,a!==null&&(r.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sd(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=g.createElement(o,{is:a.is}):(t=g.createElement(o),o==="select"&&(g=t,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):t=g.createElementNS(t,o),t[on]=r,t[ei]=a,yf(t,r,!1,!1),r.stateNode=t;e:{switch(g=zl(o,a),o){case"dialog":Be("cancel",t),Be("close",t),u=a;break;case"iframe":case"object":case"embed":Be("load",t),u=a;break;case"video":case"audio":for(u=0;u<Js.length;u++)Be(Js[u],t);u=a;break;case"source":Be("error",t),u=a;break;case"img":case"image":case"link":Be("error",t),Be("load",t),u=a;break;case"details":Be("toggle",t),u=a;break;case"input":W(t,a),u=ne(t,a),Be("invalid",t);break;case"option":u=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},u=L({},a,{value:void 0}),Be("invalid",t);break;case"textarea":dr(t,a),u=Et(t,a),Be("invalid",t);break;default:u=a}$l(o,u),v=u;for(f in v)if(v.hasOwnProperty(f)){var S=v[f];f==="style"?ld(t,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&id(t,S)):f==="children"?typeof S=="string"?(o!=="textarea"||S!=="")&&js(t,S):typeof S=="number"&&js(t,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?S!=null&&f==="onScroll"&&Be("scroll",t):S!=null&&ce(t,f,S,g))}switch(o){case"input":G(t),Ne(t,a,!1);break;case"textarea":G(t),rd(t);break;case"option":a.value!=null&&t.setAttribute("value",""+E(a.value));break;case"select":t.multiple=!!a.multiple,f=a.value,f!=null?pt(t,!!a.multiple,f,!1):a.defaultValue!=null&&pt(t,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(t.onclick=fo)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return yt(r),null;case 6:if(t&&r.stateNode!=null)_f(t,r,t.memoizedProps,a);else{if(typeof a!="string"&&r.stateNode===null)throw Error(n(166));if(o=vr(ii.current),vr(ln.current),xo(r)){if(a=r.stateNode,o=r.memoizedProps,a[on]=r,(f=a.nodeValue!==o)&&(t=Lt,t!==null))switch(t.tag){case 3:ho(a.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ho(a.nodeValue,o,(t.mode&1)!==0)}f&&(r.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[on]=r,r.stateNode=a}return yt(r),null;case 13:if(We(Ye),a=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Dt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)wh(),Zr(),r.flags|=98560,f=!1;else if(f=xo(r),a!==null&&a.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[on]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),f=!1}else Yt!==null&&(yc(Yt),Yt=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Ye.current&1)!==0?rt===0&&(rt=3):xc())),r.updateQueue!==null&&(r.flags|=4),yt(r),null);case 4:return rs(),oc(t,r),t===null&&Xs(r.stateNode.containerInfo),yt(r),null;case 10:return Oa(r.type._context),yt(r),null;case 17:return It(r.type)&&mo(),yt(r),null;case 19:if(We(Ye),f=r.memoizedState,f===null)return yt(r),null;if(a=(r.flags&128)!==0,g=f.rendering,g===null)if(a)ui(f,!1);else{if(rt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(g=ko(t),g!==null){for(r.flags|=128,ui(f,!1),a=g.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),r.subtreeFlags=0,a=o,o=r.child;o!==null;)f=o,t=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,t=g.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return $e(Ye,Ye.current&1|2),r.child}t=t.sibling}f.tail!==null&&Ze()>ls&&(r.flags|=128,a=!0,ui(f,!1),r.lanes=4194304)}else{if(!a)if(t=ko(g),t!==null){if(r.flags|=128,a=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),ui(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!qe)return yt(r),null}else 2*Ze()-f.renderingStartTime>ls&&o!==1073741824&&(r.flags|=128,a=!0,ui(f,!1),r.lanes=4194304);f.isBackwards?(g.sibling=r.child,r.child=g):(o=f.last,o!==null?o.sibling=g:r.child=g,f.last=g)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Ze(),r.sibling=null,o=Ye.current,$e(Ye,a?o&1|2:o&1),r):(yt(r),null);case 22:case 23:return _c(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&(r.mode&1)!==0?(Mt&1073741824)!==0&&(yt(r),r.subtreeFlags&6&&(r.flags|=8192)):yt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function pv(t,r){switch(Ta(r),r.tag){case 1:return It(r.type)&&mo(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return rs(),We(kt),We(mt),za(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Fa(r),null;case 13:if(We(Ye),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Zr()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ye),null;case 4:return rs(),null;case 10:return Oa(r.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var Lo=!1,vt=!1,mv=typeof WeakSet=="function"?WeakSet:Set,Z=null;function is(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Je(t,r,a)}else o.current=null}function lc(t,r,o){try{o()}catch(a){Je(t,r,a)}}var xf=!1;function gv(t,r){if(_a=eo,t=Jd(),da(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var g=0,v=-1,S=-1,T=0,$=0,z=t,U=null;t:for(;;){for(var J;z!==o||u!==0&&z.nodeType!==3||(v=g+u),z!==f||a!==0&&z.nodeType!==3||(S=g+a),z.nodeType===3&&(g+=z.nodeValue.length),(J=z.firstChild)!==null;)U=z,z=J;for(;;){if(z===t)break t;if(U===o&&++T===u&&(v=g),U===f&&++$===a&&(S=g),(J=z.nextSibling)!==null)break;z=U,U=z.parentNode}z=J}o=v===-1||S===-1?null:{start:v,end:S}}else o=null}o=o||{start:0,end:0}}else o=null;for(xa={focusedElem:t,selectionRange:o},eo=!1,Z=r;Z!==null;)if(r=Z,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Z=t;else for(;Z!==null;){r=Z;try{var ee=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var te=ee.memoizedProps,et=ee.memoizedState,k=r.stateNode,C=k.getSnapshotBeforeUpdate(r.elementType===r.type?te:Qt(r.type,te),et);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var I=r.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(B){Je(r,r.return,B)}if(t=r.sibling,t!==null){t.return=r.return,Z=t;break}Z=r.return}return ee=xf,xf=!1,ee}function di(t,r,o){var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&t)===t){var f=u.destroy;u.destroy=void 0,f!==void 0&&lc(r,o,f)}u=u.next}while(u!==a)}}function Do(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var a=o.create;o.destroy=a()}o=o.next}while(o!==r)}}function ac(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function wf(t){var r=t.alternate;r!==null&&(t.alternate=null,wf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[on],delete r[ei],delete r[Na],delete r[X0],delete r[Z0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sf(t){return t.tag===5||t.tag===3||t.tag===4}function Cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cc(t,r,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=fo));else if(a!==4&&(t=t.child,t!==null))for(cc(t,r,o),t=t.sibling;t!==null;)cc(t,r,o),t=t.sibling}function uc(t,r,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(uc(t,r,o),t=t.sibling;t!==null;)uc(t,r,o),t=t.sibling}var dt=null,Jt=!1;function Hn(t,r,o){for(o=o.child;o!==null;)Nf(t,r,o),o=o.sibling}function Nf(t,r,o){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(qi,o)}catch{}switch(o.tag){case 5:vt||is(o,r);case 6:var a=dt,u=Jt;dt=null,Hn(t,r,o),dt=a,Jt=u,dt!==null&&(Jt?(t=dt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):dt.removeChild(o.stateNode));break;case 18:dt!==null&&(Jt?(t=dt,o=o.stateNode,t.nodeType===8?Ca(t.parentNode,o):t.nodeType===1&&Ca(t,o),Ws(t)):Ca(dt,o.stateNode));break;case 4:a=dt,u=Jt,dt=o.stateNode.containerInfo,Jt=!0,Hn(t,r,o),dt=a,Jt=u;break;case 0:case 11:case 14:case 15:if(!vt&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var f=u,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&lc(o,r,g),u=u.next}while(u!==a)}Hn(t,r,o);break;case 1:if(!vt&&(is(o,r),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(v){Je(o,r,v)}Hn(t,r,o);break;case 21:Hn(t,r,o);break;case 22:o.mode&1?(vt=(a=vt)||o.memoizedState!==null,Hn(t,r,o),vt=a):Hn(t,r,o);break;default:Hn(t,r,o)}}function Ef(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new mv),r.forEach(function(a){var u=Ev.bind(null,t,a);o.has(a)||(o.add(a),a.then(u,u))})}}function Xt(t,r){var o=r.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];try{var f=t,g=r,v=g;e:for(;v!==null;){switch(v.tag){case 5:dt=v.stateNode,Jt=!1;break e;case 3:dt=v.stateNode.containerInfo,Jt=!0;break e;case 4:dt=v.stateNode.containerInfo,Jt=!0;break e}v=v.return}if(dt===null)throw Error(n(160));Nf(f,g,u),dt=null,Jt=!1;var S=u.alternate;S!==null&&(S.return=null),u.return=null}catch(T){Je(u,r,T)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)kf(r,t),r=r.sibling}function kf(t,r){var o=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(r,t),cn(t),a&4){try{di(3,t,t.return),Do(3,t)}catch(te){Je(t,t.return,te)}try{di(5,t,t.return)}catch(te){Je(t,t.return,te)}}break;case 1:Xt(r,t),cn(t),a&512&&o!==null&&is(o,o.return);break;case 5:if(Xt(r,t),cn(t),a&512&&o!==null&&is(o,o.return),t.flags&32){var u=t.stateNode;try{js(u,"")}catch(te){Je(t,t.return,te)}}if(a&4&&(u=t.stateNode,u!=null)){var f=t.memoizedProps,g=o!==null?o.memoizedProps:f,v=t.type,S=t.updateQueue;if(t.updateQueue=null,S!==null)try{v==="input"&&f.type==="radio"&&f.name!=null&&ke(u,f),zl(v,g);var T=zl(v,f);for(g=0;g<S.length;g+=2){var $=S[g],z=S[g+1];$==="style"?ld(u,z):$==="dangerouslySetInnerHTML"?id(u,z):$==="children"?js(u,z):ce(u,$,z,T)}switch(v){case"input":_e(u,f);break;case"textarea":nd(u,f);break;case"select":var U=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var J=f.value;J!=null?pt(u,!!f.multiple,J,!1):U!==!!f.multiple&&(f.defaultValue!=null?pt(u,!!f.multiple,f.defaultValue,!0):pt(u,!!f.multiple,f.multiple?[]:"",!1))}u[ei]=f}catch(te){Je(t,t.return,te)}}break;case 6:if(Xt(r,t),cn(t),a&4){if(t.stateNode===null)throw Error(n(162));u=t.stateNode,f=t.memoizedProps;try{u.nodeValue=f}catch(te){Je(t,t.return,te)}}break;case 3:if(Xt(r,t),cn(t),a&4&&o!==null&&o.memoizedState.isDehydrated)try{Ws(r.containerInfo)}catch(te){Je(t,t.return,te)}break;case 4:Xt(r,t),cn(t);break;case 13:Xt(r,t),cn(t),u=t.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(fc=Ze())),a&4&&Ef(t);break;case 22:if($=o!==null&&o.memoizedState!==null,t.mode&1?(vt=(T=vt)||$,Xt(r,t),vt=T):Xt(r,t),cn(t),a&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!$&&(t.mode&1)!==0)for(Z=t,$=t.child;$!==null;){for(z=Z=$;Z!==null;){switch(U=Z,J=U.child,U.tag){case 0:case 11:case 14:case 15:di(4,U,U.return);break;case 1:is(U,U.return);var ee=U.stateNode;if(typeof ee.componentWillUnmount=="function"){a=U,o=U.return;try{r=a,ee.props=r.memoizedProps,ee.state=r.memoizedState,ee.componentWillUnmount()}catch(te){Je(a,o,te)}}break;case 5:is(U,U.return);break;case 22:if(U.memoizedState!==null){bf(z);continue}}J!==null?(J.return=U,Z=J):bf(z)}$=$.sibling}e:for($=null,z=t;;){if(z.tag===5){if($===null){$=z;try{u=z.stateNode,T?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(v=z.stateNode,S=z.memoizedProps.style,g=S!=null&&S.hasOwnProperty("display")?S.display:null,v.style.display=od("display",g))}catch(te){Je(t,t.return,te)}}}else if(z.tag===6){if($===null)try{z.stateNode.nodeValue=T?"":z.memoizedProps}catch(te){Je(t,t.return,te)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===t)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;$===z&&($=null),z=z.return}$===z&&($=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Xt(r,t),cn(t),a&4&&Ef(t);break;case 21:break;default:Xt(r,t),cn(t)}}function cn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Sf(o)){var a=o;break e}o=o.return}throw Error(n(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(js(u,""),a.flags&=-33);var f=Cf(t);uc(t,f,u);break;case 3:case 4:var g=a.stateNode.containerInfo,v=Cf(t);cc(t,v,g);break;default:throw Error(n(161))}}catch(S){Je(t,t.return,S)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function yv(t,r,o){Z=t,If(t)}function If(t,r,o){for(var a=(t.mode&1)!==0;Z!==null;){var u=Z,f=u.child;if(u.tag===22&&a){var g=u.memoizedState!==null||Lo;if(!g){var v=u.alternate,S=v!==null&&v.memoizedState!==null||vt;v=Lo;var T=vt;if(Lo=g,(vt=S)&&!T)for(Z=u;Z!==null;)g=Z,S=g.child,g.tag===22&&g.memoizedState!==null?Rf(u):S!==null?(S.return=g,Z=S):Rf(u);for(;f!==null;)Z=f,If(f),f=f.sibling;Z=u,Lo=v,vt=T}Tf(t)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,Z=f):Tf(t)}}function Tf(t){for(;Z!==null;){var r=Z;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:vt||Do(5,r);break;case 1:var a=r.stateNode;if(r.flags&4&&!vt)if(o===null)a.componentDidMount();else{var u=r.elementType===r.type?o.memoizedProps:Qt(r.type,o.memoizedProps);a.componentDidUpdate(u,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&Th(r,f,a);break;case 3:var g=r.updateQueue;if(g!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Th(r,g,o)}break;case 5:var v=r.stateNode;if(o===null&&r.flags&4){o=v;var S=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&o.focus();break;case"img":S.src&&(o.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var T=r.alternate;if(T!==null){var $=T.memoizedState;if($!==null){var z=$.dehydrated;z!==null&&Ws(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}vt||r.flags&512&&ac(r)}catch(U){Je(r,r.return,U)}}if(r===t){Z=null;break}if(o=r.sibling,o!==null){o.return=r.return,Z=o;break}Z=r.return}}function bf(t){for(;Z!==null;){var r=Z;if(r===t){Z=null;break}var o=r.sibling;if(o!==null){o.return=r.return,Z=o;break}Z=r.return}}function Rf(t){for(;Z!==null;){var r=Z;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Do(4,r)}catch(S){Je(r,o,S)}break;case 1:var a=r.stateNode;if(typeof a.componentDidMount=="function"){var u=r.return;try{a.componentDidMount()}catch(S){Je(r,u,S)}}var f=r.return;try{ac(r)}catch(S){Je(r,f,S)}break;case 5:var g=r.return;try{ac(r)}catch(S){Je(r,g,S)}}}catch(S){Je(r,r.return,S)}if(r===t){Z=null;break}var v=r.sibling;if(v!==null){v.return=r.return,Z=v;break}Z=r.return}}var vv=Math.ceil,Mo=pe.ReactCurrentDispatcher,dc=pe.ReactCurrentOwner,Wt=pe.ReactCurrentBatchConfig,je=0,ot=null,tt=null,ht=0,Mt=0,os=Fn(0),rt=0,hi=null,xr=0,Uo=0,hc=0,fi=null,bt=null,fc=0,ls=1/0,Sn=null,Fo=!1,pc=null,Vn=null,$o=!1,Kn=null,zo=0,pi=0,mc=null,Bo=-1,Wo=0;function Ct(){return(je&6)!==0?Ze():Bo!==-1?Bo:Bo=Ze()}function Gn(t){return(t.mode&1)===0?1:(je&2)!==0&&ht!==0?ht&-ht:tv.transition!==null?(Wo===0&&(Wo=Sd()),Wo):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Pd(t.type)),t)}function Zt(t,r,o,a){if(50<pi)throw pi=0,mc=null,Error(n(185));Us(t,o,a),((je&2)===0||t!==ot)&&(t===ot&&((je&2)===0&&(Uo|=o),rt===4&&qn(t,ht)),Rt(t,a),o===1&&je===0&&(r.mode&1)===0&&(ls=Ze()+500,yo&&zn()))}function Rt(t,r){var o=t.callbackNode;t0(t,r);var a=Ji(t,t===ot?ht:0);if(a===0)o!==null&&_d(o),t.callbackNode=null,t.callbackPriority=0;else if(r=a&-a,t.callbackPriority!==r){if(o!=null&&_d(o),r===1)t.tag===0?ev(jf.bind(null,t)):gh(jf.bind(null,t)),Q0(function(){(je&6)===0&&zn()}),o=null;else{switch(Cd(a)){case 1:o=ql;break;case 4:o=xd;break;case 16:o=Gi;break;case 536870912:o=wd;break;default:o=Gi}o=$f(o,Pf.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Pf(t,r){if(Bo=-1,Wo=0,(je&6)!==0)throw Error(n(327));var o=t.callbackNode;if(as()&&t.callbackNode!==o)return null;var a=Ji(t,t===ot?ht:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||r)r=Ho(t,a);else{r=a;var u=je;je|=2;var f=Of();(ot!==t||ht!==r)&&(Sn=null,ls=Ze()+500,Sr(t,r));do try{wv();break}catch(v){Af(t,v)}while(!0);Aa(),Mo.current=f,je=u,tt!==null?r=0:(ot=null,ht=0,r=rt)}if(r!==0){if(r===2&&(u=Yl(t),u!==0&&(a=u,r=gc(t,u))),r===1)throw o=hi,Sr(t,0),qn(t,a),Rt(t,Ze()),o;if(r===6)qn(t,a);else{if(u=t.current.alternate,(a&30)===0&&!_v(u)&&(r=Ho(t,a),r===2&&(f=Yl(t),f!==0&&(a=f,r=gc(t,f))),r===1))throw o=hi,Sr(t,0),qn(t,a),Rt(t,Ze()),o;switch(t.finishedWork=u,t.finishedLanes=a,r){case 0:case 1:throw Error(n(345));case 2:Cr(t,bt,Sn);break;case 3:if(qn(t,a),(a&130023424)===a&&(r=fc+500-Ze(),10<r)){if(Ji(t,0)!==0)break;if(u=t.suspendedLanes,(u&a)!==a){Ct(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=Sa(Cr.bind(null,t,bt,Sn),r);break}Cr(t,bt,Sn);break;case 4:if(qn(t,a),(a&4194240)===a)break;for(r=t.eventTimes,u=-1;0<a;){var g=31-Gt(a);f=1<<g,g=r[g],g>u&&(u=g),a&=~f}if(a=u,a=Ze()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*vv(a/1960))-a,10<a){t.timeoutHandle=Sa(Cr.bind(null,t,bt,Sn),a);break}Cr(t,bt,Sn);break;case 5:Cr(t,bt,Sn);break;default:throw Error(n(329))}}}return Rt(t,Ze()),t.callbackNode===o?Pf.bind(null,t):null}function gc(t,r){var o=fi;return t.current.memoizedState.isDehydrated&&(Sr(t,r).flags|=256),t=Ho(t,r),t!==2&&(r=bt,bt=o,r!==null&&yc(r)),t}function yc(t){bt===null?bt=t:bt.push.apply(bt,t)}function _v(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var u=o[a],f=u.getSnapshot;u=u.value;try{if(!qt(f(),u))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qn(t,r){for(r&=~hc,r&=~Uo,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Gt(r),a=1<<o;t[o]=-1,r&=~a}}function jf(t){if((je&6)!==0)throw Error(n(327));as();var r=Ji(t,0);if((r&1)===0)return Rt(t,Ze()),null;var o=Ho(t,r);if(t.tag!==0&&o===2){var a=Yl(t);a!==0&&(r=a,o=gc(t,a))}if(o===1)throw o=hi,Sr(t,0),qn(t,r),Rt(t,Ze()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Cr(t,bt,Sn),Rt(t,Ze()),null}function vc(t,r){var o=je;je|=1;try{return t(r)}finally{je=o,je===0&&(ls=Ze()+500,yo&&zn())}}function wr(t){Kn!==null&&Kn.tag===0&&(je&6)===0&&as();var r=je;je|=1;var o=Wt.transition,a=Le;try{if(Wt.transition=null,Le=1,t)return t()}finally{Le=a,Wt.transition=o,je=r,(je&6)===0&&zn()}}function _c(){Mt=os.current,We(os)}function Sr(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Y0(o)),tt!==null)for(o=tt.return;o!==null;){var a=o;switch(Ta(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&mo();break;case 3:rs(),We(kt),We(mt),za();break;case 5:Fa(a);break;case 4:rs();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Oa(a.type._context);break;case 22:case 23:_c()}o=o.return}if(ot=t,tt=t=Yn(t.current,null),ht=Mt=r,rt=0,hi=null,hc=Uo=xr=0,bt=fi=null,yr!==null){for(r=0;r<yr.length;r++)if(o=yr[r],a=o.interleaved,a!==null){o.interleaved=null;var u=a.next,f=o.pending;if(f!==null){var g=f.next;f.next=u,a.next=g}o.pending=a}yr=null}return t}function Af(t,r){do{var o=tt;try{if(Aa(),Io.current=Po,To){for(var a=Qe.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}To=!1}if(_r=0,it=nt=Qe=null,oi=!1,li=0,dc.current=null,o===null||o.return===null){rt=1,hi=r,tt=null;break}e:{var f=t,g=o.return,v=o,S=r;if(r=ht,v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var T=S,$=v,z=$.tag;if(($.mode&1)===0&&(z===0||z===11||z===15)){var U=$.alternate;U?($.updateQueue=U.updateQueue,$.memoizedState=U.memoizedState,$.lanes=U.lanes):($.updateQueue=null,$.memoizedState=null)}var J=rf(g);if(J!==null){J.flags&=-257,sf(J,g,v,f,r),J.mode&1&&nf(f,T,r),r=J,S=T;var ee=r.updateQueue;if(ee===null){var te=new Set;te.add(S),r.updateQueue=te}else ee.add(S);break e}else{if((r&1)===0){nf(f,T,r),xc();break e}S=Error(n(426))}}else if(qe&&v.mode&1){var et=rf(g);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),sf(et,g,v,f,r),Pa(ss(S,v));break e}}f=S=ss(S,v),rt!==4&&(rt=2),fi===null?fi=[f]:fi.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var k=ef(f,S,r);Ih(f,k);break e;case 1:v=S;var C=f.type,I=f.stateNode;if((f.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Vn===null||!Vn.has(I)))){f.flags|=65536,r&=-r,f.lanes|=r;var B=tf(f,v,r);Ih(f,B);break e}}f=f.return}while(f!==null)}Df(o)}catch(re){r=re,tt===o&&o!==null&&(tt=o=o.return);continue}break}while(!0)}function Of(){var t=Mo.current;return Mo.current=Po,t===null?Po:t}function xc(){(rt===0||rt===3||rt===2)&&(rt=4),ot===null||(xr&268435455)===0&&(Uo&268435455)===0||qn(ot,ht)}function Ho(t,r){var o=je;je|=2;var a=Of();(ot!==t||ht!==r)&&(Sn=null,Sr(t,r));do try{xv();break}catch(u){Af(t,u)}while(!0);if(Aa(),je=o,Mo.current=a,tt!==null)throw Error(n(261));return ot=null,ht=0,rt}function xv(){for(;tt!==null;)Lf(tt)}function wv(){for(;tt!==null&&!Ky();)Lf(tt)}function Lf(t){var r=Ff(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,r===null?Df(t):tt=r,dc.current=null}function Df(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=fv(o,r,Mt),o!==null){tt=o;return}}else{if(o=pv(o,r),o!==null){o.flags&=32767,tt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,tt=null;return}}if(r=r.sibling,r!==null){tt=r;return}tt=r=t}while(r!==null);rt===0&&(rt=5)}function Cr(t,r,o){var a=Le,u=Wt.transition;try{Wt.transition=null,Le=1,Sv(t,r,o,a)}finally{Wt.transition=u,Le=a}return null}function Sv(t,r,o,a){do as();while(Kn!==null);if((je&6)!==0)throw Error(n(327));o=t.finishedWork;var u=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=o.lanes|o.childLanes;if(n0(t,f),t===ot&&(tt=ot=null,ht=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||$o||($o=!0,$f(Gi,function(){return as(),null})),f=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||f){f=Wt.transition,Wt.transition=null;var g=Le;Le=1;var v=je;je|=4,dc.current=null,gv(t,o),kf(o,t),B0(xa),eo=!!_a,xa=_a=null,t.current=o,yv(o),Gy(),je=v,Le=g,Wt.transition=f}else t.current=o;if($o&&($o=!1,Kn=t,zo=u),f=t.pendingLanes,f===0&&(Vn=null),Qy(o.stateNode),Rt(t,Ze()),r!==null)for(a=t.onRecoverableError,o=0;o<r.length;o++)u=r[o],a(u.value,{componentStack:u.stack,digest:u.digest});if(Fo)throw Fo=!1,t=pc,pc=null,t;return(zo&1)!==0&&t.tag!==0&&as(),f=t.pendingLanes,(f&1)!==0?t===mc?pi++:(pi=0,mc=t):pi=0,zn(),null}function as(){if(Kn!==null){var t=Cd(zo),r=Wt.transition,o=Le;try{if(Wt.transition=null,Le=16>t?16:t,Kn===null)var a=!1;else{if(t=Kn,Kn=null,zo=0,(je&6)!==0)throw Error(n(331));var u=je;for(je|=4,Z=t.current;Z!==null;){var f=Z,g=f.child;if((Z.flags&16)!==0){var v=f.deletions;if(v!==null){for(var S=0;S<v.length;S++){var T=v[S];for(Z=T;Z!==null;){var $=Z;switch($.tag){case 0:case 11:case 15:di(8,$,f)}var z=$.child;if(z!==null)z.return=$,Z=z;else for(;Z!==null;){$=Z;var U=$.sibling,J=$.return;if(wf($),$===T){Z=null;break}if(U!==null){U.return=J,Z=U;break}Z=J}}}var ee=f.alternate;if(ee!==null){var te=ee.child;if(te!==null){ee.child=null;do{var et=te.sibling;te.sibling=null,te=et}while(te!==null)}}Z=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Z=g;else e:for(;Z!==null;){if(f=Z,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:di(9,f,f.return)}var k=f.sibling;if(k!==null){k.return=f.return,Z=k;break e}Z=f.return}}var C=t.current;for(Z=C;Z!==null;){g=Z;var I=g.child;if((g.subtreeFlags&2064)!==0&&I!==null)I.return=g,Z=I;else e:for(g=C;Z!==null;){if(v=Z,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:Do(9,v)}}catch(re){Je(v,v.return,re)}if(v===g){Z=null;break e}var B=v.sibling;if(B!==null){B.return=v.return,Z=B;break e}Z=v.return}}if(je=u,zn(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(qi,t)}catch{}a=!0}return a}finally{Le=o,Wt.transition=r}}return!1}function Mf(t,r,o){r=ss(o,r),r=ef(t,r,1),t=Wn(t,r,1),r=Ct(),t!==null&&(Us(t,1,r),Rt(t,r))}function Je(t,r,o){if(t.tag===3)Mf(t,t,o);else for(;r!==null;){if(r.tag===3){Mf(r,t,o);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Vn===null||!Vn.has(a))){t=ss(o,t),t=tf(r,t,1),r=Wn(r,t,1),t=Ct(),r!==null&&(Us(r,1,t),Rt(r,t));break}}r=r.return}}function Cv(t,r,o){var a=t.pingCache;a!==null&&a.delete(r),r=Ct(),t.pingedLanes|=t.suspendedLanes&o,ot===t&&(ht&o)===o&&(rt===4||rt===3&&(ht&130023424)===ht&&500>Ze()-fc?Sr(t,0):hc|=o),Rt(t,r)}function Uf(t,r){r===0&&((t.mode&1)===0?r=1:(r=Qi,Qi<<=1,(Qi&130023424)===0&&(Qi=4194304)));var o=Ct();t=_n(t,r),t!==null&&(Us(t,r,o),Rt(t,o))}function Nv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Uf(t,o)}function Ev(t,r){var o=0;switch(t.tag){case 13:var a=t.stateNode,u=t.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(r),Uf(t,o)}var Ff;Ff=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||kt.current)Tt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Tt=!1,hv(t,r,o);Tt=(t.flags&131072)!==0}else Tt=!1,qe&&(r.flags&1048576)!==0&&yh(r,_o,r.index);switch(r.lanes=0,r.tag){case 2:var a=r.type;Oo(t,r),t=r.pendingProps;var u=Qr(r,mt.current);ns(r,o),u=Ha(null,r,a,t,u,o);var f=Va();return r.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,It(a)?(f=!0,go(r)):f=!1,r.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Ma(r),u.updater=jo,r.stateNode=u,u._reactInternals=r,Ja(r,a,t,o),r=tc(null,r,a,!0,f,o)):(r.tag=0,qe&&f&&Ia(r),St(null,r,u,o),r=r.child),r;case 16:a=r.elementType;e:{switch(Oo(t,r),t=r.pendingProps,u=a._init,a=u(a._payload),r.type=a,u=r.tag=Iv(a),t=Qt(a,t),u){case 0:r=ec(null,r,a,t,o);break e;case 1:r=df(null,r,a,t,o);break e;case 11:r=of(null,r,a,t,o);break e;case 14:r=lf(null,r,a,Qt(a.type,t),o);break e}throw Error(n(306,a,""))}return r;case 0:return a=r.type,u=r.pendingProps,u=r.elementType===a?u:Qt(a,u),ec(t,r,a,u,o);case 1:return a=r.type,u=r.pendingProps,u=r.elementType===a?u:Qt(a,u),df(t,r,a,u,o);case 3:e:{if(hf(r),t===null)throw Error(n(387));a=r.pendingProps,f=r.memoizedState,u=f.element,kh(t,r),Eo(r,a,null,o);var g=r.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){u=ss(Error(n(423)),r),r=ff(t,r,a,o,u);break e}else if(a!==u){u=ss(Error(n(424)),r),r=ff(t,r,a,o,u);break e}else for(Dt=Un(r.stateNode.containerInfo.firstChild),Lt=r,qe=!0,Yt=null,o=Nh(r,null,a,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Zr(),a===u){r=wn(t,r,o);break e}St(t,r,a,o)}r=r.child}return r;case 5:return bh(r),t===null&&Ra(r),a=r.type,u=r.pendingProps,f=t!==null?t.memoizedProps:null,g=u.children,wa(a,u)?g=null:f!==null&&wa(a,f)&&(r.flags|=32),uf(t,r),St(t,r,g,o),r.child;case 6:return t===null&&Ra(r),null;case 13:return pf(t,r,o);case 4:return Ua(r,r.stateNode.containerInfo),a=r.pendingProps,t===null?r.child=es(r,null,a,o):St(t,r,a,o),r.child;case 11:return a=r.type,u=r.pendingProps,u=r.elementType===a?u:Qt(a,u),of(t,r,a,u,o);case 7:return St(t,r,r.pendingProps,o),r.child;case 8:return St(t,r,r.pendingProps.children,o),r.child;case 12:return St(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(a=r.type._context,u=r.pendingProps,f=r.memoizedProps,g=u.value,$e(So,a._currentValue),a._currentValue=g,f!==null)if(qt(f.value,g)){if(f.children===u.children&&!kt.current){r=wn(t,r,o);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var v=f.dependencies;if(v!==null){g=f.child;for(var S=v.firstContext;S!==null;){if(S.context===a){if(f.tag===1){S=xn(-1,o&-o),S.tag=2;var T=f.updateQueue;if(T!==null){T=T.shared;var $=T.pending;$===null?S.next=S:(S.next=$.next,$.next=S),T.pending=S}}f.lanes|=o,S=f.alternate,S!==null&&(S.lanes|=o),La(f.return,o,r),v.lanes|=o;break}S=S.next}}else if(f.tag===10)g=f.type===r.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(n(341));g.lanes|=o,v=g.alternate,v!==null&&(v.lanes|=o),La(g,o,r),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===r){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}St(t,r,u.children,o),r=r.child}return r;case 9:return u=r.type,a=r.pendingProps.children,ns(r,o),u=zt(u),a=a(u),r.flags|=1,St(t,r,a,o),r.child;case 14:return a=r.type,u=Qt(a,r.pendingProps),u=Qt(a.type,u),lf(t,r,a,u,o);case 15:return af(t,r,r.type,r.pendingProps,o);case 17:return a=r.type,u=r.pendingProps,u=r.elementType===a?u:Qt(a,u),Oo(t,r),r.tag=1,It(a)?(t=!0,go(r)):t=!1,ns(r,o),Xh(r,a,u),Ja(r,a,u,o),tc(null,r,a,!0,t,o);case 19:return gf(t,r,o);case 22:return cf(t,r,o)}throw Error(n(156,r.tag))};function $f(t,r){return vd(t,r)}function kv(t,r,o,a){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,r,o,a){return new kv(t,r,o,a)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Iv(t){if(typeof t=="function")return wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Me)return 11;if(t===Se)return 14}return 2}function Yn(t,r){var o=t.alternate;return o===null?(o=Ht(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Vo(t,r,o,a,u,f){var g=2;if(a=t,typeof t=="function")wc(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case ye:return Nr(o.children,u,f,r);case De:g=8,u|=8;break;case ze:return t=Ht(12,o,r,u|2),t.elementType=ze,t.lanes=f,t;case O:return t=Ht(13,o,r,u),t.elementType=O,t.lanes=f,t;case se:return t=Ht(19,o,r,u),t.elementType=se,t.lanes=f,t;case X:return Ko(o,u,f,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:g=10;break e;case Ge:g=9;break e;case Me:g=11;break e;case Se:g=14;break e;case K:g=16,a=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=Ht(g,o,r,u),r.elementType=t,r.type=a,r.lanes=f,r}function Nr(t,r,o,a){return t=Ht(7,t,a,r),t.lanes=o,t}function Ko(t,r,o,a){return t=Ht(22,t,a,r),t.elementType=X,t.lanes=o,t.stateNode={isHidden:!1},t}function Sc(t,r,o){return t=Ht(6,t,null,r),t.lanes=o,t}function Cc(t,r,o){return r=Ht(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Tv(t,r,o,a,u){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Nc(t,r,o,a,u,f,g,v,S){return t=new Tv(t,r,o,v,S),r===1?(r=1,f===!0&&(r|=8)):r=0,f=Ht(3,null,null,r),t.current=f,f.stateNode=t,f.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(f),t}function bv(t,r,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:a==null?null:""+a,children:t,containerInfo:r,implementation:o}}function zf(t){if(!t)return $n;t=t._reactInternals;e:{if(hr(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(It(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(It(o))return ph(t,o,r)}return r}function Bf(t,r,o,a,u,f,g,v,S){return t=Nc(o,a,!0,t,u,f,g,v,S),t.context=zf(null),o=t.current,a=Ct(),u=Gn(o),f=xn(a,u),f.callback=r??null,Wn(o,f,u),t.current.lanes=u,Us(t,u,a),Rt(t,a),t}function Go(t,r,o,a){var u=r.current,f=Ct(),g=Gn(u);return o=zf(o),r.context===null?r.context=o:r.pendingContext=o,r=xn(f,g),r.payload={element:t},a=a===void 0?null:a,a!==null&&(r.callback=a),t=Wn(u,r,g),t!==null&&(Zt(t,u,g,f),No(t,u,g)),g}function qo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wf(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Ec(t,r){Wf(t,r),(t=t.alternate)&&Wf(t,r)}function Rv(){return null}var Hf=typeof reportError=="function"?reportError:function(t){console.error(t)};function kc(t){this._internalRoot=t}Yo.prototype.render=kc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Go(t,r,null,null)},Yo.prototype.unmount=kc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;wr(function(){Go(null,t,null,null)}),r[mn]=null}};function Yo(t){this._internalRoot=t}Yo.prototype.unstable_scheduleHydration=function(t){if(t){var r=kd();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Ln.length&&r!==0&&r<Ln[o].priority;o++);Ln.splice(o,0,t),o===0&&bd(t)}};function Ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vf(){}function Pv(t,r,o,a,u){if(u){if(typeof a=="function"){var f=a;a=function(){var T=qo(g);f.call(T)}}var g=Bf(r,a,t,0,null,!1,!1,"",Vf);return t._reactRootContainer=g,t[mn]=g.current,Xs(t.nodeType===8?t.parentNode:t),wr(),g}for(;u=t.lastChild;)t.removeChild(u);if(typeof a=="function"){var v=a;a=function(){var T=qo(S);v.call(T)}}var S=Nc(t,0,!1,null,null,!1,!1,"",Vf);return t._reactRootContainer=S,t[mn]=S.current,Xs(t.nodeType===8?t.parentNode:t),wr(function(){Go(r,S,o,a)}),S}function Jo(t,r,o,a,u){var f=o._reactRootContainer;if(f){var g=f;if(typeof u=="function"){var v=u;u=function(){var S=qo(g);v.call(S)}}Go(r,g,t,u)}else g=Pv(o,r,t,u,a);return qo(g)}Nd=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ms(r.pendingLanes);o!==0&&(Jl(r,o|1),Rt(r,Ze()),(je&6)===0&&(ls=Ze()+500,zn()))}break;case 13:wr(function(){var a=_n(t,1);if(a!==null){var u=Ct();Zt(a,t,1,u)}}),Ec(t,1)}},Xl=function(t){if(t.tag===13){var r=_n(t,134217728);if(r!==null){var o=Ct();Zt(r,t,134217728,o)}Ec(t,134217728)}},Ed=function(t){if(t.tag===13){var r=Gn(t),o=_n(t,r);if(o!==null){var a=Ct();Zt(o,t,r,a)}Ec(t,r)}},kd=function(){return Le},Id=function(t,r){var o=Le;try{return Le=t,r()}finally{Le=o}},Hl=function(t,r,o){switch(r){case"input":if(_e(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var a=o[r];if(a!==t&&a.form===t.form){var u=po(a);if(!u)throw Error(n(90));le(a),_e(a,u)}}}break;case"textarea":nd(t,o);break;case"select":r=o.value,r!=null&&pt(t,!!o.multiple,r,!1)}},dd=vc,hd=wr;var jv={usingClientEntryPoint:!1,Events:[ti,qr,po,cd,ud,vc]},mi={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Av={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gd(t),t===null?null:t.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||Rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{qi=Xo.inject(Av),sn=Xo}catch{}}return Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jv,Pt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ic(r))throw Error(n(200));return bv(t,r,null,o)},Pt.createRoot=function(t,r){if(!Ic(t))throw Error(n(299));var o=!1,a="",u=Hf;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),r=Nc(t,1,!1,null,null,o,!1,a,u),t[mn]=r.current,Xs(t.nodeType===8?t.parentNode:t),new kc(r)},Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=gd(r),t=t===null?null:t.stateNode,t},Pt.flushSync=function(t){return wr(t)},Pt.hydrate=function(t,r,o){if(!Qo(r))throw Error(n(200));return Jo(null,t,r,!0,o)},Pt.hydrateRoot=function(t,r,o){if(!Ic(t))throw Error(n(405));var a=o!=null&&o.hydratedSources||null,u=!1,f="",g=Hf;if(o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),r=Bf(r,null,t,1,o??null,u,!1,f,g),t[mn]=r.current,Xs(t),a)for(t=0;t<a.length;t++)o=a[t],u=o._getVersion,u=u(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,u]:r.mutableSourceEagerHydrationData.push(o,u);return new Yo(r)},Pt.render=function(t,r,o){if(!Qo(r))throw Error(n(200));return Jo(null,t,r,!1,o)},Pt.unmountComponentAtNode=function(t){if(!Qo(t))throw Error(n(40));return t._reactRootContainer?(wr(function(){Jo(null,null,t,!1,function(){t._reactRootContainer=null,t[mn]=null})}),!0):!1},Pt.unstable_batchedUpdates=vc,Pt.unstable_renderSubtreeIntoContainer=function(t,r,o,a){if(!Qo(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Jo(t,r,o,!1,a)},Pt.version="18.3.1-next-f1338f8080-20240426",Pt}var Zf;function xm(){if(Zf)return Rc.exports;Zf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rc.exports=Bv(),Rc.exports}var ep;function Wv(){if(ep)return Zo;ep=1;var s=xm();return Zo.createRoot=s.createRoot,Zo.hydrateRoot=s.hydrateRoot,Zo}var Hv=Wv();const Vv=vm(Hv);xm();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ii(){return Ii=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Ii.apply(this,arguments)}var rr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(rr||(rr={}));const tp="popstate";function Kv(s){s===void 0&&(s={});function e(i,l){let{pathname:c,search:h,hash:p}=i.location;return qc("",{pathname:c,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:Sm(l)}return qv(e,n,null,s)}function st(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function wm(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gv(){return Math.random().toString(36).substr(2,8)}function np(s,e){return{usr:s.state,key:s.key,idx:e}}function qc(s,e,n,i){return n===void 0&&(n=null),Ii({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Cs(e):e,{state:n,key:e&&e.key||i||Gv()})}function Sm(s){let{pathname:e="/",search:n="",hash:i=""}=s;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Cs(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substr(n),s=s.substr(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substr(i),s=s.substr(0,i)),s&&(e.pathname=s)}return e}function qv(s,e,n,i){i===void 0&&(i={});let{window:l=document.defaultView,v5Compat:c=!1}=i,h=l.history,p=rr.Pop,m=null,y=w();y==null&&(y=0,h.replaceState(Ii({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function _(){p=rr.Pop;let b=w(),V=b==null?null:b-y;y=b,m&&m({action:p,location:H.location,delta:V})}function x(b,V){p=rr.Push;let Q=qc(H.location,b,V);y=w()+1;let ce=np(Q,y),pe=H.createHref(Q);try{h.pushState(ce,"",pe)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;l.location.assign(pe)}c&&m&&m({action:p,location:H.location,delta:1})}function R(b,V){p=rr.Replace;let Q=qc(H.location,b,V);y=w();let ce=np(Q,y),pe=H.createHref(Q);h.replaceState(ce,"",pe),c&&m&&m({action:p,location:H.location,delta:0})}function F(b){let V=l.location.origin!=="null"?l.location.origin:l.location.href,Q=typeof b=="string"?b:Sm(b);return Q=Q.replace(/ $/,"%20"),st(V,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,V)}let H={get action(){return p},get location(){return s(l,h)},listen(b){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(tp,_),m=b,()=>{l.removeEventListener(tp,_),m=null}},createHref(b){return e(l,b)},createURL:F,encodeLocation(b){let V=F(b);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:x,replace:R,go(b){return h.go(b)}};return H}var rp;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(rp||(rp={}));function Yv(s,e,n){return n===void 0&&(n="/"),Qv(s,e,n)}function Qv(s,e,n,i){let l=typeof e=="string"?Cs(e):e,c=Em(l.pathname||"/",n);if(c==null)return null;let h=Cm(s);Jv(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let y=c_(c);p=o_(h[m],y)}return p}function Cm(s,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let l=(c,h,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(st(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let y=Tr([i,m.relativePath]),w=n.concat(m);c.children&&c.children.length>0&&(st(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Cm(c.children,e,w,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:s_(y,c.index),routesMeta:w})};return s.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,h);else for(let m of Nm(c.path))l(c,h,m)}),e}function Nm(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let h=Nm(i.join("/")),p=[];return p.push(...h.map(m=>m===""?c:[c,m].join("/"))),l&&p.push(...h),p.map(m=>s.startsWith("/")&&m===""?"/":m)}function Jv(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:i_(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Xv=/^:[\w-]+$/,Zv=3,e_=2,t_=1,n_=10,r_=-2,sp=s=>s==="*";function s_(s,e){let n=s.split("/"),i=n.length;return n.some(sp)&&(i+=r_),e&&(i+=e_),n.filter(l=>!sp(l)).reduce((l,c)=>l+(Xv.test(c)?Zv:c===""?t_:n_),i)}function i_(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function o_(s,e,n){let{routesMeta:i}=s,l={},c="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],y=p===i.length-1,w=c==="/"?e:e.slice(c.length)||"/",_=l_({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},w),x=m.route;if(!_)return null;Object.assign(l,_.params),h.push({params:l,pathname:Tr([c,_.pathname]),pathnameBase:m_(Tr([c,_.pathnameBase])),route:x}),_.pathnameBase!=="/"&&(c=Tr([c,_.pathnameBase]))}return h}function l_(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=a_(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,w,_)=>{let{paramName:x,isOptional:R}=w;if(x==="*"){let H=p[_]||"";h=c.slice(0,c.length-H.length).replace(/(.)\/+$/,"$1")}const F=p[_];return R&&!F?y[x]=void 0:y[x]=(F||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:s}}function a_(s,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wm(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function c_(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wm(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function Em(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}function u_(s,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Cs(s):s;return{pathname:n?n.startsWith("/")?n:d_(n,e):e,search:g_(i),hash:y_(l)}}function d_(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Ac(s,e,n,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function h_(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function f_(s,e){let n=h_(s);return e?n.map((i,l)=>l===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function p_(s,e,n,i){i===void 0&&(i=!1);let l;typeof s=="string"?l=Cs(s):(l=Ii({},s),st(!l.pathname||!l.pathname.includes("?"),Ac("?","pathname","search",l)),st(!l.pathname||!l.pathname.includes("#"),Ac("#","pathname","hash",l)),st(!l.search||!l.search.includes("#"),Ac("#","search","hash",l)));let c=s===""||l.pathname==="",h=c?"/":l.pathname,p;if(h==null)p=n;else{let _=e.length-1;if(!i&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),_-=1;l.pathname=x.join("/")}p=_>=0?e[_]:"/"}let m=u_(l,p),y=h&&h!=="/"&&h.endsWith("/"),w=(c||h===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(y||w)&&(m.pathname+="/"),m}const Tr=s=>s.join("/").replace(/\/\/+/g,"/"),m_=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),g_=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,y_=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function v_(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const km=["post","put","patch","delete"];new Set(km);const __=["get",...km];new Set(__);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ti(){return Ti=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Ti.apply(this,arguments)}const vu=P.createContext(null),x_=P.createContext(null),kl=P.createContext(null),Il=P.createContext(null),Dr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Im=P.createContext(null);function Tl(){return P.useContext(Il)!=null}function bl(){return Tl()||st(!1),P.useContext(Il).location}function Tm(s){P.useContext(kl).static||P.useLayoutEffect(s)}function pn(){let{isDataRoute:s}=P.useContext(Dr);return s?O_():w_()}function w_(){Tl()||st(!1);let s=P.useContext(vu),{basename:e,future:n,navigator:i}=P.useContext(kl),{matches:l}=P.useContext(Dr),{pathname:c}=bl(),h=JSON.stringify(f_(l,n.v7_relativeSplatPath)),p=P.useRef(!1);return Tm(()=>{p.current=!0}),P.useCallback(function(y,w){if(w===void 0&&(w={}),!p.current)return;if(typeof y=="number"){i.go(y);return}let _=p_(y,JSON.parse(h),c,w.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Tr([e,_.pathname])),(w.replace?i.replace:i.push)(_,w.state,w)},[e,i,h,c,s])}function S_(){let{matches:s}=P.useContext(Dr),e=s[s.length-1];return e?e.params:{}}function C_(s,e){return N_(s,e)}function N_(s,e,n,i){Tl()||st(!1);let{navigator:l}=P.useContext(kl),{matches:c}=P.useContext(Dr),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let y=bl(),w;if(e){var _;let b=typeof e=="string"?Cs(e):e;m==="/"||(_=b.pathname)!=null&&_.startsWith(m)||st(!1),w=b}else w=y;let x=w.pathname||"/",R=x;if(m!=="/"){let b=m.replace(/^\//,"").split("/");R="/"+x.replace(/^\//,"").split("/").slice(b.length).join("/")}let F=Yv(s,{pathname:R}),H=b_(F&&F.map(b=>Object.assign({},b,{params:Object.assign({},p,b.params),pathname:Tr([m,l.encodeLocation?l.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?m:Tr([m,l.encodeLocation?l.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),c,n,i);return e&&H?P.createElement(Il.Provider,{value:{location:Ti({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:rr.Pop}},H):H}function E_(){let s=A_(),e=v_(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:l},n):null,null)}const k_=P.createElement(E_,null);class I_ extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Dr.Provider,{value:this.props.routeContext},P.createElement(Im.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T_(s){let{routeContext:e,match:n,children:i}=s,l=P.useContext(vu);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Dr.Provider,{value:e},i)}function b_(s,e,n,i){var l;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),s==null){var c;if(!n)return null;if(n.errors)s=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let h=s,p=(l=n)==null?void 0:l.errors;if(p!=null){let w=h.findIndex(_=>_.route.id&&p?.[_.route.id]!==void 0);w>=0||st(!1),h=h.slice(0,Math.min(h.length,w+1))}let m=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let w=0;w<h.length;w++){let _=h[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(y=w),_.route.id){let{loaderData:x,errors:R}=n,F=_.route.loader&&x[_.route.id]===void 0&&(!R||R[_.route.id]===void 0);if(_.route.lazy||F){m=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,_,x)=>{let R,F=!1,H=null,b=null;n&&(R=p&&_.route.id?p[_.route.id]:void 0,H=_.route.errorElement||k_,m&&(y<0&&x===0?(L_("route-fallback"),F=!0,b=null):y===x&&(F=!0,b=_.route.hydrateFallbackElement||null)));let V=e.concat(h.slice(0,x+1)),Q=()=>{let ce;return R?ce=H:F?ce=b:_.route.Component?ce=P.createElement(_.route.Component,null):_.route.element?ce=_.route.element:ce=w,P.createElement(T_,{match:_,routeContext:{outlet:w,matches:V,isDataRoute:n!=null},children:ce})};return n&&(_.route.ErrorBoundary||_.route.errorElement||x===0)?P.createElement(I_,{location:n.location,revalidation:n.revalidation,component:H,error:R,children:Q(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):Q()},null)}var bm=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(bm||{}),Rm=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(Rm||{});function R_(s){let e=P.useContext(vu);return e||st(!1),e}function P_(s){let e=P.useContext(x_);return e||st(!1),e}function j_(s){let e=P.useContext(Dr);return e||st(!1),e}function Pm(s){let e=j_(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function A_(){var s;let e=P.useContext(Im),n=P_(),i=Pm();return e!==void 0?e:(s=n.errors)==null?void 0:s[i]}function O_(){let{router:s}=R_(bm.UseNavigateStable),e=Pm(Rm.UseNavigateStable),n=P.useRef(!1);return Tm(()=>{n.current=!0}),P.useCallback(function(l,c){c===void 0&&(c={}),n.current&&(typeof l=="number"?s.navigate(l):s.navigate(l,Ti({fromRouteId:e},c)))},[s,e])}const ip={};function L_(s,e,n){ip[s]||(ip[s]=!0)}function D_(s,e){s?.v7_startTransition,s?.v7_relativeSplatPath}function Xn(s){st(!1)}function M_(s){let{basename:e="/",children:n=null,location:i,navigationType:l=rr.Pop,navigator:c,static:h=!1,future:p}=s;Tl()&&st(!1);let m=e.replace(/^\/*/,"/"),y=P.useMemo(()=>({basename:m,navigator:c,static:h,future:Ti({v7_relativeSplatPath:!1},p)}),[m,p,c,h]);typeof i=="string"&&(i=Cs(i));let{pathname:w="/",search:_="",hash:x="",state:R=null,key:F="default"}=i,H=P.useMemo(()=>{let b=Em(w,m);return b==null?null:{location:{pathname:b,search:_,hash:x,state:R,key:F},navigationType:l}},[m,w,_,x,R,F,l]);return H==null?null:P.createElement(kl.Provider,{value:y},P.createElement(Il.Provider,{children:n,value:H}))}function U_(s){let{children:e,location:n}=s;return C_(Yc(e),n)}new Promise(()=>{});function Yc(s,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(s,(i,l)=>{if(!P.isValidElement(i))return;let c=[...e,l];if(i.type===P.Fragment){n.push.apply(n,Yc(i.props.children,c));return}i.type!==Xn&&st(!1),!i.props.index||!i.props.children||st(!1);let h={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Yc(i.props.children,c)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const F_="6";try{window.__reactRouterVersion=F_}catch{}const $_="startTransition",op=Fv[$_];function z_(s){let{basename:e,children:n,future:i,window:l}=s,c=P.useRef();c.current==null&&(c.current=Kv({window:l,v5Compat:!0}));let h=c.current,[p,m]=P.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},w=P.useCallback(_=>{y&&op?op(()=>m(_)):m(_)},[m,y]);return P.useLayoutEffect(()=>h.listen(w),[h,w]),P.useEffect(()=>D_(i),[i]),P.createElement(M_,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:h,future:i})}var lp;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(lp||(lp={}));var ap;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(ap||(ap={}));function B_({userName:s,userEmail:e,size:n="sm"}){const[i,l]=P.useState(""),[c,h]=P.useState(!1),[p,m]=P.useState(!1),y=pn();P.useEffect(()=>{const V=localStorage.getItem(`finder_profile_picture_${e}`);V&&l(V);const Q=ce=>{ce.target.closest(".profile-dropdown")||h(!1)};return document.addEventListener("click",Q),()=>document.removeEventListener("click",Q)},[e]);const w=()=>s?s.charAt(0).toUpperCase():"U",_=()=>{switch(n){case"xs":return"w-6 h-6 text-xs";case"sm":return"w-8 h-8 text-sm";case"md":return"w-10 h-10 text-base";case"lg":return"w-12 h-12 text-lg";default:return"w-8 h-8 text-sm"}},x=()=>{const V=["bg-pink-300","bg-purple-300","bg-indigo-300","bg-blue-300","bg-green-300","bg-yellow-300","bg-red-300","bg-gray-300"],Q=(s||e||"").length%V.length;return V[Q]},R=()=>{h(!1),y("/profile")},F=()=>{h(!1),m(!0)},H=()=>{localStorage.removeItem("finder_email"),localStorage.removeItem(`finder_profile_picture_${e}`),window.location.href="/"},b=()=>{m(!1)};return d.jsxs("div",{className:"relative profile-dropdown",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:`${_()} rounded-full cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0 relative group`,onClick:()=>h(!c),title:"",children:[i?d.jsx("img",{src:i,alt:"Profile",className:`${_()} rounded-full object-cover border border-gray-200`}):d.jsx("div",{className:`${_()} ${x()} rounded-full flex items-center justify-center text-gray-700 font-medium border border-gray-200`,children:w()}),d.jsx("div",{className:"absolute top-full mt-2 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Click for options"})]}),d.jsx("span",{className:"font-medium text-gray-700 cursor-pointer hover:text-gray-900 transition-colors",onClick:()=>h(!c),children:s||"User"})]}),c&&d.jsxs("div",{className:"absolute top-full mt-2 right-0 bg-white border border-gray-200 rounded-lg shadow-lg py-2 min-w-[160px] z-50",children:[d.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-3 text-gray-700",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"View Profile"]}),d.jsxs("button",{onClick:F,className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-3 text-red-600",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Confirm Logout"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to logout? You will need to login again to access your account."}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx("button",{onClick:b,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:H,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})]})})]})}class W_{constructor(){this.storageKey="finder_notifications"}getNotifications(e){try{return(JSON.parse(localStorage.getItem(this.storageKey))||{})[e]||[]}catch(n){return console.error("Error getting notifications:",n),[]}}addNotification(e,n){try{const i=JSON.parse(localStorage.getItem(this.storageKey))||{};i[e]||(i[e]=[]);const l={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),read:!1,...n};return i[e].unshift(l),i[e].length>50&&(i[e]=i[e].slice(0,50)),localStorage.setItem(this.storageKey,JSON.stringify(i)),l}catch(i){return console.error("Error adding notification:",i),null}}markAsRead(e,n){try{const i=JSON.parse(localStorage.getItem(this.storageKey))||{};if(i[e]){const l=i[e].find(c=>c.id===n);l&&(l.read=!0,localStorage.setItem(this.storageKey,JSON.stringify(i)))}}catch(i){console.error("Error marking notification as read:",i)}}markAllAsRead(e){try{const n=JSON.parse(localStorage.getItem(this.storageKey))||{};n[e]&&(n[e].forEach(i=>i.read=!0),localStorage.setItem(this.storageKey,JSON.stringify(n)))}catch(n){console.error("Error marking all notifications as read:",n)}}getUnreadCount(e){return this.getNotifications(e).filter(i=>!i.read).length}clearNotifications(e){try{const n=JSON.parse(localStorage.getItem(this.storageKey))||{};n[e]=[],localStorage.setItem(this.storageKey,JSON.stringify(n))}catch(n){console.error("Error clearing notifications:",n)}}notifyOpportunityPoster(e,n,i,l){return this.addNotification(e,{type:"new_application",title:"New Application Received",message:`${n} applied to your opportunity "${i}"`,icon:"",action:"View Applications",actionUrl:`/dashboard?tab=posted&opportunityId=${l}`})}notifyApplicationAccepted(e,n,i){return this.addNotification(e,{type:"application_accepted",title:"Application Accepted!",message:`Congratulations! Your application for "${n}" has been accepted.`,icon:"",action:"View Details",actionUrl:`/dashboard?filter=accepted&tab=applied&opportunityId=${i}`})}notifyApplicationRejected(e,n,i){return this.addNotification(e,{type:"application_rejected",title:"Application Update",message:`Your application for "${n}" was not selected this time.`,icon:"",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${i}`})}notifyOpportunityClosed(e,n,i){return this.addNotification(e,{type:"opportunity_closed",title:"Opportunity Closed",message:`The opportunity "${n}" you applied for has been closed.`,icon:"",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${i}`})}}const jt=new W_;function H_({userEmail:s}){const[e,n]=P.useState([]),[i,l]=P.useState(0),[c,h]=P.useState(!1),p=pn();P.useEffect(()=>{if(s){m();const R=setInterval(m,5e3);return()=>clearInterval(R)}},[s]);const m=()=>{if(!s)return;const R=jt.getNotifications(s),F=jt.getUnreadCount(s);n(R),l(F)},y=R=>{jt.markAsRead(s,R.id),R.actionUrl&&p(R.actionUrl),h(!1),m()},w=()=>{jt.markAllAsRead(s),m()},_=()=>{jt.clearNotifications(s),m(),h(!1)},x=R=>{const F=new Date,H=new Date(R),b=Math.floor((F-H)/(1e3*60));if(b<1)return"Just now";if(b<60)return`${b}m ago`;const V=Math.floor(b/60);return V<24?`${V}h ago`:`${Math.floor(V/24)}d ago`};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>h(!c),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1",children:i>99?"99+":i})]}),c&&d.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border z-50 max-h-96 overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b bg-gray-50",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),d.jsxs("div",{className:"flex gap-2",children:[i>0&&d.jsx("button",{onClick:w,className:"text-sm text-blue-600 hover:text-blue-700",children:"Mark all read"}),d.jsx("button",{onClick:_,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]})]})}),d.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.length===0?d.jsxs("div",{className:"p-6 text-center text-gray-500",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("p",{children:"No notifications yet"})]}):e.map(R=>d.jsx("div",{onClick:()=>y(R),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ${R.read?"":"bg-blue-50 border-l-4 border-l-blue-500"}`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("span",{className:"text-2xl",children:R.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h4",{className:`font-medium text-sm ${R.read?"text-gray-700":"text-gray-900"}`,children:R.title}),d.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:x(R.timestamp)})]}),d.jsx("p",{className:`text-sm mt-1 ${R.read?"text-gray-600":"text-gray-700"}`,children:R.message}),R.action&&d.jsxs("span",{className:"inline-block mt-2 text-xs text-blue-600 font-medium",children:[R.action," "]})]})]})},R.id))})]}),c&&d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)})]})}const Rl="/assets/Logo%20FI-XBWdYX7H.png",V_=()=>{};var cp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(s,e){if(!s)throw Ns(e)},Ns=function(s){return new Error("Firebase Database ("+jm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},K_=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],h=s[n++],p=s[n++],m=((l&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const c=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|h&63)}}return e.join("")},_u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const c=s[l],h=l+1<s.length,p=h?s[l+1]:0,m=l+2<s.length,y=m?s[l+2]:0,w=c>>2,_=(c&3)<<4|p>>4;let x=(p&15)<<2|y>>6,R=y&63;m||(R=64,h||(x=64)),i.push(n[w],n[_],n[x],n[R])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Am(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):K_(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const _=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||y==null||_==null)throw new G_;const x=c<<2|p>>4;if(i.push(x),y!==64){const R=p<<4&240|y>>2;if(i.push(R),_!==64){const F=y<<6&192|_;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class G_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Om=function(s){const e=Am(s);return _u.encodeByteArray(e,!0)},al=function(s){return Om(s).replace(/\./g,"")},cl=function(s){try{return _u.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(s){return Lm(void 0,s)}function Lm(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Y_(n)||(s[n]=Lm(s[n],e[n]));return s}function Y_(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=()=>Q_().__FIREBASE_DEFAULTS__,X_=()=>{if(typeof process>"u"||typeof cp>"u")return;const s=cp.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Z_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&cl(s[1]);return e&&JSON.parse(e)},xu=()=>{try{return V_()||J_()||X_()||Z_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Dm=s=>xu()?.emulatorHosts?.[s],ex=s=>{const e=Dm(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Mm=()=>xu()?.config,Um=s=>xu()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fm(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[al(JSON.stringify(n)),al(JSON.stringify(h)),""].join(".")}const wi={};function nx(){const s={prod:[],emulator:[]};for(const e of Object.keys(wi))wi[e]?s.emulator.push(e):s.prod.push(e);return s}function rx(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let up=!1;function $m(s,e){if(typeof window>"u"||typeof document>"u"||!Es(window.location.host)||wi[s]===e||wi[s]||up)return;wi[s]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",c=nx().prod.length>0;function h(){const x=document.getElementById(i);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,R){x.setAttribute("width","24"),x.setAttribute("id",R),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{up=!0,h()},x}function w(x,R){x.setAttribute("id",R),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=rx(i),R=n("text"),F=document.getElementById(R)||document.createElement("span"),H=n("learnmore"),b=document.getElementById(H)||document.createElement("a"),V=n("preprendIcon"),Q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ce=x.element;p(ce),w(b,H);const pe=y();m(Q,V),ce.append(Q,F,b,pe),document.body.appendChild(ce)}c?(F.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Su(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function sx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ix(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function zm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ox(){const s=Nt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lx(){return jm.NODE_ADMIN===!0}function ax(){try{return typeof indexedDB=="object"}catch{return!1}}function cx(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="FirebaseError";class cr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ux,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oi.prototype.create)}}class Oi{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],h=c?dx(c,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new cr(l,p,i)}}function dx(s,e){return s.replace(hx,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const hx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(s){return JSON.parse(s)}function ft(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=function(s){let e={},n={},i={},l="";try{const c=s.split(".");e=bi(cl(c[0])||""),n=bi(cl(c[1])||""),l=c[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:l}},fx=function(s){const e=Bm(s),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},px=function(s){const e=Bm(s).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function vs(s,e){if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}function Qc(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ul(s,e,n){const i={};for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=e.call(n,s[l],l,s));return i}function Rr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=s[l],h=e[l];if(dp(c)&&dp(h)){if(!Rr(c,h))return!1}else if(c!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function dp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const x=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(x<<1|x>>>31)&4294967295}let l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],p=this.chain_[3],m=this.chain_[4],y,w;for(let _=0;_<80;_++){_<40?_<20?(y=p^c&(h^p),w=1518500249):(y=c^h^p,w=1859775393):_<60?(y=c&h|p&(c|h),w=2400959708):(y=c^h^p,w=3395469782);const x=(l<<5|l>>>27)+y+m+w+i[_]&4294967295;m=p,p=h,h=(c<<30|c>>>2)&4294967295,c=l,l=x}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let l=0;const c=this.buf_;let h=this.inbuf_;for(;l<n;){if(h===0)for(;l<=i;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(c[h]=e.charCodeAt(l),++h,++l,h===this.blockSize){this.compress_(c),h=0;break}}else for(;l<n;)if(c[h]=e[l],++h,++l,h===this.blockSize){this.compress_(c),h=0;break}}this.inbuf_=h,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let l=0;l<5;l++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[l]>>c&255,++i;return e}}function gx(s,e){const n=new yx(s,e);return n.subscribe.bind(n)}class yx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vx(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=Oc),l.error===void 0&&(l.error=Oc),l.complete===void 0&&(l.complete=Oc);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vx(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Oc(){}function _x(s,e){return`${s} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);if(l>=55296&&l<=56319){const c=l-55296;i++,Y(i<s.length,"Surrogate pair missing trail surrogate.");const h=s.charCodeAt(i)-56320;l=65536+(c<<10)+h}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Pl=function(s){let e=0;for(let n=0;n<s.length;n++){const i=s.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(s){return s&&s._delegate?s._delegate:s}class Pr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new wu;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cx(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(s){return s===Er?void 0:s}function Cx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const Ex={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},kx=Ue.INFO,Ix={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Tx=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=Ix[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cu{constructor(e){this.name=e,this._logLevel=kx,this._logHandler=Tx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ex[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const bx=(s,e)=>e.some(n=>s instanceof n);let hp,fp;function Rx(){return hp||(hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Px(){return fp||(fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wm=new WeakMap,Jc=new WeakMap,Hm=new WeakMap,Lc=new WeakMap,Nu=new WeakMap;function jx(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(sr(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Wm.set(n,s)}).catch(()=>{}),Nu.set(e,s),e}function Ax(s){if(Jc.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Jc.set(s,e)}let Xc={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Jc.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Hm.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Ox(s){Xc=s(Xc)}function Lx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Dc(this),e,...n);return Hm.set(i,e.sort?e.sort():[e]),sr(i)}:Px().includes(s)?function(...e){return s.apply(Dc(this),e),sr(Wm.get(this))}:function(...e){return sr(s.apply(Dc(this),e))}}function Dx(s){return typeof s=="function"?Lx(s):(s instanceof IDBTransaction&&Ax(s),bx(s,Rx())?new Proxy(s,Xc):s)}function sr(s){if(s instanceof IDBRequest)return jx(s);if(Lc.has(s))return Lc.get(s);const e=Dx(s);return e!==s&&(Lc.set(s,e),Nu.set(e,s)),e}const Dc=s=>Nu.get(s);function Mx(s,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const h=indexedDB.open(s,e),p=sr(h);return i&&h.addEventListener("upgradeneeded",m=>{i(sr(h.result),m.oldVersion,m.newVersion,sr(h.transaction),m)}),n&&h.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{c&&m.addEventListener("close",()=>c()),l&&m.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Ux=["get","getKey","getAll","getAllKeys","count"],Fx=["put","add","delete","clear"],Mc=new Map;function pp(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Mc.get(e))return Mc.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=Fx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||Ux.includes(n)))return;const c=async function(h,...p){const m=this.transaction(h,l?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&m.done]))[0]};return Mc.set(e,c),c}Ox(s=>({...s,get:(e,n,i)=>pp(e,n)||s.get(e,n,i),has:(e,n)=>!!pp(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zx(s){return s.getComponent()?.type==="VERSION"}const Zc="@firebase/app",mp="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Cu("@firebase/app"),Bx="@firebase/app-compat",Wx="@firebase/analytics-compat",Hx="@firebase/analytics",Vx="@firebase/app-check-compat",Kx="@firebase/app-check",Gx="@firebase/auth",qx="@firebase/auth-compat",Yx="@firebase/database",Qx="@firebase/data-connect",Jx="@firebase/database-compat",Xx="@firebase/functions",Zx="@firebase/functions-compat",ew="@firebase/installations",tw="@firebase/installations-compat",nw="@firebase/messaging",rw="@firebase/messaging-compat",sw="@firebase/performance",iw="@firebase/performance-compat",ow="@firebase/remote-config",lw="@firebase/remote-config-compat",aw="@firebase/storage",cw="@firebase/storage-compat",uw="@firebase/firestore",dw="@firebase/ai",hw="@firebase/firestore-compat",fw="firebase",pw="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="[DEFAULT]",mw={[Zc]:"fire-core",[Bx]:"fire-core-compat",[Hx]:"fire-analytics",[Wx]:"fire-analytics-compat",[Kx]:"fire-app-check",[Vx]:"fire-app-check-compat",[Gx]:"fire-auth",[qx]:"fire-auth-compat",[Yx]:"fire-rtdb",[Qx]:"fire-data-connect",[Jx]:"fire-rtdb-compat",[Xx]:"fire-fn",[Zx]:"fire-fn-compat",[ew]:"fire-iid",[tw]:"fire-iid-compat",[nw]:"fire-fcm",[rw]:"fire-fcm-compat",[sw]:"fire-perf",[iw]:"fire-perf-compat",[ow]:"fire-rc",[lw]:"fire-rc-compat",[aw]:"fire-gcs",[cw]:"fire-gcs-compat",[uw]:"fire-fst",[hw]:"fire-fst-compat",[dw]:"fire-vertex","fire-js":"fire-js",[fw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new Map,gw=new Map,tu=new Map;function gp(s,e){try{s.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function _s(s){const e=s.name;if(tu.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;tu.set(e,s);for(const n of dl.values())gp(n,s);for(const n of gw.values())gp(n,s);return!0}function Eu(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function un(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Oi("app","Firebase",yw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=pw;function Vm(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:eu,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw ir.create("bad-app-name",{appName:String(l)});if(n||(n=Mm()),!n)throw ir.create("no-options");const c=dl.get(l);if(c){if(Rr(n,c.options)&&Rr(i,c.config))return c;throw ir.create("duplicate-app",{appName:l})}const h=new Nx(l);for(const m of tu.values())h.addComponent(m);const p=new vw(n,i,h);return dl.set(l,p),p}function Km(s=eu){const e=dl.get(s);if(!e&&s===eu&&Mm())return Vm();if(!e)throw ir.create("no-app",{appName:s});return e}function or(s,e,n){let i=mw[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(h.join(" "));return}_s(new Pr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebase-heartbeat-database",xw=1,Ri="firebase-heartbeat-store";let Uc=null;function Gm(){return Uc||(Uc=Mx(_w,xw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ri)}catch(n){console.warn(n)}}}}).catch(s=>{throw ir.create("idb-open",{originalErrorMessage:s.message})})),Uc}async function ww(s){try{const n=(await Gm()).transaction(Ri),i=await n.objectStore(Ri).get(qm(s));return await n.done,i}catch(e){if(e instanceof cr)In.warn(e.message);else{const n=ir.create("idb-get",{originalErrorMessage:e?.message});In.warn(n.message)}}}async function yp(s,e){try{const i=(await Gm()).transaction(Ri,"readwrite");await i.objectStore(Ri).put(e,qm(s)),await i.done}catch(n){if(n instanceof cr)In.warn(n.message);else{const i=ir.create("idb-set",{originalErrorMessage:n?.message});In.warn(i.message)}}}function qm(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=1024,Cw=30;class Nw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kw(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Cw){const l=Iw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){In.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vp(),{heartbeatsToSend:n,unsentEntries:i}=Ew(this._heartbeatsCache.heartbeats),l=al(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return In.warn(e),""}}}function vp(){return new Date().toISOString().substring(0,10)}function Ew(s,e=Sw){const n=[];let i=s.slice();for(const l of s){const c=n.find(h=>h.agent===l.agent);if(c){if(c.dates.push(l.date),_p(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),_p(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ax()?cx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ww(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _p(s){return al(JSON.stringify({version:2,heartbeats:s})).length}function Iw(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(s){_s(new Pr("platform-logger",e=>new $x(e),"PRIVATE")),_s(new Pr("heartbeat",e=>new Nw(e),"PRIVATE")),or(Zc,mp,s),or(Zc,mp,"esm2020"),or("fire-js","")}Tw("");var bw="firebase",Rw="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(bw,Rw,"app");var xp={};const wp="@firebase/database",Sp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym="";function Pw(s){Ym=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ft(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:bi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const e=window[s];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jw(e)}}catch{}return new Aw},Ir=Qm("localStorage"),Ow=Qm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Cu("@firebase/database"),Lw=function(){let s=1;return function(){return s++}}(),Jm=function(s){const e=xx(s),n=new mx;n.update(e);const i=n.digest();return _u.encodeByteArray(i)},Li=function(...s){let e="";for(let n=0;n<s.length;n++){const i=s[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Li.apply(null,i):typeof i=="object"?e+=ft(i):e+=i,e+=" "}return e};let Si=null,Cp=!0;const Dw=function(s,e){Y(!0,"Can't turn on custom loggers persistently."),fs.logLevel=Ue.VERBOSE,Si=fs.log.bind(fs)},_t=function(...s){if(Cp===!0&&(Cp=!1,Si===null&&Ow.get("logging_enabled")===!0&&Dw()),Si){const e=Li.apply(null,s);Si(e)}},Di=function(s){return function(...e){_t(s,...e)}},nu=function(...s){const e="FIREBASE INTERNAL ERROR: "+Li(...s);fs.error(e)},Tn=function(...s){const e=`FIREBASE FATAL ERROR: ${Li(...s)}`;throw fs.error(e),new Error(e)},Ut=function(...s){const e="FIREBASE WARNING: "+Li(...s);fs.warn(e)},Mw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xm=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},Uw=function(s){if(document.readyState==="complete")s();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xs="[MIN_NAME]",jr="[MAX_NAME]",Ts=function(s,e){if(s===e)return 0;if(s===xs||e===jr)return-1;if(e===xs||s===jr)return 1;{const n=Np(s),i=Np(e);return n!==null?i!==null?n-i===0?s.length-e.length:n-i:-1:i!==null?1:s<e?-1:1}},Fw=function(s,e){return s===e?0:s<e?-1:1},yi=function(s,e){if(e&&s in e)return e[s];throw new Error("Missing required key ("+s+") in object: "+ft(e))},ku=function(s){if(typeof s!="object"||s===null)return ft(s);const e=[];for(const i in s)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ft(e[i]),n+=":",n+=ku(s[e[i]]);return n+="}",n},Zm=function(s,e){const n=s.length;if(n<=e)return[s];const i=[];for(let l=0;l<n;l+=e)l+e>n?i.push(s.substring(l,n)):i.push(s.substring(l,l+e));return i};function Kt(s,e){for(const n in s)s.hasOwnProperty(n)&&e(n,s[n])}const eg=function(s){Y(!Xm(s),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let l,c,h,p,m;s===0?(c=0,h=0,l=1/s===-1/0?1:0):(l=s<0,s=Math.abs(s),s>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),i),c=p+i,h=Math.round(s*Math.pow(2,n-p)-Math.pow(2,n))):(c=0,h=Math.round(s/Math.pow(2,1-i-n))));const y=[];for(m=n;m;m-=1)y.push(h%2?1:0),h=Math.floor(h/2);for(m=e;m;m-=1)y.push(c%2?1:0),c=Math.floor(c/2);y.push(l?1:0),y.reverse();const w=y.join("");let _="";for(m=0;m<64;m+=8){let x=parseInt(w.substr(m,8),2).toString(16);x.length===1&&(x="0"+x),_=_+x}return _.toLowerCase()},$w=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Bw=new RegExp("^-?(0*)\\d{1,10}$"),Ww=-2147483648,Hw=2147483647,Np=function(s){if(Bw.test(s)){const e=Number(s);if(e>=Ww&&e<=Hw)return e}return null},Mi=function(s){try{s()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ut("Exception was thrown by user callback.",n),e},Math.floor(0))}},Vw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ci=function(s,e){const n=setTimeout(s,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,un(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ut(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ut(e)}}class rl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}rl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="5",tg="v",ng="s",rg="r",sg="f",ig=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,og="ls",lg="p",ru="ac",ag="websocket",cg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,i,l,c=!1,h="",p=!1,m=!1,y=null){this.secure=n,this.namespace=i,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ir.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ir.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qw(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function dg(s,e,n){Y(typeof e=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let i;if(e===ag)i=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(e===cg)i=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qw(s)&&(n.ns=s.namespace);const l=[];return Kt(n,(c,h)=>{l.push(c+"="+h)}),i+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.counters_={}}incrementCounter(e,n=1){Pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return q_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={},$c={};function Tu(s){const e=s.toString();return Fc[e]||(Fc[e]=new Yw),Fc[e]}function Qw(s,e){const n=s.toString();return $c[n]||($c[n]=e()),$c[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<i.length;++l)i[l]&&Mi(()=>{this.onMessage_(i[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="start",Xw="close",Zw="pLPCommand",e1="pRTLPCB",hg="id",fg="pw",pg="ser",t1="cb",n1="seg",r1="ts",s1="d",i1="dframe",mg=1870,gg=30,o1=mg-gg,l1=25e3,a1=3e4;class us{constructor(e,n,i,l,c,h,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(e),this.stats_=Tu(n),this.urlFn=m=>(this.appCheckToken&&(m[ru]=this.appCheckToken),dg(n,cg,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a1)),Uw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bu((...c)=>{const[h,p,m,y,w]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===Ep)this.id=p,this.password=m;else if(h===Xw)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...c)=>{const[h,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ep]="t",i[pg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[t1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[tg]=Iu,this.transportSessionId&&(i[ng]=this.transportSessionId),this.lastSessionId&&(i[og]=this.lastSessionId),this.applicationId&&(i[lg]=this.applicationId),this.appCheckToken&&(i[ru]=this.appCheckToken),typeof location<"u"&&location.hostname&&ig.test(location.hostname)&&(i[rg]=sg);const l=this.urlFn(i);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){us.forceAllow_=!0}static forceDisallow(){us.forceDisallow_=!0}static isAvailable(){return us.forceAllow_?!0:!us.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$w()&&!zw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Om(n),l=Zm(i,o1);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[i1]="t",i[hg]=e,i[fg]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ft(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class bu{constructor(e,n,i,l){this.onDisconnect=i,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Lw(),window[Zw+this.uniqueCallbackIdentifier]=e,window[e1+this.uniqueCallbackIdentifier]=n,this.myIFrame=bu.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){_t("frame writing exception"),p.stack&&_t(p.stack),_t(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hg]=this.myID,e[fg]=this.myPW,e[pg]=this.currentSerial;let n=this.urlFn(e),i="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gg+i.length<=mg;){const h=this.pendingSegs.shift();i=i+"&"+n1+l+"="+h.seg+"&"+r1+l+"="+h.ts+"&"+s1+l+"="+h.d,l++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(i,Math.floor(l1)),c=()=>{clearTimeout(l),i()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const l=i.readyState;(!l||l==="loaded"||l==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=16384,u1=45e3;let hl=null;typeof MozWebSocket<"u"?hl=MozWebSocket:typeof WebSocket<"u"&&(hl=WebSocket);class en{constructor(e,n,i,l,c,h,p){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=Tu(n),this.connURL=en.connectionURL_(n,h,p,l,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,l,c){const h={};return h[tg]=Iu,typeof location<"u"&&location.hostname&&ig.test(location.hostname)&&(h[rg]=sg),n&&(h[ng]=n),i&&(h[og]=i),l&&(h[ru]=l),c&&(h[lg]=c),dg(e,ag,h)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ir.set("previous_websocket_failure",!0);try{let i;lx(),this.mySock=new hl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){en.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&hl!==null&&!en.forceDisallow_}static previouslyFailed(){return Ir.isInMemoryStorage||Ir.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ir.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=bi(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Zm(n,c1);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(u1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}en.responsesRequiredToBeHealthy=2;en.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static get ALL_TRANSPORTS(){return[us,en]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=en&&en.isAvailable();let i=n&&!en.previouslyFailed();if(e.webSocketOnly&&(n||Ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[en];else{const l=this.transports_=[];for(const c of Pi.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);Pi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=6e4,h1=5e3,f1=10*1024,p1=100*1024,zc="t",kp="d",m1="s",Ip="r",g1="e",Tp="o",bp="a",Rp="n",Pp="p",y1="h";class v1{constructor(e,n,i,l,c,h,p,m,y,w){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new Pi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Ci(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>p1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>f1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zc in e){const n=e[zc];n===bp?this.upgradeIfSecondaryHealthy_():n===Ip?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Tp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=yi("t",e),i=yi("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Pp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:bp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Rp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=yi("t",e),i=yi("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=yi(zc,e);if(kp in e){const i=e[kp];if(n===y1){const l={...i};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===Rp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===m1?this.onConnectionShutdown_(i):n===Ip?this.onReset_(i):n===g1?nu("Server Error: "+i):n===Tp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Iu!==i&&Ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ci(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(d1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ci(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Pp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{put(e,n,i,l){}merge(e,n,i,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let l=0;l<i.length;l++)i[l].callback.apply(i[l].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const l=this.getInitialEvent(e);l&&n.apply(i,l)}off(e,n,i){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let c=0;c<l.length;c++)if(l[c].callback===n&&(!i||i===l[c].context)){l.splice(c,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends vg{static getInstance(){return new fl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Su()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=32,Ap=768;class Ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[i]=this.pieces_[l],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Fe(){return new Ke("")}function Te(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function ar(s){return s.pieces_.length-s.pieceNum_}function Ve(s){let e=s.pieceNum_;return e<s.pieces_.length&&e++,new Ke(s.pieces_,e)}function _g(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function _1(s){let e="";for(let n=s.pieceNum_;n<s.pieces_.length;n++)s.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(s.pieces_[n])));return e||"/"}function xg(s,e=0){return s.pieces_.slice(s.pieceNum_+e)}function wg(s){if(s.pieceNum_>=s.pieces_.length)return null;const e=[];for(let n=s.pieceNum_;n<s.pieces_.length-1;n++)e.push(s.pieces_[n]);return new Ke(e,0)}function ut(s,e){const n=[];for(let i=s.pieceNum_;i<s.pieces_.length;i++)n.push(s.pieces_[i]);if(e instanceof Ke)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let l=0;l<i.length;l++)i[l].length>0&&n.push(i[l])}return new Ke(n,0)}function Ie(s){return s.pieceNum_>=s.pieces_.length}function Vt(s,e){const n=Te(s),i=Te(e);if(n===null)return e;if(n===i)return Vt(Ve(s),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+s+")")}function Sg(s,e){if(ar(s)!==ar(e))return!1;for(let n=s.pieceNum_,i=e.pieceNum_;n<=s.pieces_.length;n++,i++)if(s.pieces_[n]!==e.pieces_[i])return!1;return!0}function tn(s,e){let n=s.pieceNum_,i=e.pieceNum_;if(ar(s)>ar(e))return!1;for(;n<s.pieces_.length;){if(s.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class x1{constructor(e,n){this.errorPrefix_=n,this.parts_=xg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Pl(this.parts_[i]);Cg(this)}}function w1(s,e){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(e),s.byteLength_+=Pl(e),Cg(s)}function S1(s){const e=s.parts_.pop();s.byteLength_-=Pl(e),s.parts_.length>0&&(s.byteLength_-=1)}function Cg(s){if(s.byteLength_>Ap)throw new Error(s.errorPrefix_+"has a key path longer than "+Ap+" bytes ("+s.byteLength_+").");if(s.parts_.length>jp)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jp+") or object contains a cycle "+kr(s))}function kr(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends vg{static getInstance(){return new Ru}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=1e3,C1=300*1e3,Op=30*1e3,N1=1.3,E1=3e4,k1="server_kill",Lp=3;class kn extends yg{constructor(e,n,i,l,c,h,p,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=kn.nextPersistentConnectionId_++,this.log_=Di("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vi,this.maxReconnectDelay_=C1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ru.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const l=++this.requestNumber_,c={r:l,a:e,b:n};this.log_(ft(c)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const n=new wu,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const p=h.d;h.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,i,l){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:l,hashFn:n,query:e,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+i+" for "+l);const c={p:i},h="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(h,c,p=>{const m=p.d,y=p.s;kn.warnOnListenWarnings_(m,n),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",p),y!=="ok"&&this.removeListen_(i,l),e.onComplete&&e.onComplete(y,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pn(e,"w")){const i=vs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();Ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||px(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Op)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=fx(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,l=>{const c=l.s,h=l.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,n)}sendUnlisten_(e,n,i,l){this.log_("Unlisten on "+e+" for "+n);const c={p:e},h="n";l&&(c.q=i,c.t=l),this.sendRequest(h,c)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,l){const c={p:n,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(e,n,i,l){this.putInternal("p",e,n,i,l)}merge(e,n,i,l){this.putInternal("m",e,n,i,l)}putInternal(e,n,i,l,c){this.initConnection_();const h={p:n,d:i};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:l}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ft(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):nu("Unrecognized action received from server: "+ft(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>E1&&(this.reconnectDelay_=vi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*N1)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+kn.nextConnectionId_++,c=this.lastSessionId;let h=!1,p=null;const m=function(){p?p.close():(h=!0,i())},y=function(_){Y(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:m,sendRequest:y};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,x]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);h?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=x&&x.token,p=new v1(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,R=>{Ut(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(k1)},c))}catch(_){this.log_("Failed to get token: "+_),h||(this.repoInfo_.nodeAdmin&&Ut(_),m())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qc(this.interruptReasons_)&&(this.reconnectDelay_=vi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(c=>ku(c)).join("$"):i="default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const i=new Ke(e).toString();let l;if(this.listens.has(i)){const c=this.listens.get(i);l=c.get(n),c.delete(n),c.size===0&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Lp&&(this.reconnectDelay_=Op,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Lp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ym.replace(/\./g,"-")]=1,Su()?e["framework.cordova"]=1:zm()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fl.getInstance().currentlyOnline();return Qc(this.interruptReasons_)&&e}}kn.nextPersistentConnectionId_=0;kn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new be(xs,e),l=new be(xs,n);return this.compare(i,l)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el;class Ng extends jl{static get __EMPTY_NODE(){return el}static set __EMPTY_NODE(e){el=e}compare(e,n){return Ts(e.name,n.name)}isDefinedOn(e){throw Ns("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(jr,el)}makePost(e,n){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,el)}toString(){return".key"}}const ps=new Ng;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,i,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=n?i(e.key,n):1,l&&(h*=-1),h<0)this.isReverse_?e=e.left:e=e.right;else if(h===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ct{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??ct.RED,this.left=l??At.EMPTY_NODE,this.right=c??At.EMPTY_NODE}copy(e,n,i,l,c){return new ct(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,l;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ct.RED=!0;ct.BLACK=!1;class I1{copy(e,n,i,l,c){return this}insert(e,n,i){return new ct(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(e,n=At.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new At(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ct.BLACK,null,null))}remove(e){return new At(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ct.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,l=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return l?l.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(l=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tl(this.root_,null,this.comparator_,!0,e)}}At.EMPTY_NODE=new I1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(s,e){return Ts(s.name,e.name)}function Pu(s,e){return Ts(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su;function b1(s){su=s}const Eg=function(s){return typeof s=="number"?"number:"+eg(s):"string:"+s},kg=function(s){if(s.isLeafNode()){const e=s.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pn(e,".sv"),"Priority must be a string or number.")}else Y(s===su||s.isEmpty(),"priority of unexpected type.");Y(s===su||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp;class at{static set __childrenNodeConstructor(e){Dp=e}static get __childrenNodeConstructor(){return Dp}constructor(e,n=at.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new at(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:at.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ie(e)?this:Te(e)===".priority"?this.priorityNode_:at.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:at.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Te(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(Y(i!==".priority"||ar(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,at.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Eg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=eg(this.value_):e+=this.value_,this.lazyHash_=Jm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===at.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof at.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,l=at.VALUE_TYPE_ORDER.indexOf(n),c=at.VALUE_TYPE_ORDER.indexOf(i);return Y(l>=0,"Unknown leaf type: "+n),Y(c>=0,"Unknown leaf type: "+i),l===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}at.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig,Tg;function R1(s){Ig=s}function P1(s){Tg=s}class j1 extends jl{compare(e,n){const i=e.node.getPriority(),l=n.node.getPriority(),c=i.compareTo(l);return c===0?Ts(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(jr,new at("[PRIORITY-POST]",Tg))}makePost(e,n){const i=Ig(e);return new be(n,new at("[PRIORITY-POST]",i))}toString(){return".priority"}}const wt=new j1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=Math.log(2);class O1{constructor(e){const n=c=>parseInt(Math.log(c)/A1,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=i(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pl=function(s,e,n,i){s.sort(e);const l=function(m,y){const w=y-m;let _,x;if(w===0)return null;if(w===1)return _=s[m],x=n?n(_):_,new ct(x,_.node,ct.BLACK,null,null);{const R=parseInt(w/2,10)+m,F=l(m,R),H=l(R+1,y);return _=s[R],x=n?n(_):_,new ct(x,_.node,ct.BLACK,F,H)}},c=function(m){let y=null,w=null,_=s.length;const x=function(F,H){const b=_-F,V=_;_-=F;const Q=l(b+1,V),ce=s[b],pe=n?n(ce):ce;R(new ct(pe,ce.node,H,null,Q))},R=function(F){y?(y.left=F,y=F):(w=F,y=F)};for(let F=0;F<m.count;++F){const H=m.nextBitIsOne(),b=Math.pow(2,m.count-(F+1));H?x(b,ct.BLACK):(x(b,ct.BLACK),x(b,ct.RED))}return w},h=new O1(s.length),p=c(h);return new At(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc;const cs={};class Cn{static get Default(){return Y(cs&&wt,"ChildrenNode.ts has not been loaded"),Bc=Bc||new Cn({".priority":cs},{".priority":wt}),Bc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=vs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof At?n:null}hasIndex(e){return Pn(this.indexSet_,e.toString())}addIndex(e,n){Y(e!==ps,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let l=!1;const c=n.getIterator(be.Wrap);let h=c.getNext();for(;h;)l=l||e.isDefinedOn(h.node),i.push(h),h=c.getNext();let p;l?p=pl(i,e.getCompare()):p=cs;const m=e.toString(),y={...this.indexSet_};y[m]=e;const w={...this.indexes_};return w[m]=p,new Cn(w,y)}addToIndexes(e,n){const i=ul(this.indexes_,(l,c)=>{const h=vs(this.indexSet_,c);if(Y(h,"Missing index implementation for "+c),l===cs)if(h.isDefinedOn(e.node)){const p=[],m=n.getIterator(be.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&p.push(y),y=m.getNext();return p.push(e),pl(p,h.getCompare())}else return cs;else{const p=n.get(e.name);let m=l;return p&&(m=m.remove(new be(e.name,p))),m.insert(e,e.node)}});return new Cn(i,this.indexSet_)}removeFromIndexes(e,n){const i=ul(this.indexes_,l=>{if(l===cs)return l;{const c=n.get(e.name);return c?l.remove(new be(e.name,c)):l}});return new Cn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i;class Oe{static get EMPTY_NODE(){return _i||(_i=new Oe(new At(Pu),null,Cn.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kg(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_i}updatePriority(e){return this.children_.isEmpty()?this:new Oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_i:n}}getChild(e){const n=Te(e);return n===null?this:this.getImmediateChild(n).getChild(Ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Y(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new be(e,n);let l,c;n.isEmpty()?(l=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(i,this.children_));const h=l.isEmpty()?_i:this.priorityNode_;return new Oe(l,h,c)}}updateChild(e,n){const i=Te(e);if(i===null)return n;{Y(Te(e)!==".priority"||ar(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Ve(e),n);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,l=0,c=!0;if(this.forEachChild(wt,(h,p)=>{n[h]=p.val(e),i++,c&&Oe.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):c=!1}),!e&&c&&l<2*i){const h=[];for(const p in n)h[p]=n[p];return h}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Eg(this.getPriority().val())+":"),this.forEachChild(wt,(n,i)=>{const l=i.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":Jm(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const l=this.resolveIndex_(i);if(l){const c=l.getPredecessorKey(new be(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new be(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,be.Wrap);let c=l.peek();for(;c!=null&&n.compare(c,e)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let c=l.peek();for(;c!=null&&n.compare(c,e)>0;)l.getNext(),c=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ui?-1:0}withIndex(e){if(e===ps||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Oe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ps||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(wt),l=n.getIterator(wt);let c=i.getNext(),h=l.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=l.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(e){return e===ps?null:this.indexMap_.get(e.toString())}}Oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class L1 extends Oe{constructor(){super(new At(Pu),Oe.EMPTY_NODE,Cn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Oe.EMPTY_NODE}isEmpty(){return!1}}const Ui=new L1;Object.defineProperties(be,{MIN:{value:new be(xs,Oe.EMPTY_NODE)},MAX:{value:new be(jr,Ui)}});Ng.__EMPTY_NODE=Oe.EMPTY_NODE;at.__childrenNodeConstructor=Oe;b1(Ui);P1(Ui);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=!0;function xt(s,e=null){if(s===null)return Oe.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(e=s[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const n=s;return new at(n,xt(e))}if(!(s instanceof Array)&&D1){const n=[];let i=!1;if(Kt(s,(h,p)=>{if(h.substring(0,1)!=="."){const m=xt(p);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),n.push(new be(h,m)))}}),n.length===0)return Oe.EMPTY_NODE;const c=pl(n,T1,h=>h.name,Pu);if(i){const h=pl(n,wt.getCompare());return new Oe(c,xt(e),new Cn({".priority":h},{".priority":wt}))}else return new Oe(c,xt(e),Cn.Default)}else{let n=Oe.EMPTY_NODE;return Kt(s,(i,l)=>{if(Pn(s,i)&&i.substring(0,1)!=="."){const c=xt(l);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(i,c))}}),n.updatePriority(xt(e))}}R1(xt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends jl{constructor(e){super(),this.indexPath_=e,Y(!Ie(e)&&Te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),l=this.extractChild(n.node),c=i.compareTo(l);return c===0?Ts(e.name,n.name):c}makePost(e,n){const i=xt(e),l=Oe.EMPTY_NODE.updateChild(this.indexPath_,i);return new be(n,l)}maxPost(){const e=Oe.EMPTY_NODE.updateChild(this.indexPath_,Ui);return new be(jr,e)}toString(){return xg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends jl{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Ts(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){const i=xt(e);return new be(n,i)}toString(){return".value"}}const F1=new U1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(s){return{type:"value",snapshotNode:s}}function z1(s,e){return{type:"child_added",snapshotNode:e,childName:s}}function B1(s,e){return{type:"child_removed",snapshotNode:e,childName:s}}function Mp(s,e,n){return{type:"child_changed",snapshotNode:e,childName:s,oldSnap:n}}function W1(s,e){return{type:"child_moved",snapshotNode:e,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xs}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wt}copy(){const e=new ju;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Up(s){const e={};if(s.isDefault())return e;let n;if(s.index_===wt?n="$priority":s.index_===F1?n="$value":s.index_===ps?n="$key":(Y(s.index_ instanceof M1,"Unrecognized index type!"),n=s.index_.toString()),e.orderBy=ft(n),s.startSet_){const i=s.startAfterSet_?"startAfter":"startAt";e[i]=ft(s.indexStartValue_),s.startNameSet_&&(e[i]+=","+ft(s.indexStartName_))}if(s.endSet_){const i=s.endBeforeSet_?"endBefore":"endAt";e[i]=ft(s.indexEndValue_),s.endNameSet_&&(e[i]+=","+ft(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?e.limitToFirst=s.limit_:e.limitToLast=s.limit_),e}function Fp(s){const e={};if(s.startSet_&&(e.sp=s.indexStartValue_,s.startNameSet_&&(e.sn=s.indexStartName_),e.sin=!s.startAfterSet_),s.endSet_&&(e.ep=s.indexEndValue_,s.endNameSet_&&(e.en=s.indexEndName_),e.ein=!s.endBeforeSet_),s.limitSet_){e.l=s.limit_;let n=s.viewFrom_;n===""&&(s.isViewFromLeft()?n="l":n="r"),e.vf=n}return s.index_!==wt&&(e.i=s.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends yg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=l,this.log_=Di("p:rest:"),this.listens_={}}listen(e,n,i,l){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const h=ml.getListenId_(e,i),p={};this.listens_[h]=p;const m=Up(e._queryParams);this.restRequest_(c+".json",m,(y,w)=>{let _=w;if(y===404&&(_=null,y=null),y===null&&this.onDataUpdate_(c,_,!1,i),vs(this.listens_,h)===p){let x;y?y===401?x="permission_denied":x="rest_error:"+y:x="ok",l(x,null)}})}unlisten(e,n){const i=ml.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Up(e._queryParams),i=e._path.toString(),l=new wu;return this.restRequest_(i+".json",n,(c,h)=>{let p=h;c===404&&(p=null,c=null),c===null?(this.onDataUpdate_(i,p,!1,null),l.resolve(p)):l.reject(new Error(p))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(n.auth=l.accessToken),c&&c.token&&(n.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ks(n);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=bi(p.responseText)}catch{Ut("Failed to parse JSON response for "+h+": "+p.responseText)}i(null,m)}else p.status!==401&&p.status!==404&&Ut("Got unsuccessful REST response for "+h+" Status: "+p.status),i(p.status);i=null}},p.open("GET",h,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.rootNode_=Oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(){return{value:null,children:new Map}}function bg(s,e,n){if(Ie(e))s.value=n,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(e,n);else{const i=Te(e);s.children.has(i)||s.children.set(i,gl());const l=s.children.get(i);e=Ve(e),bg(l,e,n)}}function iu(s,e,n){s.value!==null?n(e,s.value):V1(s,(i,l)=>{const c=new Ke(e.toString()+"/"+i);iu(l,c,n)})}function V1(s,e){s.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Kt(this.last_,(i,l)=>{n[i]=n[i]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=10*1e3,G1=30*1e3,q1=300*1e3;class Y1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new K1(e);const i=$p+(G1-$p)*Math.random();Ci(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Kt(e,(l,c)=>{c>0&&Pn(this.statsToReport_,l)&&(n[l]=c,i=!0)}),i&&this.server_.reportStats(n),Ci(this.reportStats_.bind(this),Math.floor(Math.random()*2*q1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dn||(dn={}));function Rg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Pg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jg(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=dn.ACK_USER_WRITE,this.source=Rg()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ke(e));return new yl(Fe(),n,this.revert)}}else return Y(Te(this.path)===e,"operationForChild called for unrelated child."),new yl(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=dn.OVERWRITE}operationForChild(e){return Ie(this.path)?new Ar(this.source,Fe(),this.snap.getImmediateChild(e)):new Ar(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=dn.MERGE}operationForChild(e){if(Ie(this.path)){const n=this.children.subtree(new Ke(e));return n.isEmpty()?null:n.value?new Ar(this.source,Fe(),n.value):new ji(this.source,Fe(),n)}else return Y(Te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ji(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=Te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Q1(s,e,n,i){const l=[],c=[];return e.forEach(h=>{h.type==="child_changed"&&s.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(W1(h.childName,h.snapshotNode))}),xi(s,l,"child_removed",e,i,n),xi(s,l,"child_added",e,i,n),xi(s,l,"child_moved",c,i,n),xi(s,l,"child_changed",e,i,n),xi(s,l,"value",e,i,n),l}function xi(s,e,n,i,l,c){const h=i.filter(p=>p.type===n);h.sort((p,m)=>X1(s,p,m)),h.forEach(p=>{const m=J1(s,p,c);l.forEach(y=>{y.respondsTo(p.type)&&e.push(y.createEvent(m,s.query_))})})}function J1(s,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,s.index_)),e}function X1(s,e,n){if(e.childName==null||n.childName==null)throw Ns("Should only compare child_ events.");const i=new be(e.childName,e.snapshotNode),l=new be(n.childName,n.snapshotNode);return s.index_.compare(i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(s,e){return{eventCache:s,serverCache:e}}function Ni(s,e,n,i){return Ag(new Au(e,n,i),s.serverCache)}function Og(s,e,n,i){return Ag(s.eventCache,new Au(e,n,i))}function ou(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function Or(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc;const Z1=()=>(Wc||(Wc=new At(Fw)),Wc);class He{static fromObject(e){let n=new He(null);return Kt(e,(i,l)=>{n=n.set(new Ke(i),l)}),n}constructor(e,n=Z1()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(Ie(e))return null;{const i=Te(e),l=this.children.get(i);if(l!==null){const c=l.findRootMostMatchingPathAndValue(Ve(e),n);return c!=null?{path:ut(new Ke(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{const n=Te(e),i=this.children.get(n);return i!==null?i.subtree(Ve(e)):new He(null)}}set(e,n){if(Ie(e))return new He(n,this.children);{const i=Te(e),c=(this.children.get(i)||new He(null)).set(Ve(e),n),h=this.children.insert(i,c);return new He(this.value,h)}}remove(e){if(Ie(e))return this.children.isEmpty()?new He(null):new He(null,this.children);{const n=Te(e),i=this.children.get(n);if(i){const l=i.remove(Ve(e));let c;return l.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,l),this.value===null&&c.isEmpty()?new He(null):new He(this.value,c)}else return this}}get(e){if(Ie(e))return this.value;{const n=Te(e),i=this.children.get(n);return i?i.get(Ve(e)):null}}setTree(e,n){if(Ie(e))return n;{const i=Te(e),c=(this.children.get(i)||new He(null)).setTree(Ve(e),n);let h;return c.isEmpty()?h=this.children.remove(i):h=this.children.insert(i,c),new He(this.value,h)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((l,c)=>{i[l]=c.fold_(ut(e,l),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,i){const l=this.value?i(n,this.value):!1;if(l)return l;if(Ie(e))return null;{const c=Te(e),h=this.children.get(c);return h?h.findOnPath_(Ve(e),ut(n,c),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,i){if(Ie(e))return this;{this.value&&i(n,this.value);const l=Te(e),c=this.children.get(l);return c?c.foreachOnPath_(Ve(e),ut(n,l),i):new He(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((i,l)=>{l.foreach_(ut(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.writeTree_=e}static empty(){return new rn(new He(null))}}function Ei(s,e,n){if(Ie(e))return new rn(new He(n));{const i=s.writeTree_.findRootMostValueAndPath(e);if(i!=null){const l=i.path;let c=i.value;const h=Vt(l,e);return c=c.updateChild(h,n),new rn(s.writeTree_.set(l,c))}else{const l=new He(n),c=s.writeTree_.setTree(e,l);return new rn(c)}}}function zp(s,e,n){let i=s;return Kt(n,(l,c)=>{i=Ei(i,ut(e,l),c)}),i}function Bp(s,e){if(Ie(e))return rn.empty();{const n=s.writeTree_.setTree(e,new He(null));return new rn(n)}}function lu(s,e){return Mr(s,e)!=null}function Mr(s,e){const n=s.writeTree_.findRootMostValueAndPath(e);return n!=null?s.writeTree_.get(n.path).getChild(Vt(n.path,e)):null}function Wp(s){const e=[],n=s.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(wt,(i,l)=>{e.push(new be(i,l))}):s.writeTree_.children.inorderTraversal((i,l)=>{l.value!=null&&e.push(new be(i,l.value))}),e}function lr(s,e){if(Ie(e))return s;{const n=Mr(s,e);return n!=null?new rn(new He(n)):new rn(s.writeTree_.subtree(e))}}function au(s){return s.writeTree_.isEmpty()}function ws(s,e){return Lg(Fe(),s.writeTree_,e)}function Lg(s,e,n){if(e.value!=null)return n.updateChild(s,e.value);{let i=null;return e.children.inorderTraversal((l,c)=>{l===".priority"?(Y(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):n=Lg(ut(s,l),c,n)}),!n.getChild(s).isEmpty()&&i!==null&&(n=n.updateChild(ut(s,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(s,e){return zg(e,s)}function eS(s,e,n,i,l){Y(i>s.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),s.allWrites.push({path:e,snap:n,writeId:i,visible:l}),l&&(s.visibleWrites=Ei(s.visibleWrites,e,n)),s.lastWriteId=i}function tS(s,e){for(let n=0;n<s.allWrites.length;n++){const i=s.allWrites[n];if(i.writeId===e)return i}return null}function nS(s,e){const n=s.allWrites.findIndex(p=>p.writeId===e);Y(n>=0,"removeWrite called with nonexistent writeId.");const i=s.allWrites[n];s.allWrites.splice(n,1);let l=i.visible,c=!1,h=s.allWrites.length-1;for(;l&&h>=0;){const p=s.allWrites[h];p.visible&&(h>=n&&rS(p,i.path)?l=!1:tn(i.path,p.path)&&(c=!0)),h--}if(l){if(c)return sS(s),!0;if(i.snap)s.visibleWrites=Bp(s.visibleWrites,i.path);else{const p=i.children;Kt(p,m=>{s.visibleWrites=Bp(s.visibleWrites,ut(i.path,m))})}return!0}else return!1}function rS(s,e){if(s.snap)return tn(s.path,e);for(const n in s.children)if(s.children.hasOwnProperty(n)&&tn(ut(s.path,n),e))return!0;return!1}function sS(s){s.visibleWrites=Mg(s.allWrites,iS,Fe()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function iS(s){return s.visible}function Mg(s,e,n){let i=rn.empty();for(let l=0;l<s.length;++l){const c=s[l];if(e(c)){const h=c.path;let p;if(c.snap)tn(n,h)?(p=Vt(n,h),i=Ei(i,p,c.snap)):tn(h,n)&&(p=Vt(h,n),i=Ei(i,Fe(),c.snap.getChild(p)));else if(c.children){if(tn(n,h))p=Vt(n,h),i=zp(i,p,c.children);else if(tn(h,n))if(p=Vt(h,n),Ie(p))i=zp(i,Fe(),c.children);else{const m=vs(c.children,Te(p));if(m){const y=m.getChild(Ve(p));i=Ei(i,Fe(),y)}}}else throw Ns("WriteRecord should have .snap or .children")}}return i}function Ug(s,e,n,i,l){if(!i&&!l){const c=Mr(s.visibleWrites,e);if(c!=null)return c;{const h=lr(s.visibleWrites,e);if(au(h))return n;if(n==null&&!lu(h,Fe()))return null;{const p=n||Oe.EMPTY_NODE;return ws(h,p)}}}else{const c=lr(s.visibleWrites,e);if(!l&&au(c))return n;if(!l&&n==null&&!lu(c,Fe()))return null;{const h=function(y){return(y.visible||l)&&(!i||!~i.indexOf(y.writeId))&&(tn(y.path,e)||tn(e,y.path))},p=Mg(s.allWrites,h,e),m=n||Oe.EMPTY_NODE;return ws(p,m)}}}function oS(s,e,n){let i=Oe.EMPTY_NODE;const l=Mr(s.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(wt,(c,h)=>{i=i.updateImmediateChild(c,h)}),i;if(n){const c=lr(s.visibleWrites,e);return n.forEachChild(wt,(h,p)=>{const m=ws(lr(c,new Ke(h)),p);i=i.updateImmediateChild(h,m)}),Wp(c).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}else{const c=lr(s.visibleWrites,e);return Wp(c).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}}function lS(s,e,n,i,l){Y(i||l,"Either existingEventSnap or existingServerSnap must exist");const c=ut(e,n);if(lu(s.visibleWrites,c))return null;{const h=lr(s.visibleWrites,c);return au(h)?l.getChild(n):ws(h,l.getChild(n))}}function aS(s,e,n,i){const l=ut(e,n),c=Mr(s.visibleWrites,l);if(c!=null)return c;if(i.isCompleteForChild(n)){const h=lr(s.visibleWrites,l);return ws(h,i.getNode().getImmediateChild(n))}else return null}function cS(s,e){return Mr(s.visibleWrites,e)}function uS(s,e,n,i,l,c,h){let p;const m=lr(s.visibleWrites,e),y=Mr(m,Fe());if(y!=null)p=y;else if(n!=null)p=ws(m,n);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){const w=[],_=h.getCompare(),x=c?p.getReverseIteratorFrom(i,h):p.getIteratorFrom(i,h);let R=x.getNext();for(;R&&w.length<l;)_(R,i)!==0&&w.push(R),R=x.getNext();return w}else return[]}function dS(){return{visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1}}function cu(s,e,n,i){return Ug(s.writeTree,s.treePath,e,n,i)}function Fg(s,e){return oS(s.writeTree,s.treePath,e)}function Hp(s,e,n,i){return lS(s.writeTree,s.treePath,e,n,i)}function vl(s,e){return cS(s.writeTree,ut(s.treePath,e))}function hS(s,e,n,i,l,c){return uS(s.writeTree,s.treePath,e,n,i,l,c)}function Ou(s,e,n){return aS(s.writeTree,s.treePath,e,n)}function $g(s,e){return zg(ut(s.treePath,e),s.writeTree)}function zg(s,e){return{treePath:s,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(i!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(i);if(l){const c=l.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(i,Mp(i,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(i,B1(i,l.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(i,z1(i,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(i,Mp(i,e.snapshotNode,l.oldSnap));else throw Ns("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Bg=new pS;class Lu{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Au(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ou(this.writes_,e,i)}}getChildAfterChild(e,n,i){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Or(this.viewCache_),c=hS(this.writes_,l,n,1,i,e);return c.length===0?null:c[0]}}function mS(s,e){Y(e.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function gS(s,e,n,i,l){const c=new fS;let h,p;if(n.type===dn.OVERWRITE){const y=n;y.source.fromUser?h=uu(s,e,y.path,y.snap,i,l,c):(Y(y.source.fromServer,"Unknown source."),p=y.source.tagged||e.serverCache.isFiltered()&&!Ie(y.path),h=_l(s,e,y.path,y.snap,i,l,p,c))}else if(n.type===dn.MERGE){const y=n;y.source.fromUser?h=vS(s,e,y.path,y.children,i,l,c):(Y(y.source.fromServer,"Unknown source."),p=y.source.tagged||e.serverCache.isFiltered(),h=du(s,e,y.path,y.children,i,l,p,c))}else if(n.type===dn.ACK_USER_WRITE){const y=n;y.revert?h=wS(s,e,y.path,i,l,c):h=_S(s,e,y.path,y.affectedTree,i,l,c)}else if(n.type===dn.LISTEN_COMPLETE)h=xS(s,e,n.path,i,c);else throw Ns("Unknown operation type: "+n.type);const m=c.getChanges();return yS(e,h,m),{viewCache:h,changes:m}}function yS(s,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const l=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=ou(s);(n.length>0||!s.eventCache.isFullyInitialized()||l&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&n.push($1(ou(e)))}}function Wg(s,e,n,i,l,c){const h=e.eventCache;if(vl(i,n)!=null)return e;{let p,m;if(Ie(n))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Or(e),w=y instanceof Oe?y:Oe.EMPTY_NODE,_=Fg(i,w);p=s.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const y=cu(i,Or(e));p=s.filter.updateFullNode(e.eventCache.getNode(),y,c)}else{const y=Te(n);if(y===".priority"){Y(ar(n)===1,"Can't have a priority with additional path components");const w=h.getNode();m=e.serverCache.getNode();const _=Hp(i,n,w,m);_!=null?p=s.filter.updatePriority(w,_):p=h.getNode()}else{const w=Ve(n);let _;if(h.isCompleteForChild(y)){m=e.serverCache.getNode();const x=Hp(i,n,h.getNode(),m);x!=null?_=h.getNode().getImmediateChild(y).updateChild(w,x):_=h.getNode().getImmediateChild(y)}else _=Ou(i,y,e.serverCache);_!=null?p=s.filter.updateChild(h.getNode(),y,_,w,l,c):p=h.getNode()}}return Ni(e,p,h.isFullyInitialized()||Ie(n),s.filter.filtersNodes())}}function _l(s,e,n,i,l,c,h,p){const m=e.serverCache;let y;const w=h?s.filter:s.filter.getIndexedFilter();if(Ie(n))y=w.updateFullNode(m.getNode(),i,null);else if(w.filtersNodes()&&!m.isFiltered()){const R=m.getNode().updateChild(n,i);y=w.updateFullNode(m.getNode(),R,null)}else{const R=Te(n);if(!m.isCompleteForPath(n)&&ar(n)>1)return e;const F=Ve(n),b=m.getNode().getImmediateChild(R).updateChild(F,i);R===".priority"?y=w.updatePriority(m.getNode(),b):y=w.updateChild(m.getNode(),R,b,F,Bg,null)}const _=Og(e,y,m.isFullyInitialized()||Ie(n),w.filtersNodes()),x=new Lu(l,_,c);return Wg(s,_,n,l,x,p)}function uu(s,e,n,i,l,c,h){const p=e.eventCache;let m,y;const w=new Lu(l,e,c);if(Ie(n))y=s.filter.updateFullNode(e.eventCache.getNode(),i,h),m=Ni(e,y,!0,s.filter.filtersNodes());else{const _=Te(n);if(_===".priority")y=s.filter.updatePriority(e.eventCache.getNode(),i),m=Ni(e,y,p.isFullyInitialized(),p.isFiltered());else{const x=Ve(n),R=p.getNode().getImmediateChild(_);let F;if(Ie(x))F=i;else{const H=w.getCompleteChild(_);H!=null?_g(x)===".priority"&&H.getChild(wg(x)).isEmpty()?F=H:F=H.updateChild(x,i):F=Oe.EMPTY_NODE}if(R.equals(F))m=e;else{const H=s.filter.updateChild(p.getNode(),_,F,x,w,h);m=Ni(e,H,p.isFullyInitialized(),s.filter.filtersNodes())}}}return m}function Vp(s,e){return s.eventCache.isCompleteForChild(e)}function vS(s,e,n,i,l,c,h){let p=e;return i.foreach((m,y)=>{const w=ut(n,m);Vp(e,Te(w))&&(p=uu(s,p,w,y,l,c,h))}),i.foreach((m,y)=>{const w=ut(n,m);Vp(e,Te(w))||(p=uu(s,p,w,y,l,c,h))}),p}function Kp(s,e,n){return n.foreach((i,l)=>{e=e.updateChild(i,l)}),e}function du(s,e,n,i,l,c,h,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,y;Ie(n)?y=i:y=new He(null).setTree(n,i);const w=e.serverCache.getNode();return y.children.inorderTraversal((_,x)=>{if(w.hasChild(_)){const R=e.serverCache.getNode().getImmediateChild(_),F=Kp(s,R,x);m=_l(s,m,new Ke(_),F,l,c,h,p)}}),y.children.inorderTraversal((_,x)=>{const R=!e.serverCache.isCompleteForChild(_)&&x.value===null;if(!w.hasChild(_)&&!R){const F=e.serverCache.getNode().getImmediateChild(_),H=Kp(s,F,x);m=_l(s,m,new Ke(_),H,l,c,h,p)}}),m}function _S(s,e,n,i,l,c,h){if(vl(l,n)!=null)return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Ie(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return _l(s,e,n,m.getNode().getChild(n),l,c,p,h);if(Ie(n)){let y=new He(null);return m.getNode().forEachChild(ps,(w,_)=>{y=y.set(new Ke(w),_)}),du(s,e,n,y,l,c,p,h)}else return e}else{let y=new He(null);return i.foreach((w,_)=>{const x=ut(n,w);m.isCompleteForPath(x)&&(y=y.set(w,m.getNode().getChild(x)))}),du(s,e,n,y,l,c,p,h)}}function xS(s,e,n,i,l){const c=e.serverCache,h=Og(e,c.getNode(),c.isFullyInitialized()||Ie(n),c.isFiltered());return Wg(s,h,n,i,Bg,l)}function wS(s,e,n,i,l,c){let h;if(vl(i,n)!=null)return e;{const p=new Lu(i,e,l),m=e.eventCache.getNode();let y;if(Ie(n)||Te(n)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=cu(i,Or(e));else{const _=e.serverCache.getNode();Y(_ instanceof Oe,"serverChildren would be complete if leaf node"),w=Fg(i,_)}w=w,y=s.filter.updateFullNode(m,w,c)}else{const w=Te(n);let _=Ou(i,w,e.serverCache);_==null&&e.serverCache.isCompleteForChild(w)&&(_=m.getImmediateChild(w)),_!=null?y=s.filter.updateChild(m,w,_,Ve(n),p,c):e.eventCache.getNode().hasChild(w)?y=s.filter.updateChild(m,w,Oe.EMPTY_NODE,Ve(n),p,c):y=m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=cu(i,Or(e)),h.isLeafNode()&&(y=s.filter.updateFullNode(y,h,c)))}return h=e.serverCache.isFullyInitialized()||vl(i,Fe())!=null,Ni(e,y,h,s.filter.filtersNodes())}}function SS(s,e){const n=Or(s.viewCache_);return n&&(s.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Te(e)).isEmpty())?n.getChild(e):null}function Gp(s,e,n,i){e.type===dn.MERGE&&e.source.queryId!==null&&(Y(Or(s.viewCache_),"We should always have a full cache before handling merges"),Y(ou(s.viewCache_),"Missing event cache, even though we have a server cache"));const l=s.viewCache_,c=gS(s.processor_,l,e,n,i);return mS(s.processor_,c.viewCache),Y(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=c.viewCache,CS(s,c.changes,c.viewCache.eventCache.getNode())}function CS(s,e,n,i){const l=s.eventRegistrations_;return Q1(s.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp;function NS(s){Y(!qp,"__referenceConstructor has already been defined"),qp=s}function Du(s,e,n,i){const l=e.source.queryId;if(l!==null){const c=s.views.get(l);return Y(c!=null,"SyncTree gave us an op for an invalid query."),Gp(c,e,n,i)}else{let c=[];for(const h of s.views.values())c=c.concat(Gp(h,e,n,i));return c}}function Mu(s,e){let n=null;for(const i of s.views.values())n=n||SS(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp;function ES(s){Y(!Yp,"__referenceConstructor has already been defined"),Yp=s}class Qp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new He(null),this.pendingWriteTree_=dS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kS(s,e,n,i,l){return eS(s.pendingWriteTree_,e,n,i,l),l?Ol(s,new Ar(Rg(),e,n)):[]}function ds(s,e,n=!1){const i=tS(s.pendingWriteTree_,e);if(nS(s.pendingWriteTree_,e)){let c=new He(null);return i.snap!=null?c=c.set(Fe(),!0):Kt(i.children,h=>{c=c.set(new Ke(h),!0)}),Ol(s,new yl(i.path,c,n))}else return[]}function Al(s,e,n){return Ol(s,new Ar(Pg(),e,n))}function IS(s,e,n){const i=He.fromObject(n);return Ol(s,new ji(Pg(),e,i))}function TS(s,e,n,i){const l=Gg(s,i);if(l!=null){const c=qg(l),h=c.path,p=c.queryId,m=Vt(h,e),y=new Ar(jg(p),m,n);return Yg(s,h,y)}else return[]}function bS(s,e,n,i){const l=Gg(s,i);if(l){const c=qg(l),h=c.path,p=c.queryId,m=Vt(h,e),y=He.fromObject(n),w=new ji(jg(p),m,y);return Yg(s,h,w)}else return[]}function Hg(s,e,n){const l=s.pendingWriteTree_,c=s.syncPointTree_.findOnPath(e,(h,p)=>{const m=Vt(h,e),y=Mu(p,m);if(y)return y});return Ug(l,e,c,n,!0)}function Ol(s,e){return Vg(e,s.syncPointTree_,null,Dg(s.pendingWriteTree_,Fe()))}function Vg(s,e,n,i){if(Ie(s.path))return Kg(s,e,n,i);{const l=e.get(Fe());n==null&&l!=null&&(n=Mu(l,Fe()));let c=[];const h=Te(s.path),p=s.operationForChild(h),m=e.children.get(h);if(m&&p){const y=n?n.getImmediateChild(h):null,w=$g(i,h);c=c.concat(Vg(p,m,y,w))}return l&&(c=c.concat(Du(l,s,i,n))),c}}function Kg(s,e,n,i){const l=e.get(Fe());n==null&&l!=null&&(n=Mu(l,Fe()));let c=[];return e.children.inorderTraversal((h,p)=>{const m=n?n.getImmediateChild(h):null,y=$g(i,h),w=s.operationForChild(h);w&&(c=c.concat(Kg(w,p,m,y)))}),l&&(c=c.concat(Du(l,s,i,n))),c}function Gg(s,e){return s.tagToQueryMap.get(e)}function qg(s){const e=s.indexOf("$");return Y(e!==-1&&e<s.length-1,"Bad queryKey."),{queryId:s.substr(e+1),path:new Ke(s.substr(0,e))}}function Yg(s,e,n){const i=s.syncPointTree_.get(e);Y(i,"Missing sync point for query tag that we're tracking");const l=Dg(s.pendingWriteTree_,e);return Du(i,n,l,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Uu(n)}node(){return this.node_}}class Fu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ut(this.path_,e);return new Fu(this.syncTree_,n)}node(){return Hg(this.syncTree_,this.path_)}}const RS=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},Jp=function(s,e,n){if(!s||typeof s!="object")return s;if(Y(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return PS(s[".sv"],e,n);if(typeof s[".sv"]=="object")return jS(s[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},PS=function(s,e,n){switch(s){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+s)}},jS=function(s,e,n){s.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const i=s.increment;typeof i!="number"&&Y(!1,"Unexpected increment value: "+i);const l=e.node();if(Y(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return i;const h=l.getValue();return typeof h!="number"?i:h+i},AS=function(s,e,n,i){return $u(e,new Fu(n,s),i)},OS=function(s,e,n){return $u(s,new Uu(e),n)};function $u(s,e,n){const i=s.getPriority().val(),l=Jp(i,e.getImmediateChild(".priority"),n);let c;if(s.isLeafNode()){const h=s,p=Jp(h.getValue(),e,n);return p!==h.getValue()||l!==h.getPriority().val()?new at(p,xt(l)):s}else{const h=s;return c=h,l!==h.getPriority().val()&&(c=c.updatePriority(new at(l))),h.forEachChild(wt,(p,m)=>{const y=$u(m,e.getImmediateChild(p),n);y!==m&&(c=c.updateImmediateChild(p,y))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Bu(s,e){let n=e instanceof Ke?e:new Ke(e),i=s,l=Te(n);for(;l!==null;){const c=vs(i.node.children,l)||{children:{},childCount:0};i=new zu(l,i,c),n=Ve(n),l=Te(n)}return i}function bs(s){return s.node.value}function Qg(s,e){s.node.value=e,hu(s)}function Jg(s){return s.node.childCount>0}function LS(s){return bs(s)===void 0&&!Jg(s)}function Ll(s,e){Kt(s.node.children,(n,i)=>{e(new zu(n,s,i))})}function Xg(s,e,n,i){n&&e(s),Ll(s,l=>{Xg(l,e,!0)})}function DS(s,e,n){let i=s.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Fi(s){return new Ke(s.parent===null?s.name:Fi(s.parent)+"/"+s.name)}function hu(s){s.parent!==null&&MS(s.parent,s.name,s)}function MS(s,e,n){const i=LS(n),l=Pn(s.node.children,e);i&&l?(delete s.node.children[e],s.node.childCount--,hu(s)):!i&&!l&&(s.node.children[e]=n.node,s.node.childCount++,hu(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=/[\[\].#$\/\u0000-\u001F\u007F]/,FS=/[\[\].#$\u0000-\u001F\u007F]/,Hc=10*1024*1024,Zg=function(s){return typeof s=="string"&&s.length!==0&&!US.test(s)},$S=function(s){return typeof s=="string"&&s.length!==0&&!FS.test(s)},zS=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),$S(s)},ey=function(s,e,n){const i=n instanceof Ke?new x1(n,s):n;if(e===void 0)throw new Error(s+"contains undefined "+kr(i));if(typeof e=="function")throw new Error(s+"contains a function "+kr(i)+" with contents = "+e.toString());if(Xm(e))throw new Error(s+"contains "+e.toString()+" "+kr(i));if(typeof e=="string"&&e.length>Hc/3&&Pl(e)>Hc)throw new Error(s+"contains a string greater than "+Hc+" utf8 bytes "+kr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,c=!1;if(Kt(e,(h,p)=>{if(h===".value")l=!0;else if(h!==".priority"&&h!==".sv"&&(c=!0,!Zg(h)))throw new Error(s+" contains an invalid key ("+h+") "+kr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);w1(i,h),ey(s,p,i),S1(i)}),l&&c)throw new Error(s+' contains ".value" child '+kr(i)+" in addition to actual children.")}},BS=function(s,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zS(n))throw new Error(_x(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HS(s,e){let n=null;for(let i=0;i<e.length;i++){const l=e[i],c=l.getPath();n!==null&&!Sg(c,n.path)&&(s.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(l)}n&&s.eventLists_.push(n)}function Ur(s,e,n){HS(s,n),VS(s,i=>tn(i,e)||tn(e,i))}function VS(s,e){s.recursionDepth_++;let n=!0;for(let i=0;i<s.eventLists_.length;i++){const l=s.eventLists_[i];if(l){const c=l.path;e(c)?(KS(s.eventLists_[i]),s.eventLists_[i]=null):n=!1}}n&&(s.eventLists_=[]),s.recursionDepth_--}function KS(s){for(let e=0;e<s.events.length;e++){const n=s.events[e];if(n!==null){s.events[e]=null;const i=n.getEventRunner();Si&&_t("event: "+n.toString()),Mi(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="repo_interrupt",qS=25;class YS{constructor(e,n,i,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gl(),this.transactionQueueTree_=new zu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QS(s,e,n){if(s.stats_=Tu(s.repoInfo_),s.forceRestClient_||Vw())s.server_=new ml(s.repoInfo_,(i,l,c,h)=>{Xp(s,i,l,c,h)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>Zp(s,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ft(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}s.persistentConnection_=new kn(s.repoInfo_,e,(i,l,c,h)=>{Xp(s,i,l,c,h)},i=>{Zp(s,i)},i=>{XS(s,i)},s.authTokenProvider_,s.appCheckProvider_,n),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(i=>{s.server_.refreshAuthToken(i)}),s.appCheckProvider_.addTokenChangeListener(i=>{s.server_.refreshAppCheckToken(i.token)}),s.statsReporter_=Qw(s.repoInfo_,()=>new Y1(s.stats_,s.server_)),s.infoData_=new H1,s.infoSyncTree_=new Qp({startListening:(i,l,c,h)=>{let p=[];const m=s.infoData_.getNode(i._path);return m.isEmpty()||(p=Al(s.infoSyncTree_,i._path,m),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),Wu(s,"connected",!1),s.serverSyncTree_=new Qp({startListening:(i,l,c,h)=>(s.server_.listen(i,c,l,(p,m)=>{const y=h(p,m);Ur(s.eventQueue_,i._path,y)}),[]),stopListening:(i,l)=>{s.server_.unlisten(i,l)}})}function JS(s){const n=s.infoData_.getNode(new Ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ty(s){return RS({timestamp:JS(s)})}function Xp(s,e,n,i,l){s.dataUpdateCount++;const c=new Ke(e);n=s.interceptServerDataCallback_?s.interceptServerDataCallback_(e,n):n;let h=[];if(l)if(i){const m=ul(n,y=>xt(y));h=bS(s.serverSyncTree_,c,m,l)}else{const m=xt(n);h=TS(s.serverSyncTree_,c,m,l)}else if(i){const m=ul(n,y=>xt(y));h=IS(s.serverSyncTree_,c,m)}else{const m=xt(n);h=Al(s.serverSyncTree_,c,m)}let p=c;h.length>0&&(p=Vu(s,c)),Ur(s.eventQueue_,p,h)}function Zp(s,e){Wu(s,"connected",e),e===!1&&eC(s)}function XS(s,e){Kt(e,(n,i)=>{Wu(s,n,i)})}function Wu(s,e,n){const i=new Ke("/.info/"+e),l=xt(n);s.infoData_.updateSnapshot(i,l);const c=Al(s.infoSyncTree_,i,l);Ur(s.eventQueue_,i,c)}function ZS(s){return s.nextWriteId_++}function eC(s){ny(s,"onDisconnectEvents");const e=ty(s),n=gl();iu(s.onDisconnect_,Fe(),(l,c)=>{const h=AS(l,c,s.serverSyncTree_,e);bg(n,l,h)});let i=[];iu(n,Fe(),(l,c)=>{i=i.concat(Al(s.serverSyncTree_,l,c));const h=sC(s,l);Vu(s,h)}),s.onDisconnect_=gl(),Ur(s.eventQueue_,Fe(),i)}function tC(s){s.persistentConnection_&&s.persistentConnection_.interrupt(GS)}function ny(s,...e){let n="";s.persistentConnection_&&(n=s.persistentConnection_.id+":"),_t(n,...e)}function ry(s,e,n){return Hg(s.serverSyncTree_,e,n)||Oe.EMPTY_NODE}function Hu(s,e=s.transactionQueueTree_){if(e||Dl(s,e),bs(e)){const n=iy(s,e);Y(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&nC(s,Fi(e),n)}else Jg(e)&&Ll(e,n=>{Hu(s,n)})}function nC(s,e,n){const i=n.map(y=>y.currentWriteId),l=ry(s,e,i);let c=l;const h=l.hash();for(let y=0;y<n.length;y++){const w=n[y];Y(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const _=Vt(e,w.path);c=c.updateChild(_,w.currentOutputSnapshotRaw)}const p=c.val(!0),m=e;s.server_.put(m.toString(),p,y=>{ny(s,"transaction put response",{path:m.toString(),status:y});let w=[];if(y==="ok"){const _=[];for(let x=0;x<n.length;x++)n[x].status=2,w=w.concat(ds(s.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&_.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();Dl(s,Bu(s.transactionQueueTree_,e)),Hu(s,s.transactionQueueTree_),Ur(s.eventQueue_,e,w);for(let x=0;x<_.length;x++)Mi(_[x])}else{if(y==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Ut("transaction at "+m.toString()+" failed: "+y);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=y}Vu(s,e)}},h)}function Vu(s,e){const n=sy(s,e),i=Fi(n),l=iy(s,n);return rC(s,l,i),i}function rC(s,e,n){if(e.length===0)return;const i=[];let l=[];const h=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],y=Vt(n,m.path);let w=!1,_;if(Y(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)w=!0,_=m.abortReason,l=l.concat(ds(s.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=qS)w=!0,_="maxretry",l=l.concat(ds(s.serverSyncTree_,m.currentWriteId,!0));else{const x=ry(s,m.path,h);m.currentInputSnapshot=x;const R=e[p].update(x.val());if(R!==void 0){ey("transaction failed: Data returned ",R,m.path);let F=xt(R);typeof R=="object"&&R!=null&&Pn(R,".priority")||(F=F.updatePriority(x.getPriority()));const b=m.currentWriteId,V=ty(s),Q=OS(F,x,V);m.currentOutputSnapshotRaw=F,m.currentOutputSnapshotResolved=Q,m.currentWriteId=ZS(s),h.splice(h.indexOf(b),1),l=l.concat(kS(s.serverSyncTree_,m.path,Q,m.currentWriteId,m.applyLocally)),l=l.concat(ds(s.serverSyncTree_,b,!0))}else w=!0,_="nodata",l=l.concat(ds(s.serverSyncTree_,m.currentWriteId,!0))}Ur(s.eventQueue_,n,l),l=[],w&&(e[p].status=2,function(x){setTimeout(x,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(_),!1,null))))}Dl(s,s.transactionQueueTree_);for(let p=0;p<i.length;p++)Mi(i[p]);Hu(s,s.transactionQueueTree_)}function sy(s,e){let n,i=s.transactionQueueTree_;for(n=Te(e);n!==null&&bs(i)===void 0;)i=Bu(i,n),e=Ve(e),n=Te(e);return i}function iy(s,e){const n=[];return oy(s,e,n),n.sort((i,l)=>i.order-l.order),n}function oy(s,e,n){const i=bs(e);if(i)for(let l=0;l<i.length;l++)n.push(i[l]);Ll(e,l=>{oy(s,l,n)})}function Dl(s,e){const n=bs(e);if(n){let i=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[i]=n[l],i++);n.length=i,Qg(e,n.length>0?n:void 0)}Ll(e,i=>{Dl(s,i)})}function sC(s,e){const n=Fi(sy(s,e)),i=Bu(s.transactionQueueTree_,e);return DS(i,l=>{Vc(s,l)}),Vc(s,i),Xg(i,l=>{Vc(s,l)}),n}function Vc(s,e){const n=bs(e);if(n){const i=[];let l=[],c=-1;for(let h=0;h<n.length;h++)n[h].status===3||(n[h].status===1?(Y(c===h-1,"All SENT items should be at beginning of queue."),c=h,n[h].status=3,n[h].abortReason="set"):(Y(n[h].status===0,"Unexpected transaction status in abort"),n[h].unwatcher(),l=l.concat(ds(s.serverSyncTree_,n[h].currentWriteId,!0)),n[h].onComplete&&i.push(n[h].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Qg(e,void 0):n.length=c+1,Ur(s.eventQueue_,Fi(e),l);for(let h=0;h<i.length;h++)Mi(i[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(s){let e="";const n=s.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let l=n[i];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function oC(s){const e={};s.charAt(0)==="?"&&(s=s.substring(1));for(const n of s.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ut(`Invalid query segment '${n}' in query '${s}'`)}return e}const em=function(s,e){const n=lC(s),i=n.namespace;n.domain==="firebase.com"&&Tn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Mw();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ug(n.host,n.secure,i,l,e,"",i!==n.subdomain),path:new Ke(n.pathString)}},lC=function(s){let e="",n="",i="",l="",c="",h=!0,p="https",m=443;if(typeof s=="string"){let y=s.indexOf("//");y>=0&&(p=s.substring(0,y-1),s=s.substring(y+2));let w=s.indexOf("/");w===-1&&(w=s.length);let _=s.indexOf("?");_===-1&&(_=s.length),e=s.substring(0,Math.min(w,_)),w<_&&(l=iC(s.substring(w,_)));const x=oC(s.substring(Math.min(s.length,_)));y=e.indexOf(":"),y>=0?(h=p==="https"||p==="wss",m=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const F=e.indexOf(".");i=e.substring(0,F).toLowerCase(),n=e.substring(F+1),c=i}"ns"in x&&(c=x.ns)}return{host:e,port:m,domain:n,subdomain:i,secure:h,scheme:p,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,i,l){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=l}get key(){return Ie(this._path)?null:_g(this._path)}get ref(){return new Rs(this._repo,this._path)}get _queryIdentifier(){const e=Fp(this._queryParams),n=ku(e);return n==="{}"?"default":n}get _queryObject(){return Fp(this._queryParams)}isEqual(e){if(e=ur(e),!(e instanceof Ku))return!1;const n=this._repo===e._repo,i=Sg(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&i&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+_1(this._path)}}class Rs extends Ku{constructor(e,n){super(e,n,new ju,!1)}get parent(){const e=wg(this._path);return e===null?null:new Rs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}NS(Rs);ES(Rs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="FIREBASE_DATABASE_EMULATOR_HOST",fu={};let cC=!1;function uC(s,e,n,i){const l=e.lastIndexOf(":"),c=e.substring(0,l),h=Es(c);s.repoInfo_=new ug(e,h,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(s.authTokenProvider_=i)}function dC(s,e,n,i,l){let c=i||s.options.databaseURL;c===void 0&&(s.options.projectId||Tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",s.options.projectId),c=`${s.options.projectId}-default-rtdb.firebaseio.com`);let h=em(c,l),p=h.repoInfo,m;typeof process<"u"&&xp&&(m=xp[aC]),m?(c=`http://${m}?ns=${p.namespace}`,h=em(c,l),p=h.repoInfo):h.repoInfo.secure;const y=new Gw(s.name,s.options,e);BS("Invalid Firebase Database URL",h),Ie(h.path)||Tn("Database URL must point to the root of a Firebase Database (not including a child path).");const w=fC(p,s,y,new Kw(s,n));return new pC(w,s)}function hC(s,e){const n=fu[e];(!n||n[s.key]!==s)&&Tn(`Database ${e}(${s.repoInfo_}) has already been deleted.`),tC(s),delete n[s.key]}function fC(s,e,n,i){let l=fu[e.name];l||(l={},fu[e.name]=l);let c=l[s.toURLString()];return c&&Tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new YS(s,cC,n,i),l[s.toURLString()]=c,c}class pC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(QS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rs(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Tn("Cannot call "+e+" on a deleted database.")}}function mC(s=Km(),e){const n=Eu(s,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=ex("database");i&&gC(n,...i)}return n}function gC(s,e,n,i={}){s=ur(s),s._checkNotDeleted("useEmulator");const l=`${e}:${n}`,c=s._repoInternal;if(s._instanceStarted){if(l===s._repoInternal.repoInfo_.host&&Rr(i,c.repoInfo_.emulatorOptions))return;Tn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(c.repoInfo_.nodeAdmin)i.mockUserToken&&Tn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new rl(rl.OWNER);else if(i.mockUserToken){const p=typeof i.mockUserToken=="string"?i.mockUserToken:tx(i.mockUserToken,s.app.options.projectId);h=new rl(p)}Es(e)&&(Fm(e),$m("Database",!0)),uC(c,l,i,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(s){Pw(Is),_s(new Pr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return dC(i,l,c,n)},"PUBLIC").setMultipleInstances(!0)),or(wp,Sp,s),or(wp,Sp,"esm2020")}kn.prototype.simpleListen=function(s,e){this.sendRequest("q",{p:s},e)};kn.prototype.echo=function(s,e){this.sendRequest("echo",{d:s},e)};yC();function ly(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vC=ly,ay=new Oi("auth","Firebase",ly());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Cu("@firebase/auth");function _C(s,...e){xl.logLevel<=Ue.WARN&&xl.warn(`Auth (${Is}): ${s}`,...e)}function sl(s,...e){xl.logLevel<=Ue.ERROR&&xl.error(`Auth (${Is}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(s,...e){throw Gu(s,...e)}function hn(s,...e){return Gu(s,...e)}function cy(s,e,n){const i={...vC(),[e]:n};return new Oi("auth","Firebase",i).create(e,{appName:s.name})}function br(s){return cy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gu(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return ay.create(s,...e)}function ge(s,e,...n){if(!s)throw Gu(e,...n)}function Nn(s){const e="INTERNAL ASSERTION FAILED: "+s;throw sl(e),new Error(e)}function Rn(s,e){s||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return typeof self<"u"&&self.location?.href||""}function xC(){return tm()==="http:"||tm()==="https:"}function tm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||ix()||"connection"in navigator)?navigator.onLine:!0}function SC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rn(n>e,"Short delay should be less than long delay!"),this.isMobile=Su()||zm()}get(){return wC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(s,e){Rn(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EC=new $i(3e4,6e4);function Yu(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ps(s,e,n,i,l={}){return dy(s,l,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const p=ks({key:s.config.apiKey,...h}).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:m,...c};return sx()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Es(s.emulatorConfig.host)&&(y.credentials="include"),uy.fetch()(await hy(s,s.config.apiHost,n,p),y)})}async function dy(s,e,n){s._canInitEmulator=!1;const i={...CC,...e};try{const l=new IC(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw nl(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[m,y]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw nl(s,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw nl(s,"email-already-in-use",h);if(m==="USER_DISABLED")throw nl(s,"user-disabled",h);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw cy(s,w,y);bn(s,w)}}catch(l){if(l instanceof cr)throw l;bn(s,"network-request-failed",{message:String(l)})}}async function kC(s,e,n,i,l={}){const c=await Ps(s,e,n,i,l);return"mfaPendingCredential"in c&&bn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function hy(s,e,n,i){const l=`${e}${n}?${i}`,c=s,h=c.config.emulator?qu(s.config,l):`${s.config.apiScheme}://${l}`;return NC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class IC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(hn(this.auth,"network-request-failed")),EC.get())})}}function nl(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=hn(s,e,i);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(s,e){return Ps(s,"POST","/v1/accounts:delete",e)}async function wl(s,e){return Ps(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(s,e=!1){const n=ur(s),i=await n.getIdToken(e),l=Qu(i);ge(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,h=c?.sign_in_provider;return{claims:l,token:i,authTime:ki(Kc(l.auth_time)),issuedAtTime:ki(Kc(l.iat)),expirationTime:ki(Kc(l.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Kc(s){return Number(s)*1e3}function Qu(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return sl("JWT malformed, contained fewer than 3 sections"),null;try{const l=cl(n);return l?JSON.parse(l):(sl("Failed to decode base64 JWT payload"),null)}catch(l){return sl("Caught error parsing JWT payload as JSON",l?.toString()),null}}function nm(s){const e=Qu(s);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof cr&&RC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function RC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ki(this.lastLoginAt),this.creationTime=ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(s){const e=s.auth,n=await s.getIdToken(),i=await Ai(s,wl(e,{idToken:n}));ge(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?fy(l.providerUserInfo):[],h=AC(s.providerData,c),p=s.isAnonymous,m=!(s.email&&l.passwordHash)&&!h?.length,y=p?m:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new mu(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function jC(s){const e=ur(s);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AC(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function fy(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(s,e){const n=await dy(s,{},async()=>{const i=ks({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,h=await hy(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return s.emulatorConfig&&Es(s.emulatorConfig.host)&&(m.credentials="include"),uy.fetch()(h,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LC(s,e){return Ps(s,"POST","/v2/accounts:revokeToken",Yu(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=nm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await OC(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,h=new ms;return i&&(ge(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(ge(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),c&&(ge(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ms,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(s,e){ge(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class nn{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new PC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new mu(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bC(this,e)}reload(){return jC(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Ai(this,TC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:_,emailVerified:x,isAnonymous:R,providerData:F,stsTokenManager:H}=n;ge(_&&H,e,"internal-error");const b=ms.fromJSON(this.name,H);ge(typeof _=="string",e,"internal-error"),Jn(i,e.name),Jn(l,e.name),ge(typeof x=="boolean",e,"internal-error"),ge(typeof R=="boolean",e,"internal-error"),Jn(c,e.name),Jn(h,e.name),Jn(p,e.name),Jn(m,e.name),Jn(y,e.name),Jn(w,e.name);const V=new nn({uid:_,auth:e,email:l,emailVerified:x,displayName:i,isAnonymous:R,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:b,createdAt:y,lastLoginAt:w});return F&&Array.isArray(F)&&(V.providerData=F.map(Q=>({...Q}))),m&&(V._redirectEventId=m),V}static async _fromIdTokenResponse(e,n,i=!1){const l=new ms;l.updateFromServerResponse(n);const c=new nn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Sl(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];ge(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?fy(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!c?.length,p=new ms;p.updateFromIdToken(i);const m=new nn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new mu(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=new Map;function En(s){Rn(s instanceof Function,"Expected a class definition");let e=rm.get(s);return e?(Rn(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,rm.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}py.type="NONE";const sm=py;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(s,e,n){return`firebase:${s}:${e}:${n}`}class gs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=il(this.userKey,l.apiKey,c),this.fullPersistenceKey=il("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wl(this.auth,{idToken:e}).catch(()=>{});return n?nn._fromGetAccountInfoResponse(this.auth,n,e):null}return nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new gs(En(sm),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||En(sm);const h=il(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(h);if(w){let _;if(typeof w=="string"){const x=await wl(e,{idToken:w}).catch(()=>{});if(!x)break;_=await nn._fromGetAccountInfoResponse(e,x,w)}else _=nn._fromJSON(e,w);y!==c&&(p=_),c=y;break}}catch{}const m=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new gs(c,e,i):(c=m[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new gs(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(my(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xy(e))return"Blackberry";if(wy(e))return"Webos";if(gy(e))return"Safari";if((e.includes("chrome/")||yy(e))&&!e.includes("edge/"))return"Chrome";if(_y(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function my(s=Nt()){return/firefox\//i.test(s)}function gy(s=Nt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yy(s=Nt()){return/crios\//i.test(s)}function vy(s=Nt()){return/iemobile/i.test(s)}function _y(s=Nt()){return/android/i.test(s)}function xy(s=Nt()){return/blackberry/i.test(s)}function wy(s=Nt()){return/webos/i.test(s)}function Ju(s=Nt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function DC(s=Nt()){return Ju(s)&&!!window.navigator?.standalone}function MC(){return ox()&&document.documentMode===10}function Sy(s=Nt()){return Ju(s)||_y(s)||wy(s)||xy(s)||/windows phone/i.test(s)||vy(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(s,e=[]){let n;switch(s){case"Browser":n=im(Nt());break;case"Worker":n=`${im(Nt())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Is}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((h,p)=>{try{const m=e(c);h(m)}catch(m){p(m)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(s,e={}){return Ps(s,"GET","/v2/passwordPolicy",Yu(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=6;class zC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$C,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new om(this),this.idTokenSubscription=new om(this),this.beforeStateQueue=new UC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ay,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wl(this,{idToken:e}),i=await nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(un(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(br(this));const n=e?ur(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FC(this),n=new zC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await LC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await gs.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,l);return()=>{h=!0,m()}}else{const m=e.addObserver(n);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_C(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xu(s){return ur(s)}class om{constructor(e){this.auth=e,this.observer=null,this.addObserver=gx(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WC(s){Zu=s}function HC(s){return Zu.loadJS(s)}function VC(){return Zu.gapiScript}function KC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s,e){const n=Eu(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Rr(c,e??{}))return l;bn(l,"already-initialized")}return n.initialize({options:e})}function qC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(En);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function YC(s,e,n){const i=Xu(s);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=Ny(e),{host:h,port:p}=QC(e),m=p===null?"":`:${p}`,y={url:`${c}//${h}${m}/`},w=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(Rr(y,i.config.emulator)&&Rr(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Es(h)?(Fm(`${c}//${h}${m}`),$m("Auth",!0)):JC()}function Ny(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function QC(s){const e=Ny(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:lm(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:lm(h)}}}function lm(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function JC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(s,e){return kC(s,"POST","/v1/accounts:signInWithIdp",Yu(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="http://localhost";class Lr extends Ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const h=new Lr(i,l);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return ys(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ys(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ys(e,n)}buildRequest(){const e={requestUri:XC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ks(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends ky{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends zi{constructor(){super("facebook.com")}static credential(e){return Lr._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return er.credential(n,i)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends zi{constructor(){super("github.com")}static credential(e){return Lr._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends zi{constructor(){super("twitter.com")}static credential(e,n){return Lr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return nr.credential(n,i)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await nn._fromIdTokenResponse(e,i,l),h=am(i);return new Ss({user:c,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=am(i);return new Ss({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function am(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends cr{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Cl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Cl(e,n,i,l)}}function Iy(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Cl._fromErrorAndOperation(s,c,e,i):c})}async function ZC(s,e,n=!1){const i=await Ai(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Ss._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(s,e,n=!1){const{auth:i}=s;if(un(i.app))return Promise.reject(br(i));const l="reauthenticate";try{const c=await Ai(s,Iy(i,l,e,s),n);ge(c.idToken,i,"internal-error");const h=Qu(c.idToken);ge(h,i,"internal-error");const{sub:p}=h;return ge(s.uid===p,i,"user-mismatch"),Ss._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&bn(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(s,e,n=!1){if(un(s.app))return Promise.reject(br(s));const i="signIn",l=await Iy(s,i,e),c=await Ss._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(c.user),c}function nN(s,e,n,i){return ur(s).onIdTokenChanged(e,n,i)}function rN(s,e,n){return ur(s).beforeAuthStateChanged(e,n)}const Nl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nl,"1"),this.storage.removeItem(Nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=1e3,iN=10;class by extends Ty{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);MC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,iN):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},sN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}by.type="LOCAL";const oN=by;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Ty{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ry.type="SESSION";const Py=Ry;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Ml(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(n.origin,c)),m=await lN(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ml.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,h;return new Promise((p,m)=>{const y=ed("",20);l.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(_){const x=_;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(w),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function cN(s){fn().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function uN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dN(){return navigator?.serviceWorker?.controller||null}function hN(){return jy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="firebaseLocalStorageDb",fN=1,El="firebaseLocalStorage",Oy="fbase_key";class Bi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ul(s,e){return s.transaction([El],e?"readwrite":"readonly").objectStore(El)}function pN(){const s=indexedDB.deleteDatabase(Ay);return new Bi(s).toPromise()}function gu(){const s=indexedDB.open(Ay,fN);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(El,{keyPath:Oy})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(El)?e(i):(i.close(),await pN(),e(await gu()))})})}async function cm(s,e,n){const i=Ul(s,!0).put({[Oy]:e,value:n});return new Bi(i).toPromise()}async function mN(s,e){const n=Ul(s,!1).get(e),i=await new Bi(n).toPromise();return i===void 0?null:i.value}function um(s,e){const n=Ul(s,!0).delete(e);return new Bi(n).toPromise()}const gN=800,yN=3;class Ly{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>yN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ml._getInstance(hN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uN(),!this.activeServiceWorker)return;this.sender=new aN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gu();return await cm(e,Nl,"1"),await um(e,Nl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>cm(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>mN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>um(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ul(l,!1).getAll();return new Bi(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ly.type="LOCAL";const vN=Ly;new $i(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(s,e){return e?En(e):(ge(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xN(s){return tN(s.auth,new td(s),s.bypassAuthState)}function wN(s){const{auth:e,user:n}=s;return ge(n,e,"internal-error"),eN(n,new td(s),s.bypassAuthState)}async function SN(s){const{auth:e,user:n}=s;return ge(n,e,"internal-error"),ZC(n,new td(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xN;case"linkViaPopup":case"linkViaRedirect":return SN;case"reauthViaPopup":case"reauthViaRedirect":return wN;default:bn(this.auth,"internal-error")}}resolve(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new $i(2e3,1e4);class hs extends Dy{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Rn(this.filter.length===1,"Popup operations only handle one event");const e=ed();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CN.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="pendingRedirect",ol=new Map;class EN extends Dy{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ol.get(this.auth._key());if(!e){try{const i=await kN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ol.set(this.auth._key(),e)}return this.bypassAuthState||ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kN(s,e){const n=bN(e),i=TN(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function IN(s,e){ol.set(s._key(),e)}function TN(s){return En(s._redirectPersistence)}function bN(s){return il(NN,s.config.apiKey,s.name)}async function RN(s,e,n=!1){if(un(s.app))return Promise.reject(br(s));const i=Xu(s),l=_N(i,e),h=await new EN(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=600*1e3;class jN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!My(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PN&&this.cachedEventUids.clear(),this.cachedEventUids.has(dm(e))}saveEventToCache(e){this.cachedEventUids.add(dm(e)),this.lastProcessedEventTime=Date.now()}}function dm(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function My({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function AN(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return My(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(s,e={}){return Ps(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DN=/^https?/;async function MN(s){if(s.config.emulator)return;const{authorizedDomains:e}=await ON(s);for(const n of e)try{if(UN(n))return}catch{}bn(s,"unauthorized-domain")}function UN(s){const e=pu(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!DN.test(n))return!1;if(LN.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new $i(3e4,6e4);function hm(){const s=fn().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function $N(s){return new Promise((e,n)=>{function i(){hm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hm(),n(hn(s,"network-request-failed"))},timeout:FN.get()})}if(fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fn().gapi?.load)i();else{const l=KC("iframefcb");return fn()[l]=()=>{gapi.load?i():n(hn(s,"network-request-failed"))},HC(`${VC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ll=null,e})}let ll=null;function zN(s){return ll=ll||$N(s),ll}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new $i(5e3,15e3),WN="__/auth/iframe",HN="emulator/auth/iframe",VN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GN(s){const e=s.config;ge(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?qu(e,HN):`https://${s.config.authDomain}/${WN}`,i={apiKey:e.apiKey,appName:s.name,v:Is},l=KN.get(s.config.apiHost);l&&(i.eid=l);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${ks(i).slice(1)}`}async function qN(s){const e=await zN(s),n=fn().gapi;return ge(n,s,"internal-error"),e.open({where:document.body,url:GN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VN,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const h=hn(s,"network-request-failed"),p=fn().setTimeout(()=>{c(h)},BN.get());function m(){fn().clearTimeout(p),l(i)}i.ping(m).then(m,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QN=500,JN=600,XN="_blank",ZN="http://localhost";class fm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eE(s,e,n,i=QN,l=JN){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m={...YN,width:i.toString(),height:l.toString(),top:c,left:h},y=Nt().toLowerCase();n&&(p=yy(y)?XN:n),my(y)&&(e=e||ZN,m.scrollbars="yes");const w=Object.entries(m).reduce((x,[R,F])=>`${x}${R}=${F},`,"");if(DC(y)&&p!=="_self")return tE(e||"",p),new fm(null);const _=window.open(e||"",p,w);ge(_,s,"popup-blocked");try{_.focus()}catch{}return new fm(_)}function tE(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="__/auth/handler",rE="emulator/auth/handler",sE=encodeURIComponent("fac");async function pm(s,e,n,i,l,c){ge(s.config.authDomain,s,"auth-domain-config-required"),ge(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Is,eventId:l};if(e instanceof ky){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",Qc(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))h[w]=_}if(e instanceof zi){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await s._getAppCheckToken(),y=m?`#${sE}=${encodeURIComponent(m)}`:"";return`${iE(s)}?${ks(p).slice(1)}${y}`}function iE({config:s}){return s.emulator?qu(s,rE):`https://${s.authDomain}/${nE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="webStorageSupport";class oE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Py,this._completeRedirectFn=RN,this._overrideRedirectResult=IN}async _openPopup(e,n,i,l){Rn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await pm(e,n,i,pu(),l);return eE(e,c,ed())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await pm(e,n,i,pu(),l);return cN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Rn(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await qN(e),i=new jN(e);return n.register("authEvent",l=>(ge(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gc,{type:Gc},l=>{const c=l?.[0]?.[Gc];c!==void 0&&n(!!c),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Sy()||gy()||Ju()}}const lE=oE;var mm="@firebase/auth",gm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uE(s){_s(new Pr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;ge(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cy(s)},y=new BC(i,l,c,m);return qC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),_s(new Pr("auth-internal",e=>{const n=Xu(e.getProvider("auth").getImmediate());return(i=>new aE(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(mm,gm,cE(s)),or(mm,gm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=300,hE=Um("authIdTokenMaxAge")||dE;let ym=null;const fE=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>hE)return;const l=n?.token;ym!==l&&(ym=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function pE(s=Km()){const e=Eu(s,"auth");if(e.isInitialized())return e.getImmediate();const n=GC(s,{popupRedirectResolver:lE,persistence:[vN,oN,Py]}),i=Um("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=fE(c.toString());rN(n,h,()=>h(n.currentUser)),nN(n,p=>h(p))}}const l=Dm("auth");return l&&YC(n,`http://${l}`),n}function mE(){return document.getElementsByTagName("head")?.[0]??document}WC({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const c=hn("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",mE().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uE("Browser");const gE={apiKey:"your-api-key",authDomain:"finder-webapp.firebaseapp.com",databaseURL:"https://finder-webapp-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"finder-webapp",storageBucket:"finder-webapp.firebasestorage.app",messagingSenderId:"your-messaging-sender-id",appId:"your-app-id"},Uy=Vm(gE);mC(Uy);pE(Uy);const yE=s=>{let e=s.trim();return/^https?:\/\//i.test(e)||(e=`https://${e}`),e.replace(/\/+$/,"")},vE=()=>{const s=yE("https://finder-webapp.onrender.com");return s||(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://127.0.0.1:5000":"https://finder-webapp.onrender.com")},ve=s=>{const e=vE(),n=(s||"").replace(/^\/+/,"");return`${e}/${n}`};function Wi({userEmail:s,userName:e}){const n=pn(),i=bl(),l=s||localStorage.getItem("finder_email")||"",c=p=>p==="/dashboard"?i.pathname==="/dashboard":i.pathname.startsWith(p),h=p=>`${c(p)?"text-finder-blue-600":"text-gray-700 hover:text-finder-blue-600"} cursor-pointer transition-colors`;return d.jsxs("header",{className:"bg-white px-8 py-4 shadow flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center",children:d.jsx("img",{src:Rl,alt:"Finder Logo",className:"h-8 cursor-pointer",onClick:()=>n("/dashboard")})}),d.jsxs("nav",{className:"flex-1 flex justify-center items-center space-x-6 font-medium",children:[d.jsx("span",{className:h("/dashboard"),onClick:()=>n("/dashboard"),children:"Home"}),d.jsx("span",{className:h("/find-opportunities"),onClick:()=>n("/find-opportunities"),children:"Find Opportunity"}),d.jsxs("button",{className:"border px-4 py-2 rounded-xl text-white flex items-center",style:{backgroundColor:"#115CBA",borderColor:"#115CBA"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#0E4A9A",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#115CBA",onClick:()=>n("/post-opportunity"),children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Post an Opportunity"]})]}),d.jsxs("div",{className:"flex items-center ml-6 gap-3",children:[d.jsx(H_,{userEmail:l}),d.jsx(B_,{userName:e,userEmail:l,size:"sm"})]})]})}function _E(){const[s,e]=P.useState({title:"",description:"",domain:"",type:"",startDate:"",endDate:"",hoursPerWeek:"",roles:[],skills:[],email:localStorage.getItem("finder_email")||""}),[n,i]=P.useState(""),[l,c]=P.useState(""),h=pn(),p=localStorage.getItem("finder_email")||"";P.useEffect(()=>{p&&(async()=>{try{const Q=await(await fetch(ve("employees"))).json(),pe=(Q.employees||Q||[]).find(Ee=>(Ee.email||"").trim().toLowerCase()===p.trim().toLowerCase());pe&&c(pe.name||"")}catch(V){console.error("Error fetching user name:",V)}})()},[p]);const m=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],y=["Proposal / POV","CS&D Operations","Domain / Industry Operations","Other"],w=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"],_=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],x=["Research","Data Analysis","Presentation","Storyboarding","Stakeholder management","Slide Making","Dashboarding","Excel Modelling","PMO"],R=b=>{e({...s,[b.target.name]:b.target.value}),b.target.name==="email"&&localStorage.setItem("finder_email",b.target.value)},F=(b,V)=>{const Q=b.target.value;e(ce=>{const pe=ce[V];return pe.includes(Q)?{...ce,[V]:pe.filter(Ee=>Ee!==Q)}:{...ce,[V]:[...pe,Q]}})},H=async b=>{b.preventDefault(),i("");const V={title:"Opportunity Title",description:"Description",type:"Type of FI",startDate:"Start Date",endDate:"End Date",hoursPerWeek:"Number of Hours per Week"},Q=[];if(Object.keys(V).forEach(ye=>{(!s[ye]||s[ye].toString().trim()==="")&&Q.push(V[ye])}),Q.length>0){i(`Please fill in the following mandatory fields: ${Q.join(", ")}`);return}const ce=new Date;ce.setHours(0,0,0,0);const pe=new Date(s.startDate),Ee=new Date(s.endDate);if(pe<ce){i("Start date must be today or a future date.");return}if(Ee<pe){i("End date must be on or after the start date.");return}const we={...s,email:localStorage.getItem("finder_email")||""};try{const De=await(await fetch(ve("opportunities"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)})).json();De.success?h("/dashboard"):i(De.message||"Failed to post opportunity")}catch{i("Network error. Please try again.")}};return d.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[d.jsx(Wi,{userEmail:p,userName:l}),d.jsxs("div",{className:"max-w-6xl mx-auto mt-10",children:[d.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-8 text-center flex items-center justify-center gap-3",children:["Let's",d.jsx("img",{src:Rl,alt:"FInder",className:"h-6 md:h-8 inline-block -mt-1"}),"your next resource!"]}),d.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white p-8 rounded-2xl shadow",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block font-semibold mb-1",children:["Opportunity Title",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{name:"title",type:"text",placeholder:"e.g. RFP Support",value:s.title,onChange:R,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4"}),d.jsxs("label",{className:"block font-semibold mb-1",children:["Description",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("textarea",{name:"description",placeholder:"Enter Brief Summary...",value:s.description,onChange:R,maxLength:500,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 h-32"}),d.jsxs("div",{className:"flex gap-4 mb-4",children:[d.jsxs("div",{className:"w-1/2",children:[d.jsx("label",{className:"block font-semibold mb-1",children:"Domain"}),d.jsxs("select",{name:"domain",value:s.domain,onChange:R,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[d.jsx("option",{value:"",children:"Select Domain"}),m.map(b=>d.jsx("option",{value:b,children:b},b))]})]}),d.jsxs("div",{className:"w-1/2",children:[d.jsxs("label",{className:"block font-semibold mb-1",children:["Type of FI",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("select",{name:"type",value:s.type,onChange:R,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[d.jsx("option",{value:"",children:"Select Type of FI"}),y.map(b=>d.jsx("option",{value:b,children:b},b))]})]})]}),d.jsxs("div",{className:"flex gap-4 mb-4",children:[d.jsxs("div",{className:"w-1/2",children:[d.jsx("label",{className:"block font-semibold mb-1",children:"Industry"}),d.jsxs("select",{name:"industry",value:s.industry||"",onChange:R,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[d.jsx("option",{value:"",children:"Select Industry"}),w.map(b=>d.jsx("option",{value:b,children:b},b))]})]}),d.jsxs("div",{className:"w-1/2",children:[d.jsxs("label",{className:"block font-semibold mb-1",children:["Start Date",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{name:"startDate",type:"date",value:s.startDate,onChange:R,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]})]}),d.jsxs("div",{className:"flex gap-4 mb-4",children:[d.jsxs("div",{className:"w-1/2",children:[d.jsxs("label",{className:"block font-semibold mb-1",children:["End Date",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{name:"endDate",type:"date",value:s.endDate,onChange:R,min:s.startDate||new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]}),d.jsxs("div",{className:"w-1/2",children:[d.jsxs("label",{className:"block font-semibold mb-1",children:["No. of Hours per Week",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{name:"hoursPerWeek",type:"number",placeholder:"Enter Number of hours per week required",value:s.hoursPerWeek,onChange:R,className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block font-semibold mb-1",children:"Role Required"}),d.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:_.map(b=>d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",value:b,checked:s.roles.includes(b),onChange:V=>F(V,"roles"),className:"mr-2"}),b]},b))}),d.jsx("label",{className:"block font-semibold mb-1",children:"Skills Required"}),d.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:x.map(b=>d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",value:b,checked:s.skills.includes(b),onChange:V=>F(V,"skills"),className:"mr-2"}),b]},b))}),n&&d.jsx("div",{className:"text-red-600 mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:n}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-sm text-gray-500",children:[d.jsx("span",{className:"text-red-500",children:"*"})," Indicates mandatory field"]})}),d.jsx("button",{type:"submit",className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium",children:"Submit"})]})]})]})]})}const xE=["All","Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],wE=["All","Proposal / POV","Client Operations","Domain / Industry Operations","Other"],SE=["All","Open","Closed","Applied","Not Interested"];function CE(){const[s,e]=P.useState([]),[n,i]=P.useState([]),[l,c]=P.useState("All"),[h,p]=P.useState("All"),[m,y]=P.useState("All"),[w,_]=P.useState(!0),[x,R]=P.useState(null),[F,H]=P.useState(!1),[b,V]=P.useState(!1),[Q,ce]=P.useState(null),[pe,Ee]=P.useState(""),we=pn(),ye=localStorage.getItem("finder_email")||"";P.useEffect(()=>{Promise.all([fetch(ve("opportunities")).then(O=>O.json()),fetch(ve("employees")).then(O=>O.json())]).then(([O,se])=>{console.log("Fetched opportunities:",O),console.log("Fetched employees:",se),O.success&&e(O.opportunities);const Se=se.employees||se||[];i(Se);const K=Se.find(X=>(X.email||"").trim().toLowerCase()===ye.trim().toLowerCase());K&&Ee(K.name||"")}).catch(O=>{console.error("Error fetching data:",O),e([]),i([])})},[]);const De={};n.forEach(O=>{De[O.email]=O.name});const ze=async O=>{try{if((await fetch(ve(`opportunities/${O}/apply`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ye})})).ok){const Se=n.find(L=>(L.email||"").trim().toLowerCase()===ye.trim().toLowerCase()),K=Se?Se.name:"Someone",X=s.find(L=>L.id===O);X&&X.email&&X.email!==ye&&jt.notifyOpportunityPoster(X.email,K,X.title,O);const D=await(await fetch(ve("opportunities"))).json();D.success&&e(D.opportunities),H(!1)}}catch(se){console.error("Apply error:",se)}},oe=async O=>{try{if((await fetch(ve(`opportunities/${O}/not_interested`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ye})})).ok){const K=await(await fetch(ve("opportunities"))).json();K.success&&e(K.opportunities),H(!1)}}catch(se){console.error("Mark not interested error:",se)}},Ge=async O=>{try{const se=n.find(Se=>(Se.email||"").trim().toLowerCase()===O.trim().toLowerCase());se&&(ce(se),V(!0))}catch(se){console.error("Error fetching profile:",se)}};let Me=s.filter(O=>{if(l!=="All"&&O.domain!==l||h!=="All"&&O.type!==h)return!1;if(m!=="All"){if(m==="Open")return O.status==="open";if(m==="Closed")return O.status==="closed";if(m==="Applied")return O.applied&&O.applied.includes(ye);if(m==="Not Interested")return O.not_interested&&O.not_interested.includes(ye)}return!0});return!w&&m!=="Not Interested"&&m!=="Applied"&&(Me=Me.filter(O=>!(O.not_interested&&O.not_interested.includes(ye)))),Me=Me.sort((O,se)=>O.status!=="closed"&&se.status==="closed"?-1:O.status==="closed"&&se.status!=="closed"?1:se.id-O.id),d.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[d.jsx(Wi,{userEmail:ye,userName:pe}),d.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Find Opportunities"}),d.jsx("p",{className:"text-gray-600",children:"Discover and apply for opportunities that match your skills and interests"})]}),d.jsxs("div",{className:"mb-8 bg-white p-6 rounded-xl shadow",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain"}),d.jsx("select",{value:l,onChange:O=>c(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:xE.map(O=>d.jsx("option",{value:O,children:O},O))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),d.jsx("select",{value:h,onChange:O=>p(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:wE.map(O=>d.jsx("option",{value:O,children:O},O))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsx("select",{value:m,onChange:O=>y(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:SE.map(O=>d.jsx("option",{value:O,children:O},O))})]}),d.jsx("div",{className:"flex items-end",children:d.jsx("button",{onClick:()=>{c("All"),p("All"),y("All")},className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium",children:"Clear Filters"})})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:w,onChange:O=>_(O.target.checked),className:"rounded border-gray-300"}),d.jsx("span",{className:"text-gray-600 font-medium",children:"Show not interested"})]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Me.map((O,se)=>{const Se=O.applied&&O.applied.includes(ye),K=O.not_interested&&O.not_interested.includes(ye),X=O.status==="closed",M=O.application_statuses&&O.application_statuses[ye],D=K||X;return d.jsxs("div",{className:`bg-white p-6 rounded-xl shadow cursor-pointer hover:shadow-lg transition-shadow ${D?"opacity-50 bg-gray-100":""}`,onClick:()=>{R(O),H(!0)},children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("h3",{className:`font-bold text-lg flex-1 ${D?"text-gray-500":""}`,children:O.title}),d.jsxs("div",{className:"flex gap-1",children:[O.status==="closed"?d.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:"Closed"}):d.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded-full",children:"Open"}),Se&&!M&&d.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded-full",children:"Applied"}),M==="accepted"&&d.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded-full",children:"Accepted"}),M==="rejected"&&d.jsx("span",{className:"px-2 py-1 bg-red-600 text-white text-xs rounded-full",children:"Not Considered"}),K&&d.jsx("span",{className:"px-2 py-1 bg-gray-500 text-white text-xs rounded-full",children:"Not Interested"})]})]}),d.jsx("p",{className:`text-gray-600 text-sm mb-4 line-clamp-2 ${D?"text-gray-400":""}`,children:O.description}),d.jsxs("div",{className:`text-right text-xs text-gray-500 ${D?"text-gray-400":""}`,children:["Posted by: ",De[O.email]||"Unknown User"]})]},se)})}),Me.length===0&&d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-500 text-lg",children:"No opportunities found matching your criteria."})})]}),F&&x&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:x.title}),d.jsx("div",{className:"flex items-center gap-2",children:x.status==="closed"?d.jsx("span",{className:"px-3 py-1 bg-red-500 text-white text-sm rounded-full",children:"Closed"}):d.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"})})]}),d.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"space-y-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),d.jsx("p",{className:"text-gray-600",children:x.description||"-"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),d.jsx("p",{className:"text-gray-600",children:x.domain||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Type"}),d.jsx("p",{className:"text-gray-600",children:x.type||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),d.jsx("p",{className:"text-gray-600",children:x.industry||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Hours per Week"}),d.jsx("p",{className:"text-gray-600",children:x.hoursPerWeek||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Start Date"}),d.jsx("p",{className:"text-gray-600",children:x.startDate||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"End Date"}),d.jsx("p",{className:"text-gray-600",children:x.endDate||"-"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),x.roles&&x.roles.length>0?d.jsx("div",{className:"flex flex-wrap gap-2",children:x.roles.map((O,se)=>d.jsx("span",{className:"px-2 py-1 bg-finder-blue-100 text-finder-blue-800 text-sm rounded",children:O},se))}):d.jsx("p",{className:"text-gray-600",children:"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),x.skills&&x.skills.length>0?d.jsx("div",{className:"flex flex-wrap gap-2",children:x.skills.map((O,se)=>d.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded",children:O},se))}):d.jsx("p",{className:"text-gray-600",children:"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Posted by"}),d.jsx("p",{className:"text-finder-blue-600 cursor-pointer hover:underline",onClick:()=>Ge(x.email),children:De[x.email]||"Unknown User"})]})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:x.email===ye?d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"You posted this opportunity"}),d.jsx("p",{className:"text-gray-500 text-sm",children:"View and manage this opportunity from your dashboard"})]}),d.jsx("button",{onClick:()=>we("/dashboard",{state:{tab:"posted"}}),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Go to Dashboard"})]}):(()=>{const O=x.applied&&x.applied.includes(ye),se=x.not_interested&&x.not_interested.includes(ye),Se=x.application_statuses&&x.application_statuses[ye];return Se==="accepted"?d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"mb-4",children:[d.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium",children:" Application Status"}),d.jsx("p",{className:"text-green-600 text-sm mt-2 font-semibold",children:"Accepted"})]})}):Se==="rejected"?d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"mb-4",children:[d.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-lg font-medium",children:" Application Status"}),d.jsx("p",{className:"text-red-600 text-sm mt-2 font-semibold",children:"Not Considered"})]})}):O?d.jsx("div",{className:"text-center",children:d.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg",children:"Already Applied"})}):se?d.jsx("div",{className:"text-center",children:d.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg",children:"Marked as Not Interested"})}):x.status==="closed"?d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"mb-4",children:[d.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-gray-500 text-white rounded-lg font-medium",children:" Opportunity Closed"}),d.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"This opportunity is no longer accepting applications."})]})}):d.jsxs("div",{className:"flex justify-center gap-4",children:[d.jsx("button",{onClick:()=>ze(x.id),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Apply for this Opportunity"}),d.jsx("button",{onClick:()=>oe(x.id),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Mark as not Interested"})]})})()})]})})}),b&&Q&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:d.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),d.jsx("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("div",{className:"w-20 h-20 bg-finder-blue-600 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white text-2xl font-bold",children:Q.name?Q.name.charAt(0).toUpperCase():"U"})})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("p",{className:"text-gray-800 font-semibold",children:Q.name||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("p",{className:"text-gray-800",children:Q.email||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),d.jsx("p",{className:"text-gray-800",children:Q.industry||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),d.jsx("p",{className:"text-gray-800",children:Q.domain||"N/A"})]})]})]})})})]})}const NE="data:image/svg+xml,%3csvg%20width='1127'%20height='287'%20viewBox='0%200%201127%20287'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M298.135%2012.1909H373.838L329.869%20120.011H279.782L298.135%2012.1909Z'%20fill='%23222222'/%3e%3cpath%20d='M535.263%2066.6106C559.988%2066.6106%20581.841%2077.3998%20596.369%2093.9679C586.978%20112.751%20577.586%20131.534%20577.586%20159.709C575.081%20186.096%20576.391%20200.438%20582.282%20225.451C589.064%20243.611%20596.139%20256.199%20615.937%20283.015H540.998V167.931C540.998%20155.696%20537.812%20146.137%20531.44%20139.255C525.068%20132.118%20516.529%20128.55%20505.823%20128.55C494.608%20128.55%20485.814%20132.118%20479.442%20139.255C473.069%20146.137%20469.883%20155.696%20469.883%20167.931V283.015H394.944V68.5223H469.883V99.1096C476.51%2089.4236%20485.432%2081.6493%20496.647%2075.7868C507.862%2069.6693%20520.734%2066.6106%20535.263%2066.6106Z'%20fill='%23222222'/%3e%3cpath%20d='M589.386%20175.578C589.386%20153.402%20593.337%20134.03%20601.238%20117.462C609.395%20100.894%20620.483%2088.1492%20634.502%2079.2279C648.521%2070.3067%20664.07%2065.846%20681.147%2065.846C694.912%2065.846%20707.147%2068.7773%20717.852%2074.6399C728.813%2080.2475%20737.351%2088.0218%20743.469%2097.9626V0.0834961H818.79L817.074%2079.8804C787.377%20111.052%20779.211%20133.71%20779.507%20183.188C783.905%20225.111%20793.667%20246.669%20818.79%20283.015H743.469V253.193C737.606%20263.134%20729.322%20271.035%20718.617%20276.898C707.911%20282.761%20695.294%20285.692%20680.765%20285.692C663.687%20285.692%20648.139%20281.231%20634.12%20272.31C620.355%20263.389%20609.395%20250.644%20601.238%20234.076C593.337%20217.253%20589.386%20197.753%20589.386%20175.578ZM743.851%20175.578C743.851%20161.813%20740.028%20150.981%20732.381%20143.079C724.989%20135.177%20715.813%20131.226%20704.853%20131.226C693.637%20131.226%20684.334%20135.177%20676.942%20143.079C669.55%20150.726%20665.854%20161.559%20665.854%20175.578C665.854%20189.342%20669.55%20200.302%20676.942%20208.459C684.334%20216.361%20693.637%20220.312%20704.853%20220.312C715.813%20220.312%20724.989%20216.361%20732.381%20208.459C740.028%20200.557%20743.851%20189.597%20743.851%20175.578Z'%20fill='%23222222'/%3e%3cpath%20d='M968.933%20136.23C968.933%20166.214%20968.933%20178.493%20968.933%20190.872H866.415C867.18%20202.597%20870.366%20211.391%20875.974%20217.253C881.836%20222.861%20889.228%20225.665%20898.15%20225.665C910.639%20225.665%20919.561%20220.057%20924.913%20208.842H968.553C968.553%20225.126%20968.933%20230.147%20968.933%20248.93C968.933%20260.113%20963.912%20269.124%20949.383%20275.751C934.854%20282.378%20918.796%20285.692%20901.208%20285.692C880.052%20285.692%20861.19%20281.231%20844.622%20272.31C828.309%20263.389%20815.437%20250.644%20806.005%20234.076C796.829%20217.508%20792.241%20198.009%20792.241%20175.578C792.241%20153.147%20796.829%20133.775%20806.005%20117.462C815.182%20100.894%20827.926%2088.1494%20844.24%2079.2282C860.808%2070.3069%20879.797%2065.8463%20901.208%2065.8463C922.364%2065.8463%20941.099%2070.1794%20957.412%2078.8458C972.035%2087.2884%20968.933%2084.5762%20968.933%20108.055C968.933%20131.534%20968.933%20112.751%20968.933%20136.23ZM932.942%20154.549C932.942%20145.373%20929.884%20138.236%20923.766%20133.138C917.649%20127.785%20910.002%20125.109%20900.826%20125.109C891.65%20125.109%20884.13%20127.658%20878.268%20132.756C872.405%20137.599%20868.582%20144.863%20866.798%20154.549H932.942Z'%20fill='%23222222'/%3e%3cpath%20d='M1057.8%20106.374C1066.21%2094.1391%201076.4%2084.4532%201088.38%2077.3162C1100.36%2070.1791%201113.24%2066.6106%201127%2066.6106V146.52H1105.97C1089.66%20146.52%201077.55%20149.706%201069.65%20156.078C1061.75%20162.451%201057.8%20173.539%201057.8%20189.342V283.015H982.858V68.5223H1057.8V106.374Z'%20fill='%23222222'/%3e%3cpath%20d='M154.466%2013.4655V73.1106H74.9387V120.521H137.896V177.489H74.9387V286.497H0V13.4655L154.466%2013.4655Z'%20fill='%23115CBA'/%3e%3cpath%20d='M253.575%20286.497V98.6637H178.441V286.497H253.575Z'%20fill='%23115CBA'/%3e%3ccircle%20cx='216.008'%20cy='51.7054'%20r='37.5666'%20fill='%23115CBA'/%3e%3c/svg%3e";function EE(){const{id:s}=S_(),[e,n]=P.useState(null),[i,l]=P.useState(""),[c,h]=P.useState(""),[p,m]=P.useState(""),[y,w]=P.useState([]),[_,x]=P.useState(!1),[R,F]=P.useState({}),[H,b]=P.useState(!1),[V,Q]=P.useState(null),[ce,pe]=P.useState(()=>{try{const K=localStorage.getItem("finder_applicant_statuses");return K?JSON.parse(K):{}}catch{return{}}}),Ee=pn(),we=localStorage.getItem("finder_email")||"";P.useEffect(()=>{localStorage.setItem("finder_applicant_statuses",JSON.stringify(ce))},[ce]),P.useEffect(()=>{Promise.all([fetch(ve(`opportunities/${s}`)).then(K=>K.json()),fetch(ve("employees")).then(K=>K.json())]).then(([K,X])=>{if(K.success){const L=K.opportunity,N=X.employees||X||[],j={};N.forEach(ae=>{j[ae.email]=ae.name});const ie={...L,applicants:(L.applied||[]).map(ae=>({email:ae,name:j[ae]||"Unknown User"})),postedBy:j[L.email]||"Unknown User"};n(ie),w(N),console.log(" Server opportunity data:",L),console.log(" Server application_statuses:",L.application_statuses),L.application_statuses&&pe(ae=>{const xe={...ae};return Object.entries(L.application_statuses).forEach(([fe,Re])=>{const E=`${s}-${fe}`;console.log(` Mapping server status: ${fe} (${Re}) -> statusKey: ${E}`),Re==="accepted"?(xe[E]="confirmed",console.log(` Set ${E} = confirmed (from server)`)):Re==="rejected"&&(xe[E]="rejected",console.log(` Set ${E} = rejected (from server)`))}),console.log(" Final applicantStatuses after server sync:",xe),xe})}else l("Opportunity not found");const D=(X.employees||X||[]).find(L=>(L.email||"").trim().toLowerCase()===we.trim().toLowerCase());D&&m(D.name||"")}).catch(()=>l("Error fetching opportunity"))},[s,we]);const ye=e&&(e.email||"").trim().toLowerCase()===we.trim().toLowerCase(),De=async K=>{h("");const M=await(await fetch(ve(`opportunities/${s}/${K}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:we})})).json();if(M.success){if(K==="apply"&&e&&e.email&&e.email!==we)try{const L=await(await fetch(ve("employees"))).json(),j=(L.employees||L||[]).find(ae=>(ae.email||"").trim().toLowerCase()===we.trim().toLowerCase()),ie=j?j.name:"Someone";jt.notifyOpportunityPoster(e.email,ie,e.title,s)}catch(D){console.error("Error sending notification:",D)}h(K==="apply"?"Applied successfully!":"Marked as not interested.")}else h(M.message||"Action failed")},ze=async(K,X,M,D)=>{console.log(" FUNCTION CALLED handleAcceptReject"),console.log(` Frontend Accept/Reject called - oppId: ${K}, applicantEmail: ${X}, action: ${D}`),alert(`DEBUG: handleAcceptReject called with oppId: ${K}, email: ${X}, action: ${D}`);const L=D==="accept"?"accept":"reject",N=`${L.charAt(0).toUpperCase()+L.slice(1)} Candidate`,j=`${L.charAt(0).toUpperCase()+L.slice(1)} "${M}" for this role?`;Me(N,j,async()=>{try{const ie=`${K}-${X}`;console.log(` Setting local status key: ${ie} to ${D==="accept"?"confirmed":"rejected"}`),pe(fe=>({...fe,[ie]:D==="accept"?"confirmed":"rejected"})),e&&(D==="accept"?jt.notifyApplicationAccepted(X,e.title,s):jt.notifyApplicationRejected(X,e.title,s));const ae=ve(`opportunities/${K}/${D}`);console.log(` Making API call to: ${ae}`),(await fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantEmail:X})})).ok?console.log(` Successfully ${D}ed applicant on server`):console.log(" Server update failed, but local status maintained")}catch(ie){console.error(" Accept/Reject error:",ie)}})},oe=async(K,X)=>{Me("Close Opportunity",`Are you sure you want to close the opportunity "${X}"?`,async()=>{try{const M=e?e.applied||[]:[];if((await fetch(ve(`opportunities/${K}/close`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:we})})).ok){M.forEach(N=>{N!==we&&jt.notifyOpportunityClosed(N,X,K)});const L=await fetch(ve(`opportunities/${s}`)).then(N=>N.json());if(L.success){const N={};y.forEach(ie=>{N[ie.email]=ie.name});const j={...L.opportunity,applicants:(L.opportunity.applied||[]).map(ie=>({email:ie,name:N[ie]||"Unknown User"})),postedBy:N[L.opportunity.email]||"Unknown User"};n(j)}}}catch(M){console.error("Error closing opportunity:",M)}})},Ge=async(K,X)=>{Me("Reopen Opportunity",`Are you sure you want to reopen the opportunity "${X}"?`,async()=>{try{if((await fetch(ve(`opportunities/${K}/reopen`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:we})})).ok){const D=await fetch(ve(`opportunities/${s}`)).then(L=>L.json());if(D.success){const L={};y.forEach(j=>{L[j.email]=j.name});const N={...D.opportunity,applicants:(D.opportunity.applied||[]).map(j=>({email:j,name:L[j]||"Unknown User"})),postedBy:L[D.opportunity.email]||"Unknown User"};n(N)}}}catch(M){console.error("Error reopening opportunity:",M)}})},Me=(K,X,M)=>{F({title:K,message:X,onConfirm:M}),x(!0)},O=()=>{R.onConfirm&&R.onConfirm(),x(!1),F({})},se=()=>{x(!1),F({})},Se=async K=>{try{const X=y.find(M=>(M.email||"").trim().toLowerCase()===K.trim().toLowerCase());X&&(Q(X),b(!0))}catch(X){console.error("Error fetching profile:",X)}};return i?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i}):e?d.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[d.jsx(Wi,{userEmail:we,userName:p}),_&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:R.title}),d.jsx("p",{className:"text-gray-600 mb-6",children:R.message}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx("button",{onClick:se,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:O,className:"px-4 py-2 bg-finder-blue-600 text-white rounded hover:bg-finder-blue-700",children:"Confirm"})]})]})}),H&&V&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:d.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),d.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("div",{className:"w-20 h-20 bg-finder-blue-600 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white text-2xl font-bold",children:V.name?V.name.charAt(0).toUpperCase():"U"})})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("p",{className:"text-gray-800 font-semibold",children:V.name||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("p",{className:"text-gray-800",children:V.email||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),d.jsx("p",{className:"text-gray-800",children:V.industry||"N/A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),d.jsx("p",{className:"text-gray-800",children:V.domain||"N/A"})]})]})]})})}),d.jsxs("div",{className:"max-w-4xl mx-auto mt-10 bg-white p-8 rounded-2xl shadow relative",children:[d.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl font-bold focus:outline-none",onClick:()=>Ee("/find-opportunities"),"aria-label":"Close",children:""}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:e.title}),e.status==="closed"?d.jsx("span",{className:"px-3 py-1 bg-gray-400 text-white text-sm rounded-full",children:"Closed"}):d.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"})]}),d.jsxs("div",{className:"mb-4 text-gray-500 text-sm",children:["Posted by: ",d.jsx("span",{className:"cursor-pointer hover:text-finder-blue-600 underline transition-colors",onClick:()=>Se(e.email),children:e.postedBy})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"mb-4 text-gray-800 border p-4 rounded-xl bg-blue-50",children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),e.description]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-gray-600",children:["Type of FI: ",d.jsx("span",{className:"font-semibold",children:e.type})]}),d.jsxs("div",{className:"text-gray-600",children:["Domain: ",d.jsx("span",{className:"font-semibold",children:e.domain})]}),d.jsxs("div",{className:"text-gray-600",children:["Industry: ",d.jsx("span",{className:"font-semibold",children:e.industry})]}),d.jsxs("div",{className:"text-gray-600",children:["Start Date: ",d.jsx("span",{className:"font-semibold",children:e.startDate})]}),d.jsxs("div",{className:"text-gray-600",children:["End Date: ",d.jsx("span",{className:"font-semibold",children:e.endDate})]}),d.jsxs("div",{className:"text-gray-600",children:["Hours per Week: ",d.jsx("span",{className:"font-semibold",children:e.hoursPerWeek})]})]})]}),d.jsx("div",{children:ye?d.jsxs("div",{children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:["Applicants (",e.applicants?e.applicants.length:0,")"]}),e.applicants&&e.applicants.length>0?d.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.applicants.map((K,X)=>{const M=`${s}-${K.email}`,D=ce[M],L=e.status==="closed";return d.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-800 cursor-pointer hover:text-finder-blue-600 transition-colors",onClick:()=>Se(K.email),children:K.name}),d.jsx("p",{className:"text-sm text-gray-500",children:K.email}),d.jsxs("div",{className:"mt-1 space-y-1",children:[D&&d.jsx("p",{className:`text-sm font-medium ${D==="confirmed"?"text-green-600":"text-red-600"}`,children:D==="confirmed"?" Candidate Confirmed":" Candidate Not Considered"}),!D&&!L&&d.jsx("p",{className:"text-sm text-yellow-600",children:" Pending Decision"})]})]}),!D&&!L&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ze(s,K.email,K.name,"accept"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Accept"}),d.jsx("button",{onClick:()=>ze(s,K.email,K.name,"reject"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Not Considered"})]})]},`${X}-${D||"none"}`)})}):d.jsx("p",{className:"text-gray-500 text-center py-8",children:"No applicants yet"})]}),d.jsx("div",{className:"space-y-3",children:e.status==="closed"?d.jsx("button",{onClick:()=>Ge(s,e.title),className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Reopen Opportunity"}):d.jsx("button",{onClick:()=>oe(s,e.title),className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium",children:"Close Opportunity"})})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"space-y-4",children:[e.roles&&e.roles.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:e.roles.map((K,X)=>d.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:K},X))})]}),e.skills&&e.skills.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:e.skills.map((K,X)=>d.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:K},X))})]})]}),d.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.applied&&e.applied.includes(we)?d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Already Applied"}),c&&d.jsx("p",{className:"mt-2 text-sm text-gray-600",children:c})]}):e.not_interested&&e.not_interested.includes(we)?d.jsx("div",{className:"text-center",children:d.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Marked as Not Interested"})}):e.status==="closed"?d.jsx("div",{className:"text-center",children:d.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Opportunity Closed"})}):d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsx("button",{onClick:()=>De("apply"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Apply for this Opportunity"}),d.jsx("button",{onClick:()=>De("not_interested"),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Mark as not Interested"})]}),c&&d.jsx("p",{className:"mt-3 text-center text-sm text-gray-600",children:c})]})]})})]})]})]}):d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}function kE(){const[s,e]=P.useState({name:"",email:"",password:"",role:"",industry:"",domain:""}),[n,i]=P.useState(""),[l,c]=P.useState(""),h=pn(),p=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],m=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],y=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"],w=x=>{e({...s,[x.target.name]:x.target.value})},_=async x=>{x.preventDefault(),i(""),c("");const F=await(await fetch(ve("register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();F.success?(c("Registration successful! Please login."),setTimeout(()=>h("/"),1500)):i(F.message||"Registration failed")};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:d.jsxs("form",{onSubmit:_,className:"bg-white p-10 rounded-2xl shadow-md w-full max-w-md text-center",children:[d.jsx("div",{className:"mb-6 flex justify-center",children:d.jsx("img",{src:NE,alt:"Finder Logo",className:"h-12"})}),d.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Register"}),d.jsx("input",{name:"name",type:"text",placeholder:"Name",value:s.name,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),d.jsx("input",{name:"email",type:"email",placeholder:"Email",value:s.email,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),d.jsx("input",{name:"password",type:"password",placeholder:"Password",value:s.password,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),d.jsxs("select",{name:"role",value:s.role,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Role"}),m.map(x=>d.jsx("option",{value:x,children:x},x))]}),d.jsxs("select",{name:"industry",value:s.industry,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Industry"}),y.map(x=>d.jsx("option",{value:x,children:x},x))]}),d.jsxs("select",{name:"domain",value:s.domain,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Domain"}),p.map(x=>d.jsx("option",{value:x,children:x},x))]}),n&&d.jsx("div",{className:"text-red-600 mb-2",children:n}),l&&d.jsx("div",{className:"text-green-600 mb-2",children:l}),d.jsx("button",{type:"submit",className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium mb-2",children:"Register"}),d.jsxs("div",{className:"text-sm text-gray-500",children:["Already have an account? ",d.jsx("span",{className:"text-finder-blue-600 cursor-pointer",onClick:()=>h("/"),children:"Login"})]})]})})}function IE(){const[s,e]=P.useState(null),[n,i]=P.useState(!0),[l,c]=P.useState(""),[h,p]=P.useState(!1),[m,y]=P.useState({}),[w,_]=P.useState(!1),[x,R]=P.useState(!1),[F,H]=P.useState(0),[b,V]=P.useState(0),[Q,ce]=P.useState(0),pe=pn(),Ee=localStorage.getItem("finder_email")||"",we=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],ye=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],De=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"];P.useEffect(()=>{oe(),ze()},[]);const ze=async()=>{try{const Se=(await(await fetch(ve("opportunities"))).json()).opportunities||[],K=(Ee||"").trim().toLowerCase(),X=Se.filter(L=>(L.applied||[]).some(j=>(j||"").trim().toLowerCase()===K)),M=Se.filter(L=>(L.email||"").trim().toLowerCase()===K),D=Se.filter(L=>{if(!(L.applied||[]).some(fe=>(fe||"").trim().toLowerCase()===K))return!1;const ae=`${Se.findIndex(fe=>fe.title===L.title&&fe.email===L.email&&fe.description===L.description)}-${Ee}`;return JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}")[ae]==="confirmed"});H(X.length),V(M.length),ce(D.length)}catch(O){console.error("Error fetching opportunity counts:",O)}},oe=async()=>{try{i(!0);const se=await(await fetch(ve("employees"))).json(),K=(se.employees||se||[]).find(X=>(X.email||"").trim().toLowerCase()===Ee.trim().toLowerCase());K?(e(K),y({name:K.name||"",role:K.role||"",industry:K.industry||"",domain:K.domain||""})):c("Profile not found")}catch(O){c("Failed to load profile"),console.error("Error fetching profile:",O)}finally{i(!1)}},Ge=async O=>{O.preventDefault(),_(!0),c(""),R(!1);try{const Se=await(await fetch(ve(`employees/${encodeURIComponent(Ee)}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name,role:m.role,industry:m.industry,domain:m.domain})})).json();Se.success?(e(Se.employee),p(!1),R(!0),setTimeout(()=>R(!1),3e3)):c(Se.message||"Failed to update profile")}catch(se){c("Failed to update profile. Please check your connection and try again."),console.error("Error updating profile:",se)}finally{_(!1)}},Me=O=>{y({...m,[O.target.name]:O.target.value})};return n?d.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):l?d.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),d.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Profile Error"}),d.jsx("p",{className:"text-gray-600 mb-4",children:l}),d.jsx("button",{onClick:()=>pe("/dashboard"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})}):d.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[d.jsx(Wi,{userEmail:Ee,userName:s?.name}),d.jsxs("div",{className:"max-w-4xl mx-auto px-8 py-12",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("div",{className:"relative inline-block mb-4",children:d.jsx("div",{className:"w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg",children:s?.name?s.name.charAt(0).toUpperCase():"U"})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s?.name||"User"}),d.jsx("p",{className:"text-gray-600",children:s?.email})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[d.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Information"}),!h&&d.jsxs("button",{onClick:()=>p(!0),className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]})}),d.jsxs("div",{className:"p-8",children:[x&&d.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",children:" Profile updated successfully!"}),l&&d.jsxs("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:[" ",l]}),h?d.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),d.jsx("input",{type:"text",name:"name",value:m.name,onChange:Me,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{name:"role",value:m.role,onChange:Me,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Role"}),ye.map(O=>d.jsx("option",{value:O,children:O},O))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),d.jsx("input",{type:"email",value:s?.email||"",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 text-gray-500",disabled:!0}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Industry"}),d.jsxs("select",{name:"industry",value:m.industry,onChange:Me,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Industry"}),De.map(O=>d.jsx("option",{value:O,children:O},O))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Domain"}),d.jsxs("select",{name:"domain",value:m.domain,onChange:Me,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select Domain"}),we.map(O=>d.jsx("option",{value:O,children:O},O))]})]})]}),d.jsxs("div",{className:"flex gap-4 pt-4",children:[d.jsx("button",{type:"submit",disabled:w,className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center justify-center",children:w?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"}),d.jsx("button",{type:"button",disabled:w,onClick:()=>{p(!1),c(""),R(!1),y({name:s?.name||"",role:s?.role||"",industry:s?.industry||"",domain:s?.domain||""})},className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-400 transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed",children:"Cancel"})]})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Full Name"}),d.jsx("p",{className:"text-lg text-gray-800 font-medium",children:s?.name||"Not specified"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Role"}),d.jsx("p",{className:"text-lg text-gray-800 font-medium",children:s?.role||"Not specified"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Email Address"}),d.jsx("p",{className:"text-lg text-gray-800",children:s?.email||"Not specified"})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Industry"}),d.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s?.industry||"Not specified"]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Domain"}),d.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s?.domain||"Not specified"]})]})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Applied"}),d.jsx("p",{className:"text-3xl font-bold text-blue-600",children:F}),d.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>pe("/dashboard"),children:"View in Dashboard"})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Posted"}),d.jsx("p",{className:"text-3xl font-bold text-green-600",children:b}),d.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-green-600",onClick:()=>pe("/dashboard"),children:"View in Dashboard"})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Worked"}),d.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Q}),d.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-purple-600",onClick:()=>pe("/dashboard?filter=accepted"),children:"View in Dashboard"})]})]})]})]})}function TE(){const[s,e]=P.useState(""),[n,i]=P.useState(""),[l,c]=P.useState(""),[h,p]=P.useState(!1),m=pn(),y=async()=>{if(console.log("Login attempt started",{email:s,password:n}),c(""),p(!0),!s||!n){c("Please enter email and password"),p(!1);return}try{if(console.log("Making fetch request to backend..."),s==="test@finder.com"&&n==="test"||s==="akshay@finder.com"&&n==="1234"||s==="ap@finder.com"&&n==="1234"){console.log("Using mock login for testing"),localStorage.setItem("finder_email",s),p(!1),m("/dashboard");return}const w=new AbortController,_=setTimeout(()=>w.abort(),6e4),x=await fetch(ve("login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:n}),signal:w.signal});if(clearTimeout(_),console.log("Response received:",x.status,x.ok),!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const R=await x.json();console.log("Response data:",R),R.success?(localStorage.setItem("finder_email",s),console.log("Login successful, navigating to dashboard"),m("/dashboard")):R.message==="Invalid credentials"?c("Invalid credentials. If you are a new user, please register."):c(R.message||"Login failed")}catch(w){console.error("Login error:",w),w.name==="AbortError"?c("Request timeout - server may be starting up. Please try again in 60 seconds."):c("Login failed. Try again or use test@finder.com / test for demo.")}finally{p(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:d.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-md w-full max-w-md text-center",children:[d.jsx("div",{className:"mb-6 flex justify-center",children:d.jsx("img",{src:Rl,alt:"Finder Logo",className:"h-12"})}),d.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Login to Continue"}),d.jsx("input",{type:"email",placeholder:"Enter your email",value:s,onChange:w=>e(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500"}),d.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:w=>i(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-2 focus:ring-finder-blue-500"}),l&&d.jsx("div",{className:"text-red-600 mb-2",children:l}),d.jsx("button",{onClick:()=>{console.log("Login button clicked!"),y()},disabled:h,className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium mb-2 disabled:opacity-50",style:{backgroundColor:h?"#0E4A9A":"#115CBA"},children:h?"Logging in...":"Login"}),d.jsxs("div",{className:"text-sm text-gray-500",children:["New user? ",d.jsx("span",{className:"text-finder-blue-600 cursor-pointer",style:{color:"#115CBA"},onClick:()=>m("/register"),children:"Register"})]})]})})}function bE(){const s=bl(),e=s.state?.tab||"applied",[n,i]=P.useState(e),[l,c]=P.useState(null),[h,p]=P.useState([]),[m,y]=P.useState([]),[w,_]=P.useState(0),[x,R]=P.useState(0),[F,H]=P.useState(""),[b,V]=P.useState("all"),[Q,ce]=P.useState(()=>{try{const E=localStorage.getItem("finder_applicant_statuses");return E?JSON.parse(E):{}}catch{return{}}}),[pe,Ee]=P.useState(!1),[we,ye]=P.useState({}),[De,ze]=P.useState(!1),[oe,Ge]=P.useState(null),[Me,O]=P.useState(!1),[se,Se]=P.useState(null),[K,X]=P.useState({}),M=pn(),D=localStorage.getItem("finder_email")||"";P.useEffect(()=>{const E=new URLSearchParams(s.search),A=E.get("filter"),q=E.get("tab"),G=E.get("opportunityId");console.log(" URL Parameters:",{filterParam:A,tabParam:q,opportunityIdParam:G}),A==="accepted"?(i("applied"),V("accepted")):V("all"),q==="posted"?i("posted"):q==="applied"&&i("applied"),G&&q==="posted"?(console.log(" Setting pendingOpportunityId for posted:",G),window.pendingOpportunityId=G):G&&(q==="applied"||A==="accepted")?(console.log(" Setting pendingAppliedOpportunityId for applied:",G),window.pendingAppliedOpportunityId=G):(window.pendingOpportunityId=null,window.pendingAppliedOpportunityId=null)},[s.search]),P.useEffect(()=>{D&&(async()=>{try{const q=await(await fetch(ve("employees"))).json(),G=q.employees||q||[],le={};G.forEach(ne=>{le[ne.email]=ne.name}),X(le);const he=G.find(ne=>(ne.email||"").trim().toLowerCase()===D.trim().toLowerCase());he&&H(he.name||"")}catch(A){console.error("Error fetching user name:",A)}})()},[D]),P.useEffect(()=>{localStorage.setItem("finder_applicant_statuses",JSON.stringify(Q))},[Q]),P.useEffect(()=>{D&&(async()=>{try{const[A,q]=await Promise.all([fetch(ve("opportunities")).then(W=>W.json()),fetch(ve("employees")).then(W=>W.json())]),G=A.opportunities||[],le=(D||"").trim().toLowerCase(),he=G.filter(W=>(W.applied||[]).some(_e=>(_e||"").trim().toLowerCase()===le)),ne=G.filter(W=>(W.email||"").trim().toLowerCase()===le);_(he.length),R(ne.length)}catch(A){console.error("Error fetching opportunity counts:",A)}})()},[D,Q]),window.fixCurrentUserOpp1Status=()=>{const E=localStorage.getItem("finder_email")||"";console.log("Current user email:",E),fetch(ve("opportunities")).then(A=>A.json()).then(A=>{const q=A.opportunities||[],G=q.find(le=>le.title==="Opp 1");if(G){const he=`${q.findIndex(W=>W.title===G.title&&W.email===G.email&&W.description===G.description)}-${E}`,ne=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");ne[he]="confirmed",localStorage.setItem("finder_applicant_statuses",JSON.stringify(ne)),console.log(`Fixed status for Opp 1 - User: ${E}, StatusKey: ${he}, set to: confirmed`),console.log("Updated statuses:",ne),window.location.reload()}else console.log("Opp 1 not found!")}).catch(A=>console.error("Error fixing status:",A))},window.fixCurrentUserOpp3Status=()=>{const E=localStorage.getItem("finder_email")||"";console.log("Current user email:",E),fetch(ve("opportunities")).then(A=>A.json()).then(A=>{const q=A.opportunities||[],G=q.find(le=>le.title==="Opp 3");if(G){const he=`${q.findIndex(W=>W.title===G.title&&W.email===G.email&&W.description===G.description)}-${E}`,ne=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");ne[he]="confirmed",localStorage.setItem("finder_applicant_statuses",JSON.stringify(ne)),console.log(`Fixed status for Opp 3 - User: ${E}, StatusKey: ${he}, set to: confirmed`),console.log("Updated statuses:",ne),window.location.reload()}else console.log("Opp 3 not found!")}).catch(A=>console.error("Error fixing status:",A))},window.debugAllStatuses=()=>{const E=localStorage.getItem("finder_email")||"",A=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");console.log("Current user email:",E),console.log("All applicant statuses:",A),fetch(ve("opportunities")).then(q=>q.json()).then(q=>{const G=q.opportunities||[];console.log("All opportunities with their potential status keys:"),G.forEach((le,he)=>{const ne=`${he}-${E}`,W=A[ne];console.log(`${le.title} (Index: ${he}) - StatusKey: ${ne} - Status: ${W||"none"} - Server Status: ${le.application_statuses?.[E]||"none"}`)})})},window.clearAllLocalStorageStatuses=()=>{localStorage.removeItem("finder_applicant_statuses"),console.log(" Cleared all localStorage statuses. Refreshing page to sync with server data only..."),window.location.reload()},window.resetModalState=()=>{ze(!1),Ge(null),window.pendingOpportunityId=null,window.pendingAppliedOpportunityId=null,console.log(" Reset all modal and notification state")},window.testRejectionNotification=E=>{console.log(" Testing rejection notification for opportunity ID:",E);const A=`/dashboard?tab=applied&opportunityId=${E}`;console.log(" Navigating to:",A),M(A)},window.testModalWithCorrectId=()=>{const E=localStorage.getItem("finder_email")||"";fetch(ve("opportunities")).then(A=>A.json()).then(A=>{const q=A.opportunities||[],G=q.filter(le=>(le.applied||[]).some(ne=>(ne||"").trim().toLowerCase()===E.trim().toLowerCase()));if(G.length>0){const le=G[0],he=q.findIndex(W=>W.title===le.title&&W.email===le.email&&W.description===le.description);console.log(` Testing with correct ID: ${he} for opportunity: ${le.title}`);const ne=`/dashboard?tab=applied&opportunityId=${he}`;M(ne)}})},window.createTestRejectionNotification=(E,A)=>{const q=localStorage.getItem("finder_email")||"";fetch(ve("opportunities")).then(G=>G.json()).then(G=>{const le=G.opportunities||[];console.log(" All opportunities with their IDs:"),le.forEach((ne,W)=>{console.log(`ID: ${W}, Title: ${ne.title}, Email: ${ne.email}`)});const he=le.filter(ne=>(ne.applied||[]).some(ke=>(ke||"").trim().toLowerCase()===q.trim().toLowerCase()));if(console.log(" Applied opportunities for current user:"),he.forEach((ne,W)=>{const ke=le.findIndex(_e=>_e.title===ne.title&&_e.email===ne.email&&_e.description===ne.description);console.log(`Applied ID: ${ke}, Title: ${ne.title}, Status: ${ne.status||"open"}`)}),he.length>0){const ne=he[0],W=le.findIndex(Ne=>Ne.title===ne.title&&Ne.email===ne.email&&Ne.description===ne.description),ke={id:Date.now().toString(),type:"application_rejected",title:"Application Update",message:`Your application for "${ne.title}" was not selected this time.`,icon:"",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${W}`,timestamp:new Date().toISOString(),read:!1},_e=JSON.parse(localStorage.getItem(`notifications_${q}`)||"[]");_e.unshift(ke),localStorage.setItem(`notifications_${q}`,JSON.stringify(_e)),console.log(" Created test rejection notification with CORRECT ID:",ke),console.log(` Opportunity: "${ne.title}" with ID: ${W}`),window.location.reload()}else console.log(" No applied opportunities found for current user")}).catch(G=>console.error("Error creating test notification:",G))},P.useEffect(()=>{if(D)try{jt.getNotifications(D).forEach(A=>{if(A.type==="application_accepted"||A.type==="application_rejected"){const q=A.message.match(/for "([^"]+)"/);if(q){const G=q[1];fetch(ve("opportunities")).then(le=>le.json()).then(le=>{const he=le.opportunities||[],ne=he.find(W=>W.title===G);if(ne){const ke=`${he.findIndex(Ne=>Ne.title===ne.title&&Ne.email===ne.email&&Ne.description===ne.description)}-${D}`,_e=A.type==="application_accepted"?"confirmed":"rejected";ce(Ne=>!Ne[ke]||Ne[ke]!==_e?(console.log(`Syncing status for ${G}: ${_e}`),{...Ne,[ke]:_e}):Ne)}}).catch(le=>console.error("Error syncing notification status:",le))}}})}catch(E){console.error("Error syncing notifications:",E)}},[D]),P.useEffect(()=>{n==="applied"&&(console.log(" Fetching applied opportunities, tab:",n),Promise.all([fetch(ve("opportunities")).then(E=>E.json()),fetch(ve("employees")).then(E=>E.json())]).then(([E,A])=>{const q=E.opportunities||[],G=A.employees||A||[],le={};G.forEach(W=>{le[W.email]=W.name});const ne=q.filter(W=>{const ke=W.applied||[],_e=(D||"").trim().toLowerCase();return ke.some(Ne=>(Ne||"").trim().toLowerCase()===_e)}).map((W,ke)=>{const _e=q.findIndex(pt=>pt.title===W.title&&pt.email===W.email&&pt.description===W.description);let Ne=null;if(W.application_statuses&&W.application_statuses[D]){Ne=W.application_statuses[D]==="accepted"?"confirmed":"rejected";const Et=`${_e}-${D}`;ce(dr=>({...dr,[Et]:Ne}))}else{Ne=null;const pt=`${_e}-${D}`;Q[pt]&&(console.log(` Clearing stale localStorage status for opportunity ${W.title} (ID: ${_e})`),ce(Et=>{const dr={...Et};return delete dr[pt],dr}))}let Xe=[],Pe="In Review";return Ne==="confirmed"?(Xe.push("Accepted"),Pe="Accepted"):Ne==="rejected"?(Xe.push("Not Considered"),Pe="Not Considered"):(Xe.push("In Review"),Pe="In Review"),{id:_e,originalId:_e,title:W.title,status:Pe,statusArray:Xe,tags:W.skills||[],duration:`${W.hoursPerWeek} Hours/Week`,description:W.description,domain:W.domain,type:W.type,startDate:W.startDate,endDate:W.endDate,hoursPerWeek:W.hoursPerWeek,skills:W.skills,roles:W.roles,email:W.email,postedBy:le[W.email]||"Unknown User",isOpportunityClosed:W.status==="closed",userApplicationStatus:Ne}});p(ne)}).catch(E=>console.error("Error fetching applied opportunities:",E)))},[n,D]),P.useEffect(()=>{if(console.log(" Modal opening effect triggered"),console.log(" pendingAppliedOpportunityId:",window.pendingAppliedOpportunityId),console.log(" pendingOpportunityId:",window.pendingOpportunityId),console.log(" tab:",n),console.log(" opportunities.length:",h.length),console.log(" postedOpportunities.length:",m.length),window.pendingAppliedOpportunityId&&n==="applied"&&h.length>0){const E=h.find(A=>A.id.toString()===window.pendingAppliedOpportunityId);if(E){console.log(" Opening modal for applied opportunity:",E.title),Ge(null),ze(!1),requestAnimationFrame(()=>{Ge(E),ze(!0)}),window.pendingAppliedOpportunityId=null;const A=new URL(window.location);A.searchParams.delete("opportunityId"),window.history.replaceState({},"",A.toString())}else console.log(" Applied opportunity not found with ID:",window.pendingAppliedOpportunityId)}if(window.pendingOpportunityId&&n==="posted"&&m.length>0){const E=m.find(A=>A.id.toString()===window.pendingOpportunityId);if(E){console.log(" Opening modal for posted opportunity:",E.title),Ge(null),ze(!1),requestAnimationFrame(()=>{Ge(E),ze(!0)}),window.pendingOpportunityId=null;const A=new URL(window.location);A.searchParams.delete("opportunityId"),window.history.replaceState({},"",A.toString())}else console.log(" Posted opportunity not found with ID:",window.pendingOpportunityId)}},[n,h,m]),P.useEffect(()=>{n==="posted"&&(console.log(" Fetching posted opportunities, tab:",n),Promise.all([fetch(ve("opportunities")).then(E=>E.json()),fetch(ve("employees")).then(E=>E.json())]).then(([E,A])=>{const q=E.opportunities||[],G=A.employees||A||[],le={};G.forEach(W=>{le[W.email]=W.name});const ne=q.filter(W=>{const ke=(W.email||"").trim().toLowerCase(),_e=(D||"").trim().toLowerCase();return ke===_e}).map(W=>{const ke=q.findIndex(_e=>_e.title===W.title&&_e.email===W.email&&_e.description===W.description);return{...W,id:ke,applicants:(W.applied||[]).map(_e=>({email:_e,name:le[_e]||"Unknown User"}))}});if(y(ne),window.pendingOpportunityId){console.log(" Looking for posted opportunity with ID:",window.pendingOpportunityId),console.log(" Available posted opportunities:",ne.map(ke=>({id:ke.id,title:ke.title})));const W=ne.find(ke=>ke.id.toString()===window.pendingOpportunityId);if(W){console.log(" Found target posted opportunity:",W.title),Ge(W),ze(!0),window.pendingOpportunityId=null;const ke=new URL(window.location);ke.searchParams.delete("opportunityId"),window.history.replaceState({},"",ke.toString())}else console.log(" Target posted opportunity not found with ID:",window.pendingOpportunityId)}}).catch(E=>console.error("Error fetching posted opportunities:",E)))},[n,D]),P.useEffect(()=>{if(De&&oe){const E=m.find(A=>A.id===oe.id);E&&Ge(E)}},[Q,m,De]);const L=async(E,A,q,G)=>{const le=G==="accept"?"accept":"reject",he=`${le.charAt(0).toUpperCase()+le.slice(1)} Candidate`,ne=`${le.charAt(0).toUpperCase()+le.slice(1)} "${q}" for this role?`;ie(he,ne,async()=>{try{const W=G==="accept"?"accepted":"rejected";Ge(Xe=>({...Xe,application_statuses:{...Xe.application_statuses,[A]:W}})),y(Xe=>Xe.map(Pe=>Pe.id===E?{...Pe,application_statuses:{...Pe.application_statuses,[A]:W}}:Pe));const ke=`${E}-${A}`;ce(Xe=>({...Xe,[ke]:G==="accept"?"confirmed":"rejected"}));const _e=m.find(Xe=>Xe.id===E);_e&&(G==="accept"?jt.notifyApplicationAccepted(A,_e.title,E):jt.notifyApplicationRejected(A,_e.title,E)),(await fetch(ve(`opportunities/${E}/${G}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantEmail:A})})).ok?console.log(` Successfully ${G}ed ${q} on server`):console.log("Server update failed, but local status maintained")}catch(W){console.error("Accept/Reject error:",W)}})},N=async(E,A)=>{ie("Close Opportunity",`Are you sure you want to close the opportunity "${A}"?`,async()=>{try{const q=m.find(he=>he.id===E),G=q?q.applied||[]:[];(await fetch(ve(`opportunities/${E}/close`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:D})})).ok&&(G.forEach(he=>{he!==D&&jt.notifyOpportunityClosed(he,A,E)}),Promise.all([fetch(ve("opportunities")).then(he=>he.json()),fetch(ve("employees")).then(he=>he.json())]).then(([he,ne])=>{const W=he.opportunities||[],ke=ne.employees||ne||[],_e={};ke.forEach(Pe=>{_e[Pe.email]=Pe.name});const Xe=W.filter(Pe=>Pe.email===D).map(Pe=>{const pt=W.findIndex(Et=>Et.title===Pe.title&&Et.email===Pe.email&&Et.description===Pe.description);return{...Pe,id:pt,applicants:(Pe.applied||[]).map(Et=>({email:Et,name:_e[Et]||"Unknown User"}))}});y(Xe)}))}catch(q){console.error("Error closing opportunity:",q)}})},j=async(E,A)=>{ie("Reopen Opportunity",`Are you sure you want to reopen the opportunity "${A}"?`,async()=>{try{(await fetch(ve(`opportunities/${E}/reopen`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:D})})).ok&&Promise.all([fetch(ve("opportunities")).then(G=>G.json()),fetch(ve("employees")).then(G=>G.json())]).then(([G,le])=>{const he=G.opportunities||[],ne=le.employees||le||[],W={};ne.forEach(Ne=>{W[Ne.email]=Ne.name});const _e=he.filter(Ne=>Ne.email===D).map(Ne=>{const Xe=he.findIndex(Pe=>Pe.title===Ne.title&&Pe.email===Ne.email&&Pe.description===Ne.description);return{...Ne,id:Xe,applicants:(Ne.applied||[]).map(Pe=>({email:Pe,name:W[Pe]||"Unknown User"}))}});y(_e)})}catch(q){console.error("Error reopening opportunity:",q)}})},ie=(E,A,q)=>{ye({title:E,message:A,onConfirm:q}),Ee(!0)},ae=()=>{we.onConfirm&&we.onConfirm(),Ee(!1),ye({})},xe=()=>{Ee(!1),ye({})},fe=async E=>{try{const q=await(await fetch(ve("employees"))).json(),le=(q.employees||q||[]).find(he=>(he.email||"").trim().toLowerCase()===E.trim().toLowerCase());le&&(Se(le),O(!0))}catch(A){console.error("Error fetching profile:",A)}},Re={"In Review":"bg-yellow-400",Accepted:"bg-green-600","Not Considered":"bg-red-600"};return d.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[d.jsx(Wi,{userEmail:D,userName:F}),pe&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:we.title}),d.jsx("p",{className:"text-gray-600 mb-6",children:we.message}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx("button",{onClick:xe,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:ae,className:"px-4 py-2 bg-finder-blue-600 text-white rounded hover:bg-finder-blue-700",children:"Confirm"})]})]})}),De&&oe&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"flex justify-between items-start",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:oe.title}),d.jsxs("div",{className:"flex items-center gap-4",children:[oe.isOpportunityClosed?d.jsx("span",{className:"px-3 py-1 bg-gray-400 text-white text-sm rounded-full",children:"Closed"}):d.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"}),n==="applied"?d.jsxs("span",{className:"text-finder-blue-600 font-medium",children:["Posted by: ",d.jsx("span",{className:"cursor-pointer hover:text-finder-blue-700 underline transition-colors",onClick:()=>fe(oe.email),children:oe.postedBy})]}):d.jsxs("span",{className:"text-finder-blue-600 font-medium",children:[oe.applicants?oe.applicants.length:0," Applications"]})]})]})})}),d.jsx("button",{onClick:()=>ze(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"space-y-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),d.jsx("p",{className:"text-gray-600",children:oe.description||"-"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),d.jsx("p",{className:"text-gray-600",children:oe.domain||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Type"}),d.jsx("p",{className:"text-gray-600",children:oe.type||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),d.jsx("p",{className:"text-gray-600",children:oe.industry||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Hours per Week"}),d.jsx("p",{className:"text-gray-600",children:oe.hoursPerWeek||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Start Date"}),d.jsx("p",{className:"text-gray-600",children:oe.startDate||"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"End Date"}),d.jsx("p",{className:"text-gray-600",children:oe.endDate||"-"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),oe.roles&&oe.roles.length>0?d.jsx("div",{className:"flex flex-wrap gap-2",children:oe.roles.map((E,A)=>d.jsx("span",{className:"px-2 py-1 bg-finder-blue-100 text-finder-blue-800 text-sm rounded",children:E},A))}):d.jsx("p",{className:"text-gray-600",children:"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),oe.skills&&oe.skills.length>0?d.jsx("div",{className:"flex flex-wrap gap-2",children:oe.skills.map((E,A)=>d.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded",children:E},A))}):d.jsx("p",{className:"text-gray-600",children:"-"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Posted by"}),d.jsx("p",{className:"text-finder-blue-600 cursor-pointer hover:underline",onClick:()=>fe(oe.email),children:K[oe.email]||"Unknown User"})]})]}),n==="applied"&&oe.statusArray&&d.jsxs("div",{className:"border-t pt-6",children:[d.jsx("div",{className:"mb-4",children:d.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Application Status"})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:oe.statusArray.map((E,A)=>d.jsx("span",{className:`text-white px-3 py-1 text-sm rounded-full ${Re[E]}`,children:E},A))})]}),n==="posted"&&d.jsxs("div",{className:"border-t pt-6",children:[d.jsx("div",{className:"mb-4",children:d.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Applicants"})}),oe.applicants&&oe.applicants.length>0?d.jsx("div",{className:"space-y-3",children:oe.applicants.map((E,A)=>{`${oe.id}${E.email}`;const q=oe.status==="closed";let G=null;return oe.application_statuses&&oe.application_statuses[E.email]?(G=oe.application_statuses[E.email]==="accepted"?"confirmed":"rejected",console.log(` Using server status for ${E.email}: ${G}`)):console.log(` No server status found for ${E.email}, showing Accept/Reject buttons`),d.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-800 cursor-pointer hover:text-finder-blue-600 transition-colors",onClick:()=>fe(E.email),children:E.name}),d.jsx("p",{className:"text-sm text-gray-500",children:E.email}),d.jsxs("div",{className:"mt-1 space-y-1",children:[G&&d.jsx("p",{className:`text-sm font-medium ${G==="confirmed"?"text-green-600":"text-red-600"}`,children:G==="confirmed"?" Candidate Accepted":" Candidate Rejected"}),!G&&!q&&d.jsx("p",{className:"text-sm text-yellow-600",children:" Pending Decision"})]})]}),!G&&!q&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>L(oe.id,E.email,E.name,"accept"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Accept"}),d.jsx("button",{onClick:()=>L(oe.id,E.email,E.name,"reject"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Not Considered"})]})]},`${A}-${G||"none"}`)})}):d.jsx("p",{className:"text-gray-500 text-sm",children:"No applications yet"})]}),n==="posted"&&d.jsx("div",{className:"border-t pt-4 flex justify-center",children:oe.status==="closed"?d.jsx("button",{onClick:()=>j(oe.id,oe.title),className:"px-6 py-3 bg-finder-blue-600 text-white font-medium rounded-lg hover:bg-finder-blue-700 transition-colors",children:"Reopen Opportunity"}):d.jsx("button",{onClick:()=>N(oe.id,oe.title),className:"px-6 py-3 bg-gray-500 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors",children:"Close Opportunity"})})]})})}),Me&&se&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:d.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),d.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-center mb-6",children:(()=>{const E=localStorage.getItem(`profile_picture_${se.email}`);if(E)return d.jsx("img",{src:E,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100"});{const A=se.name||"Unknown User",q=A.split(" ").map(he=>he[0]).join("").substring(0,2).toUpperCase(),G=["bg-red-400","bg-blue-400","bg-green-400","bg-yellow-400","bg-purple-400","bg-pink-400","bg-indigo-400"],le=A.length%G.length;return d.jsx("div",{className:`w-24 h-24 rounded-full ${G[le]} flex items-center justify-center text-white text-xl font-bold border-4 border-blue-100`,children:q})}})()}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Name"}),d.jsx("p",{className:"text-gray-600",children:se.name||"Not specified"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Email"}),d.jsx("p",{className:"text-gray-600",children:se.email})]}),se.role&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Role"}),d.jsx("p",{className:"text-gray-600",children:se.role})]}),se.domain&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),d.jsx("p",{className:"text-gray-600",children:se.domain})]}),se.industry&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),d.jsx("p",{className:"text-gray-600",children:se.industry})]})]})]})})}),d.jsxs("section",{className:"text-center mt-10",children:[d.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-8 text-center flex items-center justify-center gap-3",children:["Your next firm contribution starts with",d.jsx("img",{src:Rl,alt:"FInder",className:"h-6 md:h-8 inline-block -mt-1"})]}),d.jsx("p",{className:"mt-2 text-gray-500",children:"FInder your next opportunity here!"})]}),d.jsx("div",{className:"flex justify-center mt-8",children:d.jsxs("div",{className:"flex border rounded-xl overflow-hidden",children:[d.jsxs("button",{onClick:()=>{i("applied"),V("all"),M("/dashboard")},className:`px-6 py-2 font-medium ${n==="applied"?"bg-finder-blue-600 text-white":"bg-white text-finder-blue-600"}`,children:["Opportunities Applied (",w,")"]}),d.jsxs("button",{onClick:()=>{i("posted"),V("all"),M("/dashboard")},className:`px-6 py-2 font-medium ${n==="posted"?"bg-finder-blue-600 text-white":"bg-white text-finder-blue-600"}`,children:["Opportunities Posted (",x,")"]})]})}),b==="accepted"&&n==="applied"&&d.jsx("div",{className:"flex justify-center mt-4",children:d.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-2 rounded-lg flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-sm font-medium",children:"Showing accepted opportunities only"}),d.jsx("button",{onClick:()=>{V("all"),M("/dashboard")},className:"ml-2 text-purple-600 hover:text-purple-800",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),d.jsxs("div",{className:"px-8 mt-8 pb-10",children:[n==="applied"&&d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.filter(E=>b==="accepted"?E.status==="Accepted"||E.statusArray?.includes("Accepted"):!0).sort((E,A)=>!E.isOpportunityClosed&&A.isOpportunityClosed?-1:E.isOpportunityClosed&&!A.isOpportunityClosed?1:A.originalId-E.originalId).map((E,A)=>d.jsxs("div",{className:`bg-white p-6 rounded-xl shadow cursor-pointer hover:shadow-lg transition-shadow ${E.isOpportunityClosed?"opacity-75":""}`,onClick:()=>{Ge(E),ze(!0)},children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("h3",{className:"font-bold text-lg flex-1",children:E.title}),d.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[E.statusArray.map((q,G)=>d.jsx("span",{className:`text-white px-2 py-1 text-xs rounded-full ${Re[q]}`,children:q},G)),E.isOpportunityClosed?d.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-500 text-white ml-1",children:"Closed"}):d.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-500 text-white ml-1",children:"Open"})]})]}),d.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:E.description}),d.jsxs("div",{className:"text-right text-xs text-gray-500",children:["Posted by: ",d.jsx("span",{className:"cursor-pointer hover:text-finder-blue-600 underline transition-colors",onClick:q=>{q.stopPropagation(),fe(E.email)},children:E.postedBy})]})]},A)),h.filter(E=>b==="accepted"?E.status==="Accepted"||E.statusArray?.includes("Accepted"):!0).length===0&&d.jsx("div",{className:"col-span-full text-center py-16",children:d.jsx("div",{className:"max-w-md mx-auto",children:b==="accepted"?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Accepted Opportunities Yet"}),d.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't been accepted to any opportunities yet. Keep applying and showcasing your skills!"}),d.jsx("button",{onClick:()=>{V("all"),M("/dashboard")},className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors mr-3",children:"View All Applications"}),d.jsx("button",{onClick:()=>M("/find-opportunities"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium transition-colors",children:"Find More Opportunities"})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Ready to Launch Your Next Adventure?"}),d.jsx("p",{className:"text-gray-500 mb-6",children:"Discover exciting opportunities waiting for you! Browse available positions and take the first step toward your next career milestone."}),d.jsx("button",{onClick:()=>M("/find-opportunities"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors",children:"Explore Opportunities"})]})})})]}),n==="posted"&&d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[[...m].sort((E,A)=>E.status==="closed"&&A.status!=="closed"?1:E.status!=="closed"&&A.status==="closed"?-1:A.id-E.id).map(E=>d.jsx("div",{className:`bg-white rounded-xl shadow overflow-hidden cursor-pointer hover:shadow-lg transition-shadow ${E.status==="closed"?"opacity-75":""}`,onClick:()=>{Ge(E),ze(!0)},children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("h3",{className:"font-bold text-lg flex-1",children:E.title}),E.status==="closed"?d.jsx("span",{className:"px-2 py-1 bg-gray-400 text-white text-xs rounded-full",children:"Closed"}):d.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded-full",children:"Open"})]}),d.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:E.description}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("span",{className:"text-finder-blue-600 font-medium",children:[E.applicants?E.applicants.length:0," Applications"]}),d.jsx("span",{className:"text-gray-400 text-sm",children:"Click to view details"})]})]})},E.id)),m.length===0&&d.jsx("div",{className:"col-span-full text-center py-16",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Share Your Vision, Build Your Team!"}),d.jsx("p",{className:"text-gray-500 mb-6",children:"Have an amazing project idea? Create your first opportunity and connect with talented individuals who can help bring your vision to life."}),d.jsx("button",{onClick:()=>M("/post-opportunity"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors",children:"Post Your First Opportunity"})]})})]})]})]})}function RE(){return d.jsx(z_,{children:d.jsxs(U_,{children:[d.jsx(Xn,{path:"/",element:d.jsx(TE,{})}),d.jsx(Xn,{path:"/register",element:d.jsx(kE,{})}),d.jsx(Xn,{path:"/dashboard",element:d.jsx(bE,{})}),d.jsx(Xn,{path:"/find-opportunities",element:d.jsx(CE,{})}),d.jsx(Xn,{path:"/post-opportunity",element:d.jsx(_E,{})}),d.jsx(Xn,{path:"/profile",element:d.jsx(IE,{})}),d.jsx(Xn,{path:"/opportunity/:id",element:d.jsx(EE,{})})]})})}Vv.createRoot(document.getElementById("root")).render(d.jsx(_m.StrictMode,{children:d.jsx(RE,{})}));
