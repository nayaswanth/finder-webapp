function j0(r,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in r)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(r,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function fg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cu={exports:{}},bi={},uu={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function A0(){if(Up)return Ee;Up=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function v(E){return E===null||typeof E!="object"?null:(E=_&&E[_]||E["@@iterator"],typeof E=="function"?E:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,z={};function P(E,j,ie){this.props=E,this.context=j,this.refs=z,this.updater=ie||k}P.prototype.isReactComponent={},P.prototype.setState=function(E,j){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,j,"setState")},P.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function G(){}G.prototype=P.prototype;function Y(E,j,ie){this.props=E,this.context=j,this.refs=z,this.updater=ie||k}var ce=Y.prototype=new G;ce.constructor=Y,D(ce,P.prototype),ce.isPureReactComponent=!0;var me=Array.isArray,Te=Object.prototype.hasOwnProperty,Ce={current:null},ve={key:!0,ref:!0,__self:!0,__source:!0};function Me(E,j,ie){var ae,we={},pe=null,Re=null;if(j!=null)for(ae in j.ref!==void 0&&(Re=j.ref),j.key!==void 0&&(pe=""+j.key),j)Te.call(j,ae)&&!ve.hasOwnProperty(ae)&&(we[ae]=j[ae]);var N=arguments.length-2;if(N===1)we.children=ie;else if(1<N){for(var A=Array(N),Q=0;Q<N;Q++)A[Q]=arguments[Q+2];we.children=A}if(E&&E.defaultProps)for(ae in N=E.defaultProps,N)we[ae]===void 0&&(we[ae]=N[ae]);return{$$typeof:r,type:E,key:pe,ref:Re,props:we,_owner:Ce.current}}function Ve(E,j){return{$$typeof:r,type:E.type,key:j,ref:E.ref,props:E.props,_owner:E._owner}}function oe(E){return typeof E=="object"&&E!==null&&E.$$typeof===r}function Ke(E){var j={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(ie){return j[ie]})}var Fe=/\/+/g;function O(E,j){return typeof E=="object"&&E!==null&&E.key!=null?Ke(""+E.key):j.toString(36)}function se(E,j,ie,ae,we){var pe=typeof E;(pe==="undefined"||pe==="boolean")&&(E=null);var Re=!1;if(E===null)Re=!0;else switch(pe){case"string":case"number":Re=!0;break;case"object":switch(E.$$typeof){case r:case e:Re=!0}}if(Re)return Re=E,we=we(Re),E=ae===""?"."+O(Re,0):ae,me(we)?(ie="",E!=null&&(ie=E.replace(Fe,"$&/")+"/"),se(we,j,ie,"",function(Q){return Q})):we!=null&&(oe(we)&&(we=Ve(we,ie+(!we.key||Re&&Re.key===we.key?"":(""+we.key).replace(Fe,"$&/")+"/")+E)),j.push(we)),1;if(Re=0,ae=ae===""?".":ae+":",me(E))for(var N=0;N<E.length;N++){pe=E[N];var A=ae+O(pe,N);Re+=se(pe,j,ie,A,we)}else if(A=v(E),typeof A=="function")for(E=A.call(E),N=0;!(pe=E.next()).done;)pe=pe.value,A=ae+O(pe,N++),Re+=se(pe,j,ie,A,we);else if(pe==="object")throw j=String(E),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Re}function Se(E,j,ie){if(E==null)return E;var ae=[],we=0;return se(E,ae,"","",function(pe){return j.call(ie,pe,we++)}),ae}function K(E){if(E._status===-1){var j=E._result;j=j(),j.then(function(ie){(E._status===0||E._status===-1)&&(E._status=1,E._result=ie)},function(ie){(E._status===0||E._status===-1)&&(E._status=2,E._result=ie)}),E._status===-1&&(E._status=0,E._result=j)}if(E._status===1)return E._result.default;throw E._result}var X={current:null},F={transition:null},M={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:F,ReactCurrentOwner:Ce};function L(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:Se,forEach:function(E,j,ie){Se(E,function(){j.apply(this,arguments)},ie)},count:function(E){var j=0;return Se(E,function(){j++}),j},toArray:function(E){return Se(E,function(j){return j})||[]},only:function(E){if(!oe(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ee.Component=P,Ee.Fragment=n,Ee.Profiler=l,Ee.PureComponent=Y,Ee.StrictMode=i,Ee.Suspense=m,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,Ee.act=L,Ee.cloneElement=function(E,j,ie){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var ae=D({},E.props),we=E.key,pe=E.ref,Re=E._owner;if(j!=null){if(j.ref!==void 0&&(pe=j.ref,Re=Ce.current),j.key!==void 0&&(we=""+j.key),E.type&&E.type.defaultProps)var N=E.type.defaultProps;for(A in j)Te.call(j,A)&&!ve.hasOwnProperty(A)&&(ae[A]=j[A]===void 0&&N!==void 0?N[A]:j[A])}var A=arguments.length-2;if(A===1)ae.children=ie;else if(1<A){N=Array(A);for(var Q=0;Q<A;Q++)N[Q]=arguments[Q+2];ae.children=N}return{$$typeof:r,type:E.type,key:we,ref:pe,props:ae,_owner:Re}},Ee.createContext=function(E){return E={$$typeof:u,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},Ee.createElement=Me,Ee.createFactory=function(E){var j=Me.bind(null,E);return j.type=E,j},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(E){return{$$typeof:p,render:E}},Ee.isValidElement=oe,Ee.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:K}},Ee.memo=function(E,j){return{$$typeof:y,type:E,compare:j===void 0?null:j}},Ee.startTransition=function(E){var j=F.transition;F.transition={};try{E()}finally{F.transition=j}},Ee.unstable_act=L,Ee.useCallback=function(E,j){return X.current.useCallback(E,j)},Ee.useContext=function(E){return X.current.useContext(E)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(E){return X.current.useDeferredValue(E)},Ee.useEffect=function(E,j){return X.current.useEffect(E,j)},Ee.useId=function(){return X.current.useId()},Ee.useImperativeHandle=function(E,j,ie){return X.current.useImperativeHandle(E,j,ie)},Ee.useInsertionEffect=function(E,j){return X.current.useInsertionEffect(E,j)},Ee.useLayoutEffect=function(E,j){return X.current.useLayoutEffect(E,j)},Ee.useMemo=function(E,j){return X.current.useMemo(E,j)},Ee.useReducer=function(E,j,ie){return X.current.useReducer(E,j,ie)},Ee.useRef=function(E){return X.current.useRef(E)},Ee.useState=function(E){return X.current.useState(E)},Ee.useSyncExternalStore=function(E,j,ie){return X.current.useSyncExternalStore(E,j,ie)},Ee.useTransition=function(){return X.current.useTransition()},Ee.version="18.3.1",Ee}var $p;function Zu(){return $p||($p=1,uu.exports=A0()),uu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp;function O0(){if(zp)return bi;zp=1;var r=Zu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(p,m,y){var x,_={},v=null,k=null;y!==void 0&&(v=""+y),m.key!==void 0&&(v=""+m.key),m.ref!==void 0&&(k=m.ref);for(x in m)i.call(m,x)&&!c.hasOwnProperty(x)&&(_[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)_[x]===void 0&&(_[x]=m[x]);return{$$typeof:e,type:p,key:v,ref:k,props:_,_owner:l.current}}return bi.Fragment=n,bi.jsx=u,bi.jsxs=u,bi}var Bp;function D0(){return Bp||(Bp=1,cu.exports=O0()),cu.exports}var h=D0(),R=Zu();const pg=fg(R),L0=j0({__proto__:null,default:pg},[R]);var Cl={},du={exports:{}},Lt={},hu={exports:{}},fu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function M0(){return Wp||(Wp=1,function(r){function e(F,M){var L=F.length;F.push(M);e:for(;0<L;){var E=L-1>>>1,j=F[E];if(0<l(j,M))F[E]=M,F[L]=j,L=E;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var M=F[0],L=F.pop();if(L!==M){F[0]=L;e:for(var E=0,j=F.length,ie=j>>>1;E<ie;){var ae=2*(E+1)-1,we=F[ae],pe=ae+1,Re=F[pe];if(0>l(we,L))pe<j&&0>l(Re,we)?(F[E]=Re,F[pe]=L,E=pe):(F[E]=we,F[ae]=L,E=ae);else if(pe<j&&0>l(Re,L))F[E]=Re,F[pe]=L,E=pe;else break e}}return M}function l(F,M){var L=F.sortIndex-M.sortIndex;return L!==0?L:F.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var m=[],y=[],x=1,_=null,v=3,k=!1,D=!1,z=!1,P=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(F){for(var M=n(y);M!==null;){if(M.callback===null)i(y);else if(M.startTime<=F)i(y),M.sortIndex=M.expirationTime,e(m,M);else break;M=n(y)}}function me(F){if(z=!1,ce(F),!D)if(n(m)!==null)D=!0,K(Te);else{var M=n(y);M!==null&&X(me,M.startTime-F)}}function Te(F,M){D=!1,z&&(z=!1,G(Me),Me=-1),k=!0;var L=v;try{for(ce(M),_=n(m);_!==null&&(!(_.expirationTime>M)||F&&!Ke());){var E=_.callback;if(typeof E=="function"){_.callback=null,v=_.priorityLevel;var j=E(_.expirationTime<=M);M=r.unstable_now(),typeof j=="function"?_.callback=j:_===n(m)&&i(m),ce(M)}else i(m);_=n(m)}if(_!==null)var ie=!0;else{var ae=n(y);ae!==null&&X(me,ae.startTime-M),ie=!1}return ie}finally{_=null,v=L,k=!1}}var Ce=!1,ve=null,Me=-1,Ve=5,oe=-1;function Ke(){return!(r.unstable_now()-oe<Ve)}function Fe(){if(ve!==null){var F=r.unstable_now();oe=F;var M=!0;try{M=ve(!0,F)}finally{M?O():(Ce=!1,ve=null)}}else Ce=!1}var O;if(typeof Y=="function")O=function(){Y(Fe)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Se=se.port2;se.port1.onmessage=Fe,O=function(){Se.postMessage(null)}}else O=function(){P(Fe,0)};function K(F){ve=F,Ce||(Ce=!0,O())}function X(F,M){Me=P(function(){F(r.unstable_now())},M)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_continueExecution=function(){D||k||(D=!0,K(Te))},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ve=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return n(m)},r.unstable_next=function(F){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var L=v;v=M;try{return F()}finally{v=L}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(F,M){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=v;v=F;try{return M()}finally{v=L}},r.unstable_scheduleCallback=function(F,M,L){var E=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?E+L:E):L=E,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=L+j,F={id:x++,callback:M,priorityLevel:F,startTime:L,expirationTime:j,sortIndex:-1},L>E?(F.sortIndex=L,e(y,F),n(m)===null&&F===n(y)&&(z?(G(Me),Me=-1):z=!0,X(me,L-E))):(F.sortIndex=j,e(m,F),D||k||(D=!0,K(Te))),F},r.unstable_shouldYield=Ke,r.unstable_wrapCallback=function(F){var M=v;return function(){var L=v;v=M;try{return F.apply(this,arguments)}finally{v=L}}}}(fu)),fu}var Vp;function F0(){return Vp||(Vp=1,hu.exports=M0()),hu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp;function U0(){if(Hp)return Lt;Hp=1;var r=Zu(),e=F0();function n(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(t,s){u(t,s),u(t+"Capture",s)}function u(t,s){for(l[t]=s,t=0;t<s.length;t++)i.add(s[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function v(t){return m.call(_,t)?!0:m.call(x,t)?!1:y.test(t)?_[t]=!0:(x[t]=!0,!1)}function k(t,s,o,a){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D(t,s,o,a){if(s===null||typeof s>"u"||k(t,s,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function z(t,s,o,a,d,f,g){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=s,this.sanitizeURL=f,this.removeEmptyString=g}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){P[t]=new z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];P[s]=new z(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){P[t]=new z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){P[t]=new z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){P[t]=new z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){P[t]=new z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){P[t]=new z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){P[t]=new z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){P[t]=new z(t,5,!1,t.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(G,Y);P[s]=new z(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(G,Y);P[s]=new z(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(G,Y);P[s]=new z(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){P[t]=new z(t,1,!1,t.toLowerCase(),null,!1,!1)}),P.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){P[t]=new z(t,1,!1,t.toLowerCase(),null,!0,!0)});function ce(t,s,o,a){var d=P.hasOwnProperty(s)?P[s]:null;(d!==null?d.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(D(s,o,d,a)&&(o=null),a||d===null?v(s)&&(o===null?t.removeAttribute(s):t.setAttribute(s,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(s=d.attributeName,a=d.attributeNamespace,o===null?t.removeAttribute(s):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,a?t.setAttributeNS(a,s,o):t.setAttribute(s,o))))}var me=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),Me=Symbol.for("react.strict_mode"),Ve=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),Ke=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),F=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=F&&t[F]||t["@@iterator"],typeof t=="function"?t:null)}var L=Object.assign,E;function j(t){if(E===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);E=s&&s[1]||""}return`
`+E+t}var ie=!1;function ae(t,s){if(!t||ie)return"";ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(T){var a=T}Reflect.construct(t,[],s)}else{try{s.call()}catch(T){a=T}t.call(s.prototype)}else{try{throw Error()}catch(T){a=T}t()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var d=T.stack.split(`
`),f=a.stack.split(`
`),g=d.length-1,w=f.length-1;1<=g&&0<=w&&d[g]!==f[w];)w--;for(;1<=g&&0<=w;g--,w--)if(d[g]!==f[w]){if(g!==1||w!==1)do if(g--,w--,0>w||d[g]!==f[w]){var C=`
`+d[g].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=g&&0<=w);break}}}finally{ie=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?j(t):""}function we(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=ae(t.type,!1),t;case 11:return t=ae(t.type.render,!1),t;case 1:return t=ae(t.type,!0),t;default:return""}}function pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ve:return"Fragment";case Ce:return"Portal";case Ve:return"Profiler";case Me:return"StrictMode";case O:return"Suspense";case se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ke:return(t.displayName||"Context")+".Consumer";case oe:return(t._context.displayName||"Context")+".Provider";case Fe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Se:return s=t.displayName||null,s!==null?s:pe(t.type)||"Memo";case K:s=t._payload,t=t._init;try{return pe(t(s))}catch{}}return null}function Re(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===Me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function N(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Q(t){var s=A(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function q(t){t._valueTracker||(t._valueTracker=Q(t))}function le(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),a="";return t&&(a=A(t)?t.checked?"true":"false":t.value),t=a,t!==o?(s.setValue(t),!0):!1}function he(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ne(t,s){var o=s.checked;return L({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function V(t,s){var o=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;o=N(s.value!=null?s.value:o),t._wrapperState={initialChecked:a,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pe(t,s){s=s.checked,s!=null&&ce(t,"checked",s,!1)}function xe(t,s){Pe(t,s);var o=N(s.value),a=s.type;if(o!=null)a==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?et(t,s.type,o):s.hasOwnProperty("defaultValue")&&et(t,s.type,N(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function ke(t,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,o||s===t.value||(t.value=s),t.defaultValue=s}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function et(t,s,o){(s!=="number"||he(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var je=Array.isArray;function vt(t,s,o,a){if(t=t.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=s.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&a&&(t[o].defaultSelected=!0)}else{for(o=""+N(o),s=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,a&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Pt(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wr(t,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(n(92));if(je(o)){if(1<o.length)throw Error(n(93));o=o[0]}s=o}s==null&&(s=""),o=s}t._wrapperState={initialValue:N(o)}}function Qd(t,s){var o=N(s.value),a=N(s.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),s.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),a!=null&&(t.defaultValue=""+a)}function Yd(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Jd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xa(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Jd(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var po,Xd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,a,d){MSApp.execUnsafeLocalFunction(function(){return t(s,o,a,d)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(po=po||document.createElement("div"),po.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Vs(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lv=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(t){Lv.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Hs[s]=Hs[t]})});function Zd(t,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||Hs.hasOwnProperty(t)&&Hs[t]?(""+s).trim():s+"px"}function eh(t,s){t=t.style;for(var o in s)if(s.hasOwnProperty(o)){var a=o.indexOf("--")===0,d=Zd(o,s[o],a);o==="float"&&(o="cssFloat"),a?t.setProperty(o,d):t[o]=d}}var Mv=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wa(t,s){if(s){if(Mv[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Ca(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sa=null;function Ea(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Na=null,Qr=null,Yr=null;function th(t){if(t=fi(t)){if(typeof Na!="function")throw Error(n(280));var s=t.stateNode;s&&(s=Mo(s),Na(t.stateNode,t.type,s))}}function nh(t){Qr?Yr?Yr.push(t):Yr=[t]:Qr=t}function rh(){if(Qr){var t=Qr,s=Yr;if(Yr=Qr=null,th(t),s)for(t=0;t<s.length;t++)th(s[t])}}function sh(t,s){return t(s)}function ih(){}var Ia=!1;function oh(t,s,o){if(Ia)return t(s,o);Ia=!0;try{return sh(t,s,o)}finally{Ia=!1,(Qr!==null||Yr!==null)&&(ih(),rh())}}function Gs(t,s){var o=t.stateNode;if(o===null)return null;var a=Mo(o);if(a===null)return null;o=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var ka=!1;if(p)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){ka=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{ka=!1}function Fv(t,s,o,a,d,f,g,w,C){var T=Array.prototype.slice.call(arguments,3);try{s.apply(o,T)}catch($){this.onError($)}}var qs=!1,mo=null,go=!1,ba=null,Uv={onError:function(t){qs=!0,mo=t}};function $v(t,s,o,a,d,f,g,w,C){qs=!1,mo=null,Fv.apply(Uv,arguments)}function zv(t,s,o,a,d,f,g,w,C){if($v.apply(this,arguments),qs){if(qs){var T=mo;qs=!1,mo=null}else throw Error(n(198));go||(go=!0,ba=T)}}function Cr(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function lh(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ah(t){if(Cr(t)!==t)throw Error(n(188))}function Bv(t){var s=t.alternate;if(!s){if(s=Cr(t),s===null)throw Error(n(188));return s!==t?null:t}for(var o=t,a=s;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(a=d.return,a!==null){o=a;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return ah(d),t;if(f===a)return ah(d),s;f=f.sibling}throw Error(n(188))}if(o.return!==a.return)o=d,a=f;else{for(var g=!1,w=d.child;w;){if(w===o){g=!0,o=d,a=f;break}if(w===a){g=!0,a=d,o=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===o){g=!0,o=f,a=d;break}if(w===a){g=!0,a=f,o=d;break}w=w.sibling}if(!g)throw Error(n(189))}}if(o.alternate!==a)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:s}function ch(t){return t=Bv(t),t!==null?uh(t):null}function uh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=uh(t);if(s!==null)return s;t=t.sibling}return null}var dh=e.unstable_scheduleCallback,hh=e.unstable_cancelCallback,Wv=e.unstable_shouldYield,Vv=e.unstable_requestPaint,tt=e.unstable_now,Hv=e.unstable_getCurrentPriorityLevel,Ta=e.unstable_ImmediatePriority,fh=e.unstable_UserBlockingPriority,yo=e.unstable_NormalPriority,Gv=e.unstable_LowPriority,ph=e.unstable_IdlePriority,vo=null,un=null;function Kv(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(vo,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Yv,qv=Math.log,Qv=Math.LN2;function Yv(t){return t>>>=0,t===0?32:31-(qv(t)/Qv|0)|0}var _o=64,xo=4194304;function Qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wo(t,s){var o=t.pendingLanes;if(o===0)return 0;var a=0,d=t.suspendedLanes,f=t.pingedLanes,g=o&268435455;if(g!==0){var w=g&~d;w!==0?a=Qs(w):(f&=g,f!==0&&(a=Qs(f)))}else g=o&~d,g!==0?a=Qs(g):f!==0&&(a=Qs(f));if(a===0)return 0;if(s!==0&&s!==a&&(s&d)===0&&(d=a&-a,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((a&4)!==0&&(a|=o&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)o=31-Xt(s),d=1<<o,a|=t[o],s&=~d;return a}function Jv(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xv(t,s){for(var o=t.suspendedLanes,a=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes;0<f;){var g=31-Xt(f),w=1<<g,C=d[g];C===-1?((w&o)===0||(w&a)!==0)&&(d[g]=Jv(w,s)):C<=s&&(t.expiredLanes|=w),f&=~w}}function Pa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mh(){var t=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),t}function Ra(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function Ys(t,s,o){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Xt(s),t[s]=o}function Zv(t,s){var o=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-Xt(o),f=1<<d;s[d]=0,a[d]=-1,t[d]=-1,o&=~f}}function ja(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var a=31-Xt(o),d=1<<a;d&s|t[a]&s&&(t[a]|=s),o&=~d}}var Le=0;function gh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var yh,Aa,vh,_h,xh,Oa=!1,Co=[],Mn=null,Fn=null,Un=null,Js=new Map,Xs=new Map,$n=[],e_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wh(t,s){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Js.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(s.pointerId)}}function Zs(t,s,o,a,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[d]},s!==null&&(s=fi(s),s!==null&&Aa(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function t_(t,s,o,a,d){switch(s){case"focusin":return Mn=Zs(Mn,t,s,o,a,d),!0;case"dragenter":return Fn=Zs(Fn,t,s,o,a,d),!0;case"mouseover":return Un=Zs(Un,t,s,o,a,d),!0;case"pointerover":var f=d.pointerId;return Js.set(f,Zs(Js.get(f)||null,t,s,o,a,d)),!0;case"gotpointercapture":return f=d.pointerId,Xs.set(f,Zs(Xs.get(f)||null,t,s,o,a,d)),!0}return!1}function Ch(t){var s=Sr(t.target);if(s!==null){var o=Cr(s);if(o!==null){if(s=o.tag,s===13){if(s=lh(o),s!==null){t.blockedOn=s,xh(t.priority,function(){vh(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function So(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=La(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var a=new o.constructor(o.type,o);Sa=a,o.target.dispatchEvent(a),Sa=null}else return s=fi(o),s!==null&&Aa(s),t.blockedOn=o,!1;s.shift()}return!0}function Sh(t,s,o){So(t)&&o.delete(s)}function n_(){Oa=!1,Mn!==null&&So(Mn)&&(Mn=null),Fn!==null&&So(Fn)&&(Fn=null),Un!==null&&So(Un)&&(Un=null),Js.forEach(Sh),Xs.forEach(Sh)}function ei(t,s){t.blockedOn===s&&(t.blockedOn=null,Oa||(Oa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,n_)))}function ti(t){function s(d){return ei(d,t)}if(0<Co.length){ei(Co[0],t);for(var o=1;o<Co.length;o++){var a=Co[o];a.blockedOn===t&&(a.blockedOn=null)}}for(Mn!==null&&ei(Mn,t),Fn!==null&&ei(Fn,t),Un!==null&&ei(Un,t),Js.forEach(s),Xs.forEach(s),o=0;o<$n.length;o++)a=$n[o],a.blockedOn===t&&(a.blockedOn=null);for(;0<$n.length&&(o=$n[0],o.blockedOn===null);)Ch(o),o.blockedOn===null&&$n.shift()}var Jr=me.ReactCurrentBatchConfig,Eo=!0;function r_(t,s,o,a){var d=Le,f=Jr.transition;Jr.transition=null;try{Le=1,Da(t,s,o,a)}finally{Le=d,Jr.transition=f}}function s_(t,s,o,a){var d=Le,f=Jr.transition;Jr.transition=null;try{Le=4,Da(t,s,o,a)}finally{Le=d,Jr.transition=f}}function Da(t,s,o,a){if(Eo){var d=La(t,s,o,a);if(d===null)Za(t,s,a,No,o),wh(t,a);else if(t_(d,t,s,o,a))a.stopPropagation();else if(wh(t,a),s&4&&-1<e_.indexOf(t)){for(;d!==null;){var f=fi(d);if(f!==null&&yh(f),f=La(t,s,o,a),f===null&&Za(t,s,a,No,o),f===d)break;d=f}d!==null&&a.stopPropagation()}else Za(t,s,a,null,o)}}var No=null;function La(t,s,o,a){if(No=null,t=Ea(a),t=Sr(t),t!==null)if(s=Cr(t),s===null)t=null;else if(o=s.tag,o===13){if(t=lh(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return No=t,null}function Eh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hv()){case Ta:return 1;case fh:return 4;case yo:case Gv:return 16;case ph:return 536870912;default:return 16}default:return 16}}var zn=null,Ma=null,Io=null;function Nh(){if(Io)return Io;var t,s=Ma,o=s.length,a,d="value"in zn?zn.value:zn.textContent,f=d.length;for(t=0;t<o&&s[t]===d[t];t++);var g=o-t;for(a=1;a<=g&&s[o-a]===d[f-a];a++);return Io=d.slice(t,1<a?1-a:void 0)}function ko(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function Ih(){return!1}function Ut(t){function s(o,a,d,f,g){this._reactName=o,this._targetInst=d,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?bo:Ih,this.isPropagationStopped=Ih,this}return L(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),s}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=Ut(Xr),ni=L({},Xr,{view:0,detail:0}),i_=Ut(ni),Ua,$a,ri,To=L({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Ua=t.screenX-ri.screenX,$a=t.screenY-ri.screenY):$a=Ua=0,ri=t),Ua)},movementY:function(t){return"movementY"in t?t.movementY:$a}}),kh=Ut(To),o_=L({},To,{dataTransfer:0}),l_=Ut(o_),a_=L({},ni,{relatedTarget:0}),za=Ut(a_),c_=L({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),u_=Ut(c_),d_=L({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h_=Ut(d_),f_=L({},Xr,{data:0}),bh=Ut(f_),p_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y_(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=g_[t])?!!s[t]:!1}function Ba(){return y_}var v_=L({},ni,{key:function(t){if(t.key){var s=p_[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(t){return t.type==="keypress"?ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),__=Ut(v_),x_=L({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Th=Ut(x_),w_=L({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),C_=Ut(w_),S_=L({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),E_=Ut(S_),N_=L({},To,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I_=Ut(N_),k_=[9,13,27,32],Wa=p&&"CompositionEvent"in window,si=null;p&&"documentMode"in document&&(si=document.documentMode);var b_=p&&"TextEvent"in window&&!si,Ph=p&&(!Wa||si&&8<si&&11>=si),Rh=" ",jh=!1;function Ah(t,s){switch(t){case"keyup":return k_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function T_(t,s){switch(t){case"compositionend":return Oh(s);case"keypress":return s.which!==32?null:(jh=!0,Rh);case"textInput":return t=s.data,t===Rh&&jh?null:t;default:return null}}function P_(t,s){if(Zr)return t==="compositionend"||!Wa&&Ah(t,s)?(t=Nh(),Io=Ma=zn=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ph&&s.locale!=="ko"?null:s.data;default:return null}}var R_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!R_[t.type]:s==="textarea"}function Lh(t,s,o,a){nh(a),s=Oo(s,"onChange"),0<s.length&&(o=new Fa("onChange","change",null,o,a),t.push({event:o,listeners:s}))}var ii=null,oi=null;function j_(t){ef(t,0)}function Po(t){var s=ss(t);if(le(s))return t}function A_(t,s){if(t==="change")return s}var Mh=!1;if(p){var Va;if(p){var Ha="oninput"in document;if(!Ha){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),Ha=typeof Fh.oninput=="function"}Va=Ha}else Va=!1;Mh=Va&&(!document.documentMode||9<document.documentMode)}function Uh(){ii&&(ii.detachEvent("onpropertychange",$h),oi=ii=null)}function $h(t){if(t.propertyName==="value"&&Po(oi)){var s=[];Lh(s,oi,t,Ea(t)),oh(j_,s)}}function O_(t,s,o){t==="focusin"?(Uh(),ii=s,oi=o,ii.attachEvent("onpropertychange",$h)):t==="focusout"&&Uh()}function D_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(oi)}function L_(t,s){if(t==="click")return Po(s)}function M_(t,s){if(t==="input"||t==="change")return Po(s)}function F_(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Zt=typeof Object.is=="function"?Object.is:F_;function li(t,s){if(Zt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),a=Object.keys(s);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var d=o[a];if(!m.call(s,d)||!Zt(t[d],s[d]))return!1}return!0}function zh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bh(t,s){var o=zh(t);t=0;for(var a;o;){if(o.nodeType===3){if(a=t+o.textContent.length,t<=s&&a>=s)return{node:o,offset:s-t};t=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zh(o)}}function Wh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Wh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Vh(){for(var t=window,s=he();s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=he(t.document)}return s}function Ga(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function U_(t){var s=Vh(),o=t.focusedElem,a=t.selectionRange;if(s!==o&&o&&o.ownerDocument&&Wh(o.ownerDocument.documentElement,o)){if(a!==null&&Ga(o)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(t,o.value.length);else if(t=(s=o.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,f=Math.min(a.start,d);a=a.end===void 0?f:Math.min(a.end,d),!t.extend&&f>a&&(d=a,a=f,f=d),d=Bh(o,f);var g=Bh(o,a);d&&g&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),t.removeAllRanges(),f>a?(t.addRange(s),t.extend(g.node,g.offset)):(s.setEnd(g.node,g.offset),t.addRange(s)))}}for(s=[],t=o;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)t=s[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $_=p&&"documentMode"in document&&11>=document.documentMode,es=null,Ka=null,ai=null,qa=!1;function Hh(t,s,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qa||es==null||es!==he(a)||(a=es,"selectionStart"in a&&Ga(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ai&&li(ai,a)||(ai=a,a=Oo(Ka,"onSelect"),0<a.length&&(s=new Fa("onSelect","select",null,s,o),t.push({event:s,listeners:a}),s.target=es)))}function Ro(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var ts={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},Qa={},Gh={};p&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function jo(t){if(Qa[t])return Qa[t];if(!ts[t])return t;var s=ts[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in Gh)return Qa[t]=s[o];return t}var Kh=jo("animationend"),qh=jo("animationiteration"),Qh=jo("animationstart"),Yh=jo("transitionend"),Jh=new Map,Xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(t,s){Jh.set(t,s),c(s,[t])}for(var Ya=0;Ya<Xh.length;Ya++){var Ja=Xh[Ya],z_=Ja.toLowerCase(),B_=Ja[0].toUpperCase()+Ja.slice(1);Bn(z_,"on"+B_)}Bn(Kh,"onAnimationEnd"),Bn(qh,"onAnimationIteration"),Bn(Qh,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Yh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ci));function Zh(t,s,o){var a=t.type||"unknown-event";t.currentTarget=o,zv(a,s,void 0,t),t.currentTarget=null}function ef(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var a=t[o],d=a.event;a=a.listeners;e:{var f=void 0;if(s)for(var g=a.length-1;0<=g;g--){var w=a[g],C=w.instance,T=w.currentTarget;if(w=w.listener,C!==f&&d.isPropagationStopped())break e;Zh(d,w,T),f=C}else for(g=0;g<a.length;g++){if(w=a[g],C=w.instance,T=w.currentTarget,w=w.listener,C!==f&&d.isPropagationStopped())break e;Zh(d,w,T),f=C}}}if(go)throw t=ba,go=!1,ba=null,t}function He(t,s){var o=s[ic];o===void 0&&(o=s[ic]=new Set);var a=t+"__bubble";o.has(a)||(tf(s,t,2,!1),o.add(a))}function Xa(t,s,o){var a=0;s&&(a|=4),tf(o,t,a,s)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function ui(t){if(!t[Ao]){t[Ao]=!0,i.forEach(function(o){o!=="selectionchange"&&(W_.has(o)||Xa(o,!1,t),Xa(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ao]||(s[Ao]=!0,Xa("selectionchange",!1,s))}}function tf(t,s,o,a){switch(Eh(s)){case 1:var d=r_;break;case 4:d=s_;break;default:d=Da}o=d.bind(null,s,o,t),d=void 0,!ka||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),a?d!==void 0?t.addEventListener(s,o,{capture:!0,passive:d}):t.addEventListener(s,o,!0):d!==void 0?t.addEventListener(s,o,{passive:d}):t.addEventListener(s,o,!1)}function Za(t,s,o,a,d){var f=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var w=a.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(g===4)for(g=a.return;g!==null;){var C=g.tag;if((C===3||C===4)&&(C=g.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;g=g.return}for(;w!==null;){if(g=Sr(w),g===null)return;if(C=g.tag,C===5||C===6){a=f=g;continue e}w=w.parentNode}}a=a.return}oh(function(){var T=f,$=Ea(o),B=[];e:{var U=Jh.get(t);if(U!==void 0){var J=Fa,ee=t;switch(t){case"keypress":if(ko(o)===0)break e;case"keydown":case"keyup":J=__;break;case"focusin":ee="focus",J=za;break;case"focusout":ee="blur",J=za;break;case"beforeblur":case"afterblur":J=za;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=l_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=C_;break;case Kh:case qh:case Qh:J=u_;break;case Yh:J=E_;break;case"scroll":J=i_;break;case"wheel":J=I_;break;case"copy":case"cut":case"paste":J=h_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Th}var te=(s&4)!==0,nt=!te&&t==="scroll",I=te?U!==null?U+"Capture":null:U;te=[];for(var S=T,b;S!==null;){b=S;var W=b.stateNode;if(b.tag===5&&W!==null&&(b=W,I!==null&&(W=Gs(S,I),W!=null&&te.push(di(S,W,b)))),nt)break;S=S.return}0<te.length&&(U=new J(U,ee,null,o,$),B.push({event:U,listeners:te}))}}if((s&7)===0){e:{if(U=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",U&&o!==Sa&&(ee=o.relatedTarget||o.fromElement)&&(Sr(ee)||ee[xn]))break e;if((J||U)&&(U=$.window===$?$:(U=$.ownerDocument)?U.defaultView||U.parentWindow:window,J?(ee=o.relatedTarget||o.toElement,J=T,ee=ee?Sr(ee):null,ee!==null&&(nt=Cr(ee),ee!==nt||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(J=null,ee=T),J!==ee)){if(te=kh,W="onMouseLeave",I="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(te=Th,W="onPointerLeave",I="onPointerEnter",S="pointer"),nt=J==null?U:ss(J),b=ee==null?U:ss(ee),U=new te(W,S+"leave",J,o,$),U.target=nt,U.relatedTarget=b,W=null,Sr($)===T&&(te=new te(I,S+"enter",ee,o,$),te.target=b,te.relatedTarget=nt,W=te),nt=W,J&&ee)t:{for(te=J,I=ee,S=0,b=te;b;b=ns(b))S++;for(b=0,W=I;W;W=ns(W))b++;for(;0<S-b;)te=ns(te),S--;for(;0<b-S;)I=ns(I),b--;for(;S--;){if(te===I||I!==null&&te===I.alternate)break t;te=ns(te),I=ns(I)}te=null}else te=null;J!==null&&nf(B,U,J,te,!1),ee!==null&&nt!==null&&nf(B,nt,ee,te,!0)}}e:{if(U=T?ss(T):window,J=U.nodeName&&U.nodeName.toLowerCase(),J==="select"||J==="input"&&U.type==="file")var re=A_;else if(Dh(U))if(Mh)re=M_;else{re=D_;var ue=O_}else(J=U.nodeName)&&J.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(re=L_);if(re&&(re=re(t,T))){Lh(B,re,o,$);break e}ue&&ue(t,U,T),t==="focusout"&&(ue=U._wrapperState)&&ue.controlled&&U.type==="number"&&et(U,"number",U.value)}switch(ue=T?ss(T):window,t){case"focusin":(Dh(ue)||ue.contentEditable==="true")&&(es=ue,Ka=T,ai=null);break;case"focusout":ai=Ka=es=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,Hh(B,o,$);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Hh(B,o,$)}var de;if(Wa)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Zr?Ah(t,o)&&(ge="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(Ph&&o.locale!=="ko"&&(Zr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Zr&&(de=Nh()):(zn=$,Ma="value"in zn?zn.value:zn.textContent,Zr=!0)),ue=Oo(T,ge),0<ue.length&&(ge=new bh(ge,t,null,o,$),B.push({event:ge,listeners:ue}),de?ge.data=de:(de=Oh(o),de!==null&&(ge.data=de)))),(de=b_?T_(t,o):P_(t,o))&&(T=Oo(T,"onBeforeInput"),0<T.length&&($=new bh("onBeforeInput","beforeinput",null,o,$),B.push({event:$,listeners:T}),$.data=de))}ef(B,s)})}function di(t,s,o){return{instance:t,listener:s,currentTarget:o}}function Oo(t,s){for(var o=s+"Capture",a=[];t!==null;){var d=t,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Gs(t,o),f!=null&&a.unshift(di(t,f,d)),f=Gs(t,s),f!=null&&a.push(di(t,f,d))),t=t.return}return a}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nf(t,s,o,a,d){for(var f=s._reactName,g=[];o!==null&&o!==a;){var w=o,C=w.alternate,T=w.stateNode;if(C!==null&&C===a)break;w.tag===5&&T!==null&&(w=T,d?(C=Gs(o,f),C!=null&&g.unshift(di(o,C,w))):d||(C=Gs(o,f),C!=null&&g.push(di(o,C,w)))),o=o.return}g.length!==0&&t.push({event:s,listeners:g})}var V_=/\r\n?/g,H_=/\u0000|\uFFFD/g;function rf(t){return(typeof t=="string"?t:""+t).replace(V_,`
`).replace(H_,"")}function Do(t,s,o){if(s=rf(s),rf(t)!==s&&o)throw Error(n(425))}function Lo(){}var ec=null,tc=null;function nc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,G_=typeof clearTimeout=="function"?clearTimeout:void 0,sf=typeof Promise=="function"?Promise:void 0,K_=typeof queueMicrotask=="function"?queueMicrotask:typeof sf<"u"?function(t){return sf.resolve(null).then(t).catch(q_)}:rc;function q_(t){setTimeout(function(){throw t})}function sc(t,s){var o=s,a=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(a===0){t.removeChild(d),ti(s);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=d}while(o);ti(s)}function Wn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function of(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return t;s--}else o==="/$"&&s++}t=t.previousSibling}return null}var rs=Math.random().toString(36).slice(2),dn="__reactFiber$"+rs,hi="__reactProps$"+rs,xn="__reactContainer$"+rs,ic="__reactEvents$"+rs,Q_="__reactListeners$"+rs,Y_="__reactHandles$"+rs;function Sr(t){var s=t[dn];if(s)return s;for(var o=t.parentNode;o;){if(s=o[xn]||o[dn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=of(t);t!==null;){if(o=t[dn])return o;t=of(t)}return s}t=o,o=t.parentNode}return null}function fi(t){return t=t[dn]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Mo(t){return t[hi]||null}var oc=[],is=-1;function Vn(t){return{current:t}}function Ge(t){0>is||(t.current=oc[is],oc[is]=null,is--)}function ze(t,s){is++,oc[is]=t.current,t.current=s}var Hn={},_t=Vn(Hn),Rt=Vn(!1),Er=Hn;function os(t,s){var o=t.type.contextTypes;if(!o)return Hn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in o)d[f]=s[f];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=d),d}function jt(t){return t=t.childContextTypes,t!=null}function Fo(){Ge(Rt),Ge(_t)}function lf(t,s,o){if(_t.current!==Hn)throw Error(n(168));ze(_t,s),ze(Rt,o)}function af(t,s,o){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var d in a)if(!(d in s))throw Error(n(108,Re(t)||"Unknown",d));return L({},o,a)}function Uo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,Er=_t.current,ze(_t,t),ze(Rt,Rt.current),!0}function cf(t,s,o){var a=t.stateNode;if(!a)throw Error(n(169));o?(t=af(t,s,Er),a.__reactInternalMemoizedMergedChildContext=t,Ge(Rt),Ge(_t),ze(_t,t)):Ge(Rt),ze(Rt,o)}var wn=null,$o=!1,lc=!1;function uf(t){wn===null?wn=[t]:wn.push(t)}function J_(t){$o=!0,uf(t)}function Gn(){if(!lc&&wn!==null){lc=!0;var t=0,s=Le;try{var o=wn;for(Le=1;t<o.length;t++){var a=o[t];do a=a(!0);while(a!==null)}wn=null,$o=!1}catch(d){throw wn!==null&&(wn=wn.slice(t+1)),dh(Ta,Gn),d}finally{Le=s,lc=!1}}return null}var ls=[],as=0,zo=null,Bo=0,Vt=[],Ht=0,Nr=null,Cn=1,Sn="";function Ir(t,s){ls[as++]=Bo,ls[as++]=zo,zo=t,Bo=s}function df(t,s,o){Vt[Ht++]=Cn,Vt[Ht++]=Sn,Vt[Ht++]=Nr,Nr=t;var a=Cn;t=Sn;var d=32-Xt(a)-1;a&=~(1<<d),o+=1;var f=32-Xt(s)+d;if(30<f){var g=d-d%5;f=(a&(1<<g)-1).toString(32),a>>=g,d-=g,Cn=1<<32-Xt(s)+d|o<<d|a,Sn=f+t}else Cn=1<<f|o<<d|a,Sn=t}function ac(t){t.return!==null&&(Ir(t,1),df(t,1,0))}function cc(t){for(;t===zo;)zo=ls[--as],ls[as]=null,Bo=ls[--as],ls[as]=null;for(;t===Nr;)Nr=Vt[--Ht],Vt[Ht]=null,Sn=Vt[--Ht],Vt[Ht]=null,Cn=Vt[--Ht],Vt[Ht]=null}var $t=null,zt=null,qe=!1,en=null;function hf(t,s){var o=Qt(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=t,s=t.deletions,s===null?(t.deletions=[o],t.flags|=16):s.push(o)}function ff(t,s){switch(t.tag){case 5:var o=t.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,$t=t,zt=Wn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,$t=t,zt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=Nr!==null?{id:Cn,overflow:Sn}:null,t.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Qt(18,null,null,0),o.stateNode=s,o.return=t,t.child=o,$t=t,zt=null,!0):!1;default:return!1}}function uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dc(t){if(qe){var s=zt;if(s){var o=s;if(!ff(t,s)){if(uc(t))throw Error(n(418));s=Wn(o.nextSibling);var a=$t;s&&ff(t,s)?hf(a,o):(t.flags=t.flags&-4097|2,qe=!1,$t=t)}}else{if(uc(t))throw Error(n(418));t.flags=t.flags&-4097|2,qe=!1,$t=t}}}function pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Wo(t){if(t!==$t)return!1;if(!qe)return pf(t),qe=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!nc(t.type,t.memoizedProps)),s&&(s=zt)){if(uc(t))throw mf(),Error(n(418));for(;s;)hf(t,s),s=Wn(s.nextSibling)}if(pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(s===0){zt=Wn(t.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}t=t.nextSibling}zt=null}}else zt=$t?Wn(t.stateNode.nextSibling):null;return!0}function mf(){for(var t=zt;t;)t=Wn(t.nextSibling)}function cs(){zt=$t=null,qe=!1}function hc(t){en===null?en=[t]:en.push(t)}var X_=me.ReactCurrentBatchConfig;function pi(t,s,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var a=o.stateNode}if(!a)throw Error(n(147,t));var d=a,f=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(g){var w=d.refs;g===null?delete w[f]:w[f]=g},s._stringRef=f,s)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Vo(t,s){throw t=Object.prototype.toString.call(s),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function gf(t){var s=t._init;return s(t._payload)}function yf(t){function s(I,S){if(t){var b=I.deletions;b===null?(I.deletions=[S],I.flags|=16):b.push(S)}}function o(I,S){if(!t)return null;for(;S!==null;)s(I,S),S=S.sibling;return null}function a(I,S){for(I=new Map;S!==null;)S.key!==null?I.set(S.key,S):I.set(S.index,S),S=S.sibling;return I}function d(I,S){return I=er(I,S),I.index=0,I.sibling=null,I}function f(I,S,b){return I.index=b,t?(b=I.alternate,b!==null?(b=b.index,b<S?(I.flags|=2,S):b):(I.flags|=2,S)):(I.flags|=1048576,S)}function g(I){return t&&I.alternate===null&&(I.flags|=2),I}function w(I,S,b,W){return S===null||S.tag!==6?(S=ru(b,I.mode,W),S.return=I,S):(S=d(S,b),S.return=I,S)}function C(I,S,b,W){var re=b.type;return re===ve?$(I,S,b.props.children,W,b.key):S!==null&&(S.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&gf(re)===S.type)?(W=d(S,b.props),W.ref=pi(I,S,b),W.return=I,W):(W=pl(b.type,b.key,b.props,null,I.mode,W),W.ref=pi(I,S,b),W.return=I,W)}function T(I,S,b,W){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=su(b,I.mode,W),S.return=I,S):(S=d(S,b.children||[]),S.return=I,S)}function $(I,S,b,W,re){return S===null||S.tag!==7?(S=Or(b,I.mode,W,re),S.return=I,S):(S=d(S,b),S.return=I,S)}function B(I,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ru(""+S,I.mode,b),S.return=I,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Te:return b=pl(S.type,S.key,S.props,null,I.mode,b),b.ref=pi(I,null,S),b.return=I,b;case Ce:return S=su(S,I.mode,b),S.return=I,S;case K:var W=S._init;return B(I,W(S._payload),b)}if(je(S)||M(S))return S=Or(S,I.mode,b,null),S.return=I,S;Vo(I,S)}return null}function U(I,S,b,W){var re=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return re!==null?null:w(I,S,""+b,W);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Te:return b.key===re?C(I,S,b,W):null;case Ce:return b.key===re?T(I,S,b,W):null;case K:return re=b._init,U(I,S,re(b._payload),W)}if(je(b)||M(b))return re!==null?null:$(I,S,b,W,null);Vo(I,b)}return null}function J(I,S,b,W,re){if(typeof W=="string"&&W!==""||typeof W=="number")return I=I.get(b)||null,w(S,I,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Te:return I=I.get(W.key===null?b:W.key)||null,C(S,I,W,re);case Ce:return I=I.get(W.key===null?b:W.key)||null,T(S,I,W,re);case K:var ue=W._init;return J(I,S,b,ue(W._payload),re)}if(je(W)||M(W))return I=I.get(b)||null,$(S,I,W,re,null);Vo(S,W)}return null}function ee(I,S,b,W){for(var re=null,ue=null,de=S,ge=S=0,dt=null;de!==null&&ge<b.length;ge++){de.index>ge?(dt=de,de=null):dt=de.sibling;var Oe=U(I,de,b[ge],W);if(Oe===null){de===null&&(de=dt);break}t&&de&&Oe.alternate===null&&s(I,de),S=f(Oe,S,ge),ue===null?re=Oe:ue.sibling=Oe,ue=Oe,de=dt}if(ge===b.length)return o(I,de),qe&&Ir(I,ge),re;if(de===null){for(;ge<b.length;ge++)de=B(I,b[ge],W),de!==null&&(S=f(de,S,ge),ue===null?re=de:ue.sibling=de,ue=de);return qe&&Ir(I,ge),re}for(de=a(I,de);ge<b.length;ge++)dt=J(de,I,ge,b[ge],W),dt!==null&&(t&&dt.alternate!==null&&de.delete(dt.key===null?ge:dt.key),S=f(dt,S,ge),ue===null?re=dt:ue.sibling=dt,ue=dt);return t&&de.forEach(function(tr){return s(I,tr)}),qe&&Ir(I,ge),re}function te(I,S,b,W){var re=M(b);if(typeof re!="function")throw Error(n(150));if(b=re.call(b),b==null)throw Error(n(151));for(var ue=re=null,de=S,ge=S=0,dt=null,Oe=b.next();de!==null&&!Oe.done;ge++,Oe=b.next()){de.index>ge?(dt=de,de=null):dt=de.sibling;var tr=U(I,de,Oe.value,W);if(tr===null){de===null&&(de=dt);break}t&&de&&tr.alternate===null&&s(I,de),S=f(tr,S,ge),ue===null?re=tr:ue.sibling=tr,ue=tr,de=dt}if(Oe.done)return o(I,de),qe&&Ir(I,ge),re;if(de===null){for(;!Oe.done;ge++,Oe=b.next())Oe=B(I,Oe.value,W),Oe!==null&&(S=f(Oe,S,ge),ue===null?re=Oe:ue.sibling=Oe,ue=Oe);return qe&&Ir(I,ge),re}for(de=a(I,de);!Oe.done;ge++,Oe=b.next())Oe=J(de,I,ge,Oe.value,W),Oe!==null&&(t&&Oe.alternate!==null&&de.delete(Oe.key===null?ge:Oe.key),S=f(Oe,S,ge),ue===null?re=Oe:ue.sibling=Oe,ue=Oe);return t&&de.forEach(function(R0){return s(I,R0)}),qe&&Ir(I,ge),re}function nt(I,S,b,W){if(typeof b=="object"&&b!==null&&b.type===ve&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Te:e:{for(var re=b.key,ue=S;ue!==null;){if(ue.key===re){if(re=b.type,re===ve){if(ue.tag===7){o(I,ue.sibling),S=d(ue,b.props.children),S.return=I,I=S;break e}}else if(ue.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===K&&gf(re)===ue.type){o(I,ue.sibling),S=d(ue,b.props),S.ref=pi(I,ue,b),S.return=I,I=S;break e}o(I,ue);break}else s(I,ue);ue=ue.sibling}b.type===ve?(S=Or(b.props.children,I.mode,W,b.key),S.return=I,I=S):(W=pl(b.type,b.key,b.props,null,I.mode,W),W.ref=pi(I,S,b),W.return=I,I=W)}return g(I);case Ce:e:{for(ue=b.key;S!==null;){if(S.key===ue)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){o(I,S.sibling),S=d(S,b.children||[]),S.return=I,I=S;break e}else{o(I,S);break}else s(I,S);S=S.sibling}S=su(b,I.mode,W),S.return=I,I=S}return g(I);case K:return ue=b._init,nt(I,S,ue(b._payload),W)}if(je(b))return ee(I,S,b,W);if(M(b))return te(I,S,b,W);Vo(I,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(o(I,S.sibling),S=d(S,b),S.return=I,I=S):(o(I,S),S=ru(b,I.mode,W),S.return=I,I=S),g(I)):o(I,S)}return nt}var us=yf(!0),vf=yf(!1),Ho=Vn(null),Go=null,ds=null,fc=null;function pc(){fc=ds=Go=null}function mc(t){var s=Ho.current;Ge(Ho),t._currentValue=s}function gc(t,s,o){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===o)break;t=t.return}}function hs(t,s){Go=t,fc=ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(At=!0),t.firstContext=null)}function Gt(t){var s=t._currentValue;if(fc!==t)if(t={context:t,memoizedValue:s,next:null},ds===null){if(Go===null)throw Error(n(308));ds=t,Go.dependencies={lanes:0,firstContext:t}}else ds=ds.next=t;return s}var kr=null;function yc(t){kr===null?kr=[t]:kr.push(t)}function _f(t,s,o,a){var d=s.interleaved;return d===null?(o.next=o,yc(s)):(o.next=d.next,d.next=o),s.interleaved=o,En(t,a)}function En(t,s){t.lanes|=s;var o=t.alternate;for(o!==null&&(o.lanes|=s),o=t,t=t.return;t!==null;)t.childLanes|=s,o=t.alternate,o!==null&&(o.childLanes|=s),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Kn=!1;function vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function qn(t,s,o){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ae&2)!==0){var d=a.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),a.pending=s,En(t,o)}return d=a.interleaved,d===null?(s.next=s,yc(a)):(s.next=d.next,d.next=s),a.interleaved=s,En(t,o)}function Ko(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,o|=a,s.lanes=o,ja(t,o)}}function wf(t,s){var o=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?d=f=g:f=f.next=g,o=o.next}while(o!==null);f===null?d=f=s:f=f.next=s}else d=f=s;o={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:a.shared,effects:a.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}function qo(t,s,o,a){var d=t.updateQueue;Kn=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var C=w,T=C.next;C.next=null,g===null?f=T:g.next=T,g=C;var $=t.alternate;$!==null&&($=$.updateQueue,w=$.lastBaseUpdate,w!==g&&(w===null?$.firstBaseUpdate=T:w.next=T,$.lastBaseUpdate=C))}if(f!==null){var B=d.baseState;g=0,$=T=C=null,w=f;do{var U=w.lane,J=w.eventTime;if((a&U)===U){$!==null&&($=$.next={eventTime:J,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var ee=t,te=w;switch(U=s,J=o,te.tag){case 1:if(ee=te.payload,typeof ee=="function"){B=ee.call(J,B,U);break e}B=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=te.payload,U=typeof ee=="function"?ee.call(J,B,U):ee,U==null)break e;B=L({},B,U);break e;case 2:Kn=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,U=d.effects,U===null?d.effects=[w]:U.push(w))}else J={eventTime:J,lane:U,tag:w.tag,payload:w.payload,callback:w.callback,next:null},$===null?(T=$=J,C=B):$=$.next=J,g|=U;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;U=w,w=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);if($===null&&(C=B),d.baseState=C,d.firstBaseUpdate=T,d.lastBaseUpdate=$,s=d.shared.interleaved,s!==null){d=s;do g|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);Pr|=g,t.lanes=g,t.memoizedState=B}}function Cf(t,s,o){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],d=a.callback;if(d!==null){if(a.callback=null,a=o,typeof d!="function")throw Error(n(191,d));d.call(a)}}}var mi={},hn=Vn(mi),gi=Vn(mi),yi=Vn(mi);function br(t){if(t===mi)throw Error(n(174));return t}function _c(t,s){switch(ze(yi,s),ze(gi,t),ze(hn,mi),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xa(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=xa(s,t)}Ge(hn),ze(hn,s)}function fs(){Ge(hn),Ge(gi),Ge(yi)}function Sf(t){br(yi.current);var s=br(hn.current),o=xa(s,t.type);s!==o&&(ze(gi,t),ze(hn,o))}function xc(t){gi.current===t&&(Ge(hn),Ge(gi))}var Qe=Vn(0);function Qo(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wc=[];function Cc(){for(var t=0;t<wc.length;t++)wc[t]._workInProgressVersionPrimary=null;wc.length=0}var Yo=me.ReactCurrentDispatcher,Sc=me.ReactCurrentBatchConfig,Tr=0,Ye=null,st=null,ct=null,Jo=!1,vi=!1,_i=0,Z_=0;function xt(){throw Error(n(321))}function Ec(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!Zt(t[o],s[o]))return!1;return!0}function Nc(t,s,o,a,d,f){if(Tr=f,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yo.current=t===null||t.memoizedState===null?r0:s0,t=o(a,d),vi){f=0;do{if(vi=!1,_i=0,25<=f)throw Error(n(301));f+=1,ct=st=null,s.updateQueue=null,Yo.current=i0,t=o(a,d)}while(vi)}if(Yo.current=el,s=st!==null&&st.next!==null,Tr=0,ct=st=Ye=null,Jo=!1,s)throw Error(n(300));return t}function Ic(){var t=_i!==0;return _i=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ye.memoizedState=ct=t:ct=ct.next=t,ct}function Kt(){if(st===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var s=ct===null?Ye.memoizedState:ct.next;if(s!==null)ct=s,st=t;else{if(t===null)throw Error(n(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?Ye.memoizedState=ct=t:ct=ct.next=t}return ct}function xi(t,s){return typeof s=="function"?s(t):s}function kc(t){var s=Kt(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=st,d=a.baseQueue,f=o.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}a.baseQueue=d=f,o.pending=null}if(d!==null){f=d.next,a=a.baseState;var w=g=null,C=null,T=f;do{var $=T.lane;if((Tr&$)===$)C!==null&&(C=C.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:t(a,T.action);else{var B={lane:$,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};C===null?(w=C=B,g=a):C=C.next=B,Ye.lanes|=$,Pr|=$}T=T.next}while(T!==null&&T!==f);C===null?g=a:C.next=w,Zt(a,s.memoizedState)||(At=!0),s.memoizedState=a,s.baseState=g,s.baseQueue=C,o.lastRenderedState=a}if(t=o.interleaved,t!==null){d=t;do f=d.lane,Ye.lanes|=f,Pr|=f,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function bc(t){var s=Kt(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=o.dispatch,d=o.pending,f=s.memoizedState;if(d!==null){o.pending=null;var g=d=d.next;do f=t(f,g.action),g=g.next;while(g!==d);Zt(f,s.memoizedState)||(At=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),o.lastRenderedState=f}return[f,a]}function Ef(){}function Nf(t,s){var o=Ye,a=Kt(),d=s(),f=!Zt(a.memoizedState,d);if(f&&(a.memoizedState=d,At=!0),a=a.queue,Tc(bf.bind(null,o,a,t),[t]),a.getSnapshot!==s||f||ct!==null&&ct.memoizedState.tag&1){if(o.flags|=2048,wi(9,kf.bind(null,o,a,d,s),void 0,null),ut===null)throw Error(n(349));(Tr&30)!==0||If(o,s,d)}return d}function If(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function kf(t,s,o,a){s.value=o,s.getSnapshot=a,Tf(s)&&Pf(t)}function bf(t,s,o){return o(function(){Tf(s)&&Pf(t)})}function Tf(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!Zt(t,o)}catch{return!0}}function Pf(t){var s=En(t,1);s!==null&&sn(s,t,1,-1)}function Rf(t){var s=fn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},s.queue=t,t=t.dispatch=n0.bind(null,Ye,t),[s.memoizedState,t]}function wi(t,s,o,a){return t={tag:t,create:s,destroy:o,deps:a,next:null},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.lastEffect=t.next=t):(o=s.lastEffect,o===null?s.lastEffect=t.next=t:(a=o.next,o.next=t,t.next=a,s.lastEffect=t)),t}function jf(){return Kt().memoizedState}function Xo(t,s,o,a){var d=fn();Ye.flags|=t,d.memoizedState=wi(1|s,o,void 0,a===void 0?null:a)}function Zo(t,s,o,a){var d=Kt();a=a===void 0?null:a;var f=void 0;if(st!==null){var g=st.memoizedState;if(f=g.destroy,a!==null&&Ec(a,g.deps)){d.memoizedState=wi(s,o,f,a);return}}Ye.flags|=t,d.memoizedState=wi(1|s,o,f,a)}function Af(t,s){return Xo(8390656,8,t,s)}function Tc(t,s){return Zo(2048,8,t,s)}function Of(t,s){return Zo(4,2,t,s)}function Df(t,s){return Zo(4,4,t,s)}function Lf(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Mf(t,s,o){return o=o!=null?o.concat([t]):null,Zo(4,4,Lf.bind(null,s,t),o)}function Pc(){}function Ff(t,s){var o=Kt();s=s===void 0?null:s;var a=o.memoizedState;return a!==null&&s!==null&&Ec(s,a[1])?a[0]:(o.memoizedState=[t,s],t)}function Uf(t,s){var o=Kt();s=s===void 0?null:s;var a=o.memoizedState;return a!==null&&s!==null&&Ec(s,a[1])?a[0]:(t=t(),o.memoizedState=[t,s],t)}function $f(t,s,o){return(Tr&21)===0?(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=o):(Zt(o,s)||(o=mh(),Ye.lanes|=o,Pr|=o,t.baseState=!0),s)}function e0(t,s){var o=Le;Le=o!==0&&4>o?o:4,t(!0);var a=Sc.transition;Sc.transition={};try{t(!1),s()}finally{Le=o,Sc.transition=a}}function zf(){return Kt().memoizedState}function t0(t,s,o){var a=Xn(t);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},Bf(t))Wf(s,o);else if(o=_f(t,s,o,a),o!==null){var d=It();sn(o,t,a,d),Vf(o,s,a)}}function n0(t,s,o){var a=Xn(t),d={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bf(t))Wf(s,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var g=s.lastRenderedState,w=f(g,o);if(d.hasEagerState=!0,d.eagerState=w,Zt(w,g)){var C=s.interleaved;C===null?(d.next=d,yc(s)):(d.next=C.next,C.next=d),s.interleaved=d;return}}catch{}finally{}o=_f(t,s,d,a),o!==null&&(d=It(),sn(o,t,a,d),Vf(o,s,a))}}function Bf(t){var s=t.alternate;return t===Ye||s!==null&&s===Ye}function Wf(t,s){vi=Jo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function Vf(t,s,o){if((o&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,o|=a,s.lanes=o,ja(t,o)}}var el={readContext:Gt,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},r0={readContext:Gt,useCallback:function(t,s){return fn().memoizedState=[t,s===void 0?null:s],t},useContext:Gt,useEffect:Af,useImperativeHandle:function(t,s,o){return o=o!=null?o.concat([t]):null,Xo(4194308,4,Lf.bind(null,s,t),o)},useLayoutEffect:function(t,s){return Xo(4194308,4,t,s)},useInsertionEffect:function(t,s){return Xo(4,2,t,s)},useMemo:function(t,s){var o=fn();return s=s===void 0?null:s,t=t(),o.memoizedState=[t,s],t},useReducer:function(t,s,o){var a=fn();return s=o!==void 0?o(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=t0.bind(null,Ye,t),[a.memoizedState,t]},useRef:function(t){var s=fn();return t={current:t},s.memoizedState=t},useState:Rf,useDebugValue:Pc,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=Rf(!1),s=t[0];return t=e0.bind(null,t[1]),fn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,o){var a=Ye,d=fn();if(qe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),ut===null)throw Error(n(349));(Tr&30)!==0||If(a,s,o)}d.memoizedState=o;var f={value:o,getSnapshot:s};return d.queue=f,Af(bf.bind(null,a,f,t),[t]),a.flags|=2048,wi(9,kf.bind(null,a,f,o,s),void 0,null),o},useId:function(){var t=fn(),s=ut.identifierPrefix;if(qe){var o=Sn,a=Cn;o=(a&~(1<<32-Xt(a)-1)).toString(32)+o,s=":"+s+"R"+o,o=_i++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=Z_++,s=":"+s+"r"+o.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},s0={readContext:Gt,useCallback:Ff,useContext:Gt,useEffect:Tc,useImperativeHandle:Mf,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:Uf,useReducer:kc,useRef:jf,useState:function(){return kc(xi)},useDebugValue:Pc,useDeferredValue:function(t){var s=Kt();return $f(s,st.memoizedState,t)},useTransition:function(){var t=kc(xi)[0],s=Kt().memoizedState;return[t,s]},useMutableSource:Ef,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1},i0={readContext:Gt,useCallback:Ff,useContext:Gt,useEffect:Tc,useImperativeHandle:Mf,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:Uf,useReducer:bc,useRef:jf,useState:function(){return bc(xi)},useDebugValue:Pc,useDeferredValue:function(t){var s=Kt();return st===null?s.memoizedState=t:$f(s,st.memoizedState,t)},useTransition:function(){var t=bc(xi)[0],s=Kt().memoizedState;return[t,s]},useMutableSource:Ef,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1};function tn(t,s){if(t&&t.defaultProps){s=L({},s),t=t.defaultProps;for(var o in t)s[o]===void 0&&(s[o]=t[o]);return s}return s}function Rc(t,s,o,a){s=t.memoizedState,o=o(a,s),o=o==null?s:L({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var tl={isMounted:function(t){return(t=t._reactInternals)?Cr(t)===t:!1},enqueueSetState:function(t,s,o){t=t._reactInternals;var a=It(),d=Xn(t),f=Nn(a,d);f.payload=s,o!=null&&(f.callback=o),s=qn(t,f,d),s!==null&&(sn(s,t,d,a),Ko(s,t,d))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var a=It(),d=Xn(t),f=Nn(a,d);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=qn(t,f,d),s!==null&&(sn(s,t,d,a),Ko(s,t,d))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=It(),a=Xn(t),d=Nn(o,a);d.tag=2,s!=null&&(d.callback=s),s=qn(t,d,a),s!==null&&(sn(s,t,a,o),Ko(s,t,a))}};function Hf(t,s,o,a,d,f,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,f,g):s.prototype&&s.prototype.isPureReactComponent?!li(o,a)||!li(d,f):!0}function Gf(t,s,o){var a=!1,d=Hn,f=s.contextType;return typeof f=="object"&&f!==null?f=Gt(f):(d=jt(s)?Er:_t.current,a=s.contextTypes,f=(a=a!=null)?os(t,d):Hn),s=new s(o,f),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=tl,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=f),s}function Kf(t,s,o,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,a),s.state!==t&&tl.enqueueReplaceState(s,s.state,null)}function jc(t,s,o,a){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},vc(t);var f=s.contextType;typeof f=="object"&&f!==null?d.context=Gt(f):(f=jt(s)?Er:_t.current,d.context=os(t,f)),d.state=t.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Rc(t,s,f,o),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&tl.enqueueReplaceState(d,d.state,null),qo(t,o,d,a),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function ps(t,s){try{var o="",a=s;do o+=we(a),a=a.return;while(a);var d=o}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:s,stack:d,digest:null}}function Ac(t,s,o){return{value:t,source:null,stack:o??null,digest:s??null}}function Oc(t,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var o0=typeof WeakMap=="function"?WeakMap:Map;function qf(t,s,o){o=Nn(-1,o),o.tag=3,o.payload={element:null};var a=s.value;return o.callback=function(){al||(al=!0,Qc=a),Oc(t,s)},o}function Qf(t,s,o){o=Nn(-1,o),o.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var d=s.value;o.payload=function(){return a(d)},o.callback=function(){Oc(t,s)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){Oc(t,s),typeof a!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})}),o}function Yf(t,s,o){var a=t.pingCache;if(a===null){a=t.pingCache=new o0;var d=new Set;a.set(s,d)}else d=a.get(s),d===void 0&&(d=new Set,a.set(s,d));d.has(o)||(d.add(o),t=x0.bind(null,t,s,o),s.then(t,t))}function Jf(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Xf(t,s,o,a,d){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=Nn(-1,1),s.tag=2,qn(o,s,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var l0=me.ReactCurrentOwner,At=!1;function Nt(t,s,o,a){s.child=t===null?vf(s,null,o,a):us(s,t.child,o,a)}function Zf(t,s,o,a,d){o=o.render;var f=s.ref;return hs(s,d),a=Nc(t,s,o,a,f,d),o=Ic(),t!==null&&!At?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,In(t,s,d)):(qe&&o&&ac(s),s.flags|=1,Nt(t,s,a,d),s.child)}function ep(t,s,o,a,d){if(t===null){var f=o.type;return typeof f=="function"&&!nu(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=f,tp(t,s,f,a,d)):(t=pl(o.type,null,a,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,(t.lanes&d)===0){var g=f.memoizedProps;if(o=o.compare,o=o!==null?o:li,o(g,a)&&t.ref===s.ref)return In(t,s,d)}return s.flags|=1,t=er(f,a),t.ref=s.ref,t.return=s,s.child=t}function tp(t,s,o,a,d){if(t!==null){var f=t.memoizedProps;if(li(f,a)&&t.ref===s.ref)if(At=!1,s.pendingProps=a=f,(t.lanes&d)!==0)(t.flags&131072)!==0&&(At=!0);else return s.lanes=t.lanes,In(t,s,d)}return Dc(t,s,o,a,d)}function np(t,s,o){var a=s.pendingProps,d=a.children,f=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(gs,Bt),Bt|=o;else{if((o&1073741824)===0)return t=f!==null?f.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,ze(gs,Bt),Bt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:o,ze(gs,Bt),Bt|=a}else f!==null?(a=f.baseLanes|o,s.memoizedState=null):a=o,ze(gs,Bt),Bt|=a;return Nt(t,s,d,o),s.child}function rp(t,s){var o=s.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function Dc(t,s,o,a,d){var f=jt(o)?Er:_t.current;return f=os(s,f),hs(s,d),o=Nc(t,s,o,a,f,d),a=Ic(),t!==null&&!At?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,In(t,s,d)):(qe&&a&&ac(s),s.flags|=1,Nt(t,s,o,d),s.child)}function sp(t,s,o,a,d){if(jt(o)){var f=!0;Uo(s)}else f=!1;if(hs(s,d),s.stateNode===null)rl(t,s),Gf(s,o,a),jc(s,o,a,d),a=!0;else if(t===null){var g=s.stateNode,w=s.memoizedProps;g.props=w;var C=g.context,T=o.contextType;typeof T=="object"&&T!==null?T=Gt(T):(T=jt(o)?Er:_t.current,T=os(s,T));var $=o.getDerivedStateFromProps,B=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function";B||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==a||C!==T)&&Kf(s,g,a,T),Kn=!1;var U=s.memoizedState;g.state=U,qo(s,a,g,d),C=s.memoizedState,w!==a||U!==C||Rt.current||Kn?(typeof $=="function"&&(Rc(s,o,$,a),C=s.memoizedState),(w=Kn||Hf(s,o,w,a,U,C,T))?(B||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=C),g.props=a,g.state=C,g.context=T,a=w):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{g=s.stateNode,xf(t,s),w=s.memoizedProps,T=s.type===s.elementType?w:tn(s.type,w),g.props=T,B=s.pendingProps,U=g.context,C=o.contextType,typeof C=="object"&&C!==null?C=Gt(C):(C=jt(o)?Er:_t.current,C=os(s,C));var J=o.getDerivedStateFromProps;($=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==B||U!==C)&&Kf(s,g,a,C),Kn=!1,U=s.memoizedState,g.state=U,qo(s,a,g,d);var ee=s.memoizedState;w!==B||U!==ee||Rt.current||Kn?(typeof J=="function"&&(Rc(s,o,J,a),ee=s.memoizedState),(T=Kn||Hf(s,o,T,a,U,ee,C)||!1)?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ee,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ee,C)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&U===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&U===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=ee),g.props=a,g.state=ee,g.context=C,a=T):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&U===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&U===t.memoizedState||(s.flags|=1024),a=!1)}return Lc(t,s,o,a,f,d)}function Lc(t,s,o,a,d,f){rp(t,s);var g=(s.flags&128)!==0;if(!a&&!g)return d&&cf(s,o,!1),In(t,s,f);a=s.stateNode,l0.current=s;var w=g&&typeof o.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&g?(s.child=us(s,t.child,null,f),s.child=us(s,null,w,f)):Nt(t,s,w,f),s.memoizedState=a.state,d&&cf(s,o,!0),s.child}function ip(t){var s=t.stateNode;s.pendingContext?lf(t,s.pendingContext,s.pendingContext!==s.context):s.context&&lf(t,s.context,!1),_c(t,s.containerInfo)}function op(t,s,o,a,d){return cs(),hc(d),s.flags|=256,Nt(t,s,o,a),s.child}var Mc={dehydrated:null,treeContext:null,retryLane:0};function Fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function lp(t,s,o){var a=s.pendingProps,d=Qe.current,f=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=t!==null&&t.memoizedState===null?!1:(d&2)!==0),w?(f=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),ze(Qe,d&1),t===null)return dc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(g=a.children,t=a.fallback,f?(a=s.mode,f=s.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=ml(g,a,0,null),t=Or(t,a,o,null),f.return=s,t.return=s,f.sibling=t,s.child=f,s.child.memoizedState=Fc(o),s.memoizedState=Mc,t):Uc(s,g));if(d=t.memoizedState,d!==null&&(w=d.dehydrated,w!==null))return a0(t,s,g,a,w,d,o);if(f){f=a.fallback,g=s.mode,d=t.child,w=d.sibling;var C={mode:"hidden",children:a.children};return(g&1)===0&&s.child!==d?(a=s.child,a.childLanes=0,a.pendingProps=C,s.deletions=null):(a=er(d,C),a.subtreeFlags=d.subtreeFlags&14680064),w!==null?f=er(w,f):(f=Or(f,g,o,null),f.flags|=2),f.return=s,a.return=s,a.sibling=f,s.child=a,a=f,f=s.child,g=t.child.memoizedState,g=g===null?Fc(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=t.childLanes&~o,s.memoizedState=Mc,a}return f=t.child,t=f.sibling,a=er(f,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=o),a.return=s,a.sibling=null,t!==null&&(o=s.deletions,o===null?(s.deletions=[t],s.flags|=16):o.push(t)),s.child=a,s.memoizedState=null,a}function Uc(t,s){return s=ml({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function nl(t,s,o,a){return a!==null&&hc(a),us(s,t.child,null,o),t=Uc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function a0(t,s,o,a,d,f,g){if(o)return s.flags&256?(s.flags&=-257,a=Ac(Error(n(422))),nl(t,s,g,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(f=a.fallback,d=s.mode,a=ml({mode:"visible",children:a.children},d,0,null),f=Or(f,d,g,null),f.flags|=2,a.return=s,f.return=s,a.sibling=f,s.child=a,(s.mode&1)!==0&&us(s,t.child,null,g),s.child.memoizedState=Fc(g),s.memoizedState=Mc,f);if((s.mode&1)===0)return nl(t,s,g,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var w=a.dgst;return a=w,f=Error(n(419)),a=Ac(f,a,void 0),nl(t,s,g,a)}if(w=(g&t.childLanes)!==0,At||w){if(a=ut,a!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(a.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,En(t,d),sn(a,t,d,-1))}return tu(),a=Ac(Error(n(421))),nl(t,s,g,a)}return d.data==="$?"?(s.flags|=128,s.child=t.child,s=w0.bind(null,t),d._reactRetry=s,null):(t=f.treeContext,zt=Wn(d.nextSibling),$t=s,qe=!0,en=null,t!==null&&(Vt[Ht++]=Cn,Vt[Ht++]=Sn,Vt[Ht++]=Nr,Cn=t.id,Sn=t.overflow,Nr=s),s=Uc(s,a.children),s.flags|=4096,s)}function ap(t,s,o){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),gc(t.return,s,o)}function $c(t,s,o,a,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=o,f.tailMode=d)}function cp(t,s,o){var a=s.pendingProps,d=a.revealOrder,f=a.tail;if(Nt(t,s,a.children,o),a=Qe.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ap(t,o,s);else if(t.tag===19)ap(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(ze(Qe,a),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(o=s.child,d=null;o!==null;)t=o.alternate,t!==null&&Qo(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),$c(s,!1,d,o,f);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Qo(t)===null){s.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}$c(s,!0,o,null,f);break;case"together":$c(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function rl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function In(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),Pr|=s.lanes,(o&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(n(153));if(s.child!==null){for(t=s.child,o=er(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=er(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function c0(t,s,o){switch(s.tag){case 3:ip(s),cs();break;case 5:Sf(s);break;case 1:jt(s.type)&&Uo(s);break;case 4:_c(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,d=s.memoizedProps.value;ze(Ho,a._currentValue),a._currentValue=d;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(ze(Qe,Qe.current&1),s.flags|=128,null):(o&s.child.childLanes)!==0?lp(t,s,o):(ze(Qe,Qe.current&1),t=In(t,s,o),t!==null?t.sibling:null);ze(Qe,Qe.current&1);break;case 19:if(a=(o&s.childLanes)!==0,(t.flags&128)!==0){if(a)return cp(t,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ze(Qe,Qe.current),a)break;return null;case 22:case 23:return s.lanes=0,np(t,s,o)}return In(t,s,o)}var up,zc,dp,hp;up=function(t,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},zc=function(){},dp=function(t,s,o,a){var d=t.memoizedProps;if(d!==a){t=s.stateNode,br(hn.current);var f=null;switch(o){case"input":d=ne(t,d),a=ne(t,a),f=[];break;case"select":d=L({},d,{value:void 0}),a=L({},a,{value:void 0}),f=[];break;case"textarea":d=Pt(t,d),a=Pt(t,a),f=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Lo)}wa(o,a);var g;o=null;for(T in d)if(!a.hasOwnProperty(T)&&d.hasOwnProperty(T)&&d[T]!=null)if(T==="style"){var w=d[T];for(g in w)w.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?f||(f=[]):(f=f||[]).push(T,null));for(T in a){var C=a[T];if(w=d?.[T],a.hasOwnProperty(T)&&C!==w&&(C!=null||w!=null))if(T==="style")if(w){for(g in w)!w.hasOwnProperty(g)||C&&C.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in C)C.hasOwnProperty(g)&&w[g]!==C[g]&&(o||(o={}),o[g]=C[g])}else o||(f||(f=[]),f.push(T,o)),o=C;else T==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,w=w?w.__html:void 0,C!=null&&w!==C&&(f=f||[]).push(T,C)):T==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(T,""+C):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(C!=null&&T==="onScroll"&&He("scroll",t),f||w===C||(f=[])):(f=f||[]).push(T,C))}o&&(f=f||[]).push("style",o);var T=f;(s.updateQueue=T)&&(s.flags|=4)}},hp=function(t,s,o,a){o!==a&&(s.flags|=4)};function Ci(t,s){if(!qe)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function wt(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,a=0;if(s)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=a,t.childLanes=o,s}function u0(t,s,o){var a=s.pendingProps;switch(cc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return jt(s.type)&&Fo(),wt(s),null;case 3:return a=s.stateNode,fs(),Ge(Rt),Ge(_t),Cc(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wo(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,en!==null&&(Xc(en),en=null))),zc(t,s),wt(s),null;case 5:xc(s);var d=br(yi.current);if(o=s.type,t!==null&&s.stateNode!=null)dp(t,s,o,a,d),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(n(166));return wt(s),null}if(t=br(hn.current),Wo(s)){a=s.stateNode,o=s.type;var f=s.memoizedProps;switch(a[dn]=s,a[hi]=f,t=(s.mode&1)!==0,o){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(d=0;d<ci.length;d++)He(ci[d],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":V(a,f),He("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},He("invalid",a);break;case"textarea":wr(a,f),He("invalid",a)}wa(o,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var w=f[g];g==="children"?typeof w=="string"?a.textContent!==w&&(f.suppressHydrationWarning!==!0&&Do(a.textContent,w,t),d=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&Do(a.textContent,w,t),d=["children",""+w]):l.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&He("scroll",a)}switch(o){case"input":q(a),ke(a,f,!0);break;case"textarea":q(a),Yd(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Lo)}a=d,s.updateQueue=a,a!==null&&(s.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jd(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=g.createElement(o,{is:a.is}):(t=g.createElement(o),o==="select"&&(g=t,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):t=g.createElementNS(t,o),t[dn]=s,t[hi]=a,up(t,s,!1,!1),s.stateNode=t;e:{switch(g=Ca(o,a),o){case"dialog":He("cancel",t),He("close",t),d=a;break;case"iframe":case"object":case"embed":He("load",t),d=a;break;case"video":case"audio":for(d=0;d<ci.length;d++)He(ci[d],t);d=a;break;case"source":He("error",t),d=a;break;case"img":case"image":case"link":He("error",t),He("load",t),d=a;break;case"details":He("toggle",t),d=a;break;case"input":V(t,a),d=ne(t,a),He("invalid",t);break;case"option":d=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},d=L({},a,{value:void 0}),He("invalid",t);break;case"textarea":wr(t,a),d=Pt(t,a),He("invalid",t);break;default:d=a}wa(o,d),w=d;for(f in w)if(w.hasOwnProperty(f)){var C=w[f];f==="style"?eh(t,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Xd(t,C)):f==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&Vs(t,C):typeof C=="number"&&Vs(t,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?C!=null&&f==="onScroll"&&He("scroll",t):C!=null&&ce(t,f,C,g))}switch(o){case"input":q(t),ke(t,a,!1);break;case"textarea":q(t),Yd(t);break;case"option":a.value!=null&&t.setAttribute("value",""+N(a.value));break;case"select":t.multiple=!!a.multiple,f=a.value,f!=null?vt(t,!!a.multiple,f,!1):a.defaultValue!=null&&vt(t,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Lo)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return wt(s),null;case 6:if(t&&s.stateNode!=null)hp(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(n(166));if(o=br(yi.current),br(hn.current),Wo(s)){if(a=s.stateNode,o=s.memoizedProps,a[dn]=s,(f=a.nodeValue!==o)&&(t=$t,t!==null))switch(t.tag){case 3:Do(a.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Do(a.nodeValue,o,(t.mode&1)!==0)}f&&(s.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[dn]=s,s.stateNode=a}return wt(s),null;case 13:if(Ge(Qe),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&zt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)mf(),cs(),s.flags|=98560,f=!1;else if(f=Wo(s),a!==null&&a.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[dn]=s}else cs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),f=!1}else en!==null&&(Xc(en),en=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=o,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Qe.current&1)!==0?it===0&&(it=3):tu())),s.updateQueue!==null&&(s.flags|=4),wt(s),null);case 4:return fs(),zc(t,s),t===null&&ui(s.stateNode.containerInfo),wt(s),null;case 10:return mc(s.type._context),wt(s),null;case 17:return jt(s.type)&&Fo(),wt(s),null;case 19:if(Ge(Qe),f=s.memoizedState,f===null)return wt(s),null;if(a=(s.flags&128)!==0,g=f.rendering,g===null)if(a)Ci(f,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=Qo(t),g!==null){for(s.flags|=128,Ci(f,!1),a=g.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=o,o=s.child;o!==null;)f=o,t=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,t=g.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return ze(Qe,Qe.current&1|2),s.child}t=t.sibling}f.tail!==null&&tt()>ys&&(s.flags|=128,a=!0,Ci(f,!1),s.lanes=4194304)}else{if(!a)if(t=Qo(g),t!==null){if(s.flags|=128,a=!0,o=t.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Ci(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!qe)return wt(s),null}else 2*tt()-f.renderingStartTime>ys&&o!==1073741824&&(s.flags|=128,a=!0,Ci(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(o=f.last,o!==null?o.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=tt(),s.sibling=null,o=Qe.current,ze(Qe,a?o&1|2:o&1),s):(wt(s),null);case 22:case 23:return eu(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(Bt&1073741824)!==0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function d0(t,s){switch(cc(s),s.tag){case 1:return jt(s.type)&&Fo(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return fs(),Ge(Rt),Ge(_t),Cc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return xc(s),null;case 13:if(Ge(Qe),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(n(340));cs()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ge(Qe),null;case 4:return fs(),null;case 10:return mc(s.type._context),null;case 22:case 23:return eu(),null;case 24:return null;default:return null}}var sl=!1,Ct=!1,h0=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ms(t,s){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Je(t,s,a)}else o.current=null}function Bc(t,s,o){try{o()}catch(a){Je(t,s,a)}}var fp=!1;function f0(t,s){if(ec=Eo,t=Vh(),Ga(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var d=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var g=0,w=-1,C=-1,T=0,$=0,B=t,U=null;t:for(;;){for(var J;B!==o||d!==0&&B.nodeType!==3||(w=g+d),B!==f||a!==0&&B.nodeType!==3||(C=g+a),B.nodeType===3&&(g+=B.nodeValue.length),(J=B.firstChild)!==null;)U=B,B=J;for(;;){if(B===t)break t;if(U===o&&++T===d&&(w=g),U===f&&++$===a&&(C=g),(J=B.nextSibling)!==null)break;B=U,U=B.parentNode}B=J}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(tc={focusedElem:t,selectionRange:o},Eo=!1,Z=s;Z!==null;)if(s=Z,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Z=t;else for(;Z!==null;){s=Z;try{var ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var te=ee.memoizedProps,nt=ee.memoizedState,I=s.stateNode,S=I.getSnapshotBeforeUpdate(s.elementType===s.type?te:tn(s.type,te),nt);I.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=s.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(W){Je(s,s.return,W)}if(t=s.sibling,t!==null){t.return=s.return,Z=t;break}Z=s.return}return ee=fp,fp=!1,ee}function Si(t,s,o){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&t)===t){var f=d.destroy;d.destroy=void 0,f!==void 0&&Bc(s,o,f)}d=d.next}while(d!==a)}}function il(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&t)===t){var a=o.create;o.destroy=a()}o=o.next}while(o!==s)}}function Wc(t){var s=t.ref;if(s!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof s=="function"?s(t):s.current=t}}function pp(t){var s=t.alternate;s!==null&&(t.alternate=null,pp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[dn],delete s[hi],delete s[ic],delete s[Q_],delete s[Y_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mp(t){return t.tag===5||t.tag===3||t.tag===4}function gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vc(t,s,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(t,s):o.insertBefore(t,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(t,o)):(s=o,s.appendChild(t)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Lo));else if(a!==4&&(t=t.child,t!==null))for(Vc(t,s,o),t=t.sibling;t!==null;)Vc(t,s,o),t=t.sibling}function Hc(t,s,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Hc(t,s,o),t=t.sibling;t!==null;)Hc(t,s,o),t=t.sibling}var pt=null,nn=!1;function Qn(t,s,o){for(o=o.child;o!==null;)yp(t,s,o),o=o.sibling}function yp(t,s,o){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(vo,o)}catch{}switch(o.tag){case 5:Ct||ms(o,s);case 6:var a=pt,d=nn;pt=null,Qn(t,s,o),pt=a,nn=d,pt!==null&&(nn?(t=pt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):pt.removeChild(o.stateNode));break;case 18:pt!==null&&(nn?(t=pt,o=o.stateNode,t.nodeType===8?sc(t.parentNode,o):t.nodeType===1&&sc(t,o),ti(t)):sc(pt,o.stateNode));break;case 4:a=pt,d=nn,pt=o.stateNode.containerInfo,nn=!0,Qn(t,s,o),pt=a,nn=d;break;case 0:case 11:case 14:case 15:if(!Ct&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Bc(o,s,g),d=d.next}while(d!==a)}Qn(t,s,o);break;case 1:if(!Ct&&(ms(o,s),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(w){Je(o,s,w)}Qn(t,s,o);break;case 21:Qn(t,s,o);break;case 22:o.mode&1?(Ct=(a=Ct)||o.memoizedState!==null,Qn(t,s,o),Ct=a):Qn(t,s,o);break;default:Qn(t,s,o)}}function vp(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new h0),s.forEach(function(a){var d=C0.bind(null,t,a);o.has(a)||(o.add(a),a.then(d,d))})}}function rn(t,s){var o=s.deletions;if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];try{var f=t,g=s,w=g;e:for(;w!==null;){switch(w.tag){case 5:pt=w.stateNode,nn=!1;break e;case 3:pt=w.stateNode.containerInfo,nn=!0;break e;case 4:pt=w.stateNode.containerInfo,nn=!0;break e}w=w.return}if(pt===null)throw Error(n(160));yp(f,g,d),pt=null,nn=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(T){Je(d,s,T)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)_p(s,t),s=s.sibling}function _p(t,s){var o=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(s,t),pn(t),a&4){try{Si(3,t,t.return),il(3,t)}catch(te){Je(t,t.return,te)}try{Si(5,t,t.return)}catch(te){Je(t,t.return,te)}}break;case 1:rn(s,t),pn(t),a&512&&o!==null&&ms(o,o.return);break;case 5:if(rn(s,t),pn(t),a&512&&o!==null&&ms(o,o.return),t.flags&32){var d=t.stateNode;try{Vs(d,"")}catch(te){Je(t,t.return,te)}}if(a&4&&(d=t.stateNode,d!=null)){var f=t.memoizedProps,g=o!==null?o.memoizedProps:f,w=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&Pe(d,f),Ca(w,g);var T=Ca(w,f);for(g=0;g<C.length;g+=2){var $=C[g],B=C[g+1];$==="style"?eh(d,B):$==="dangerouslySetInnerHTML"?Xd(d,B):$==="children"?Vs(d,B):ce(d,$,B,T)}switch(w){case"input":xe(d,f);break;case"textarea":Qd(d,f);break;case"select":var U=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var J=f.value;J!=null?vt(d,!!f.multiple,J,!1):U!==!!f.multiple&&(f.defaultValue!=null?vt(d,!!f.multiple,f.defaultValue,!0):vt(d,!!f.multiple,f.multiple?[]:"",!1))}d[hi]=f}catch(te){Je(t,t.return,te)}}break;case 6:if(rn(s,t),pn(t),a&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,f=t.memoizedProps;try{d.nodeValue=f}catch(te){Je(t,t.return,te)}}break;case 3:if(rn(s,t),pn(t),a&4&&o!==null&&o.memoizedState.isDehydrated)try{ti(s.containerInfo)}catch(te){Je(t,t.return,te)}break;case 4:rn(s,t),pn(t);break;case 13:rn(s,t),pn(t),d=t.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(qc=tt())),a&4&&vp(t);break;case 22:if($=o!==null&&o.memoizedState!==null,t.mode&1?(Ct=(T=Ct)||$,rn(s,t),Ct=T):rn(s,t),pn(t),a&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!$&&(t.mode&1)!==0)for(Z=t,$=t.child;$!==null;){for(B=Z=$;Z!==null;){switch(U=Z,J=U.child,U.tag){case 0:case 11:case 14:case 15:Si(4,U,U.return);break;case 1:ms(U,U.return);var ee=U.stateNode;if(typeof ee.componentWillUnmount=="function"){a=U,o=U.return;try{s=a,ee.props=s.memoizedProps,ee.state=s.memoizedState,ee.componentWillUnmount()}catch(te){Je(a,o,te)}}break;case 5:ms(U,U.return);break;case 22:if(U.memoizedState!==null){Cp(B);continue}}J!==null?(J.return=U,Z=J):Cp(B)}$=$.sibling}e:for($=null,B=t;;){if(B.tag===5){if($===null){$=B;try{d=B.stateNode,T?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=B.stateNode,C=B.memoizedProps.style,g=C!=null&&C.hasOwnProperty("display")?C.display:null,w.style.display=Zd("display",g))}catch(te){Je(t,t.return,te)}}}else if(B.tag===6){if($===null)try{B.stateNode.nodeValue=T?"":B.memoizedProps}catch(te){Je(t,t.return,te)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===t)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===t)break e;for(;B.sibling===null;){if(B.return===null||B.return===t)break e;$===B&&($=null),B=B.return}$===B&&($=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:rn(s,t),pn(t),a&4&&vp(t);break;case 21:break;default:rn(s,t),pn(t)}}function pn(t){var s=t.flags;if(s&2){try{e:{for(var o=t.return;o!==null;){if(mp(o)){var a=o;break e}o=o.return}throw Error(n(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(Vs(d,""),a.flags&=-33);var f=gp(t);Hc(t,f,d);break;case 3:case 4:var g=a.stateNode.containerInfo,w=gp(t);Vc(t,w,g);break;default:throw Error(n(161))}}catch(C){Je(t,t.return,C)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function p0(t,s,o){Z=t,xp(t)}function xp(t,s,o){for(var a=(t.mode&1)!==0;Z!==null;){var d=Z,f=d.child;if(d.tag===22&&a){var g=d.memoizedState!==null||sl;if(!g){var w=d.alternate,C=w!==null&&w.memoizedState!==null||Ct;w=sl;var T=Ct;if(sl=g,(Ct=C)&&!T)for(Z=d;Z!==null;)g=Z,C=g.child,g.tag===22&&g.memoizedState!==null?Sp(d):C!==null?(C.return=g,Z=C):Sp(d);for(;f!==null;)Z=f,xp(f),f=f.sibling;Z=d,sl=w,Ct=T}wp(t)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,Z=f):wp(t)}}function wp(t){for(;Z!==null;){var s=Z;if((s.flags&8772)!==0){var o=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ct||il(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Ct)if(o===null)a.componentDidMount();else{var d=s.elementType===s.type?o.memoizedProps:tn(s.type,o.memoizedProps);a.componentDidUpdate(d,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&Cf(s,f,a);break;case 3:var g=s.updateQueue;if(g!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}Cf(s,g,o)}break;case 5:var w=s.stateNode;if(o===null&&s.flags&4){o=w;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var T=s.alternate;if(T!==null){var $=T.memoizedState;if($!==null){var B=$.dehydrated;B!==null&&ti(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ct||s.flags&512&&Wc(s)}catch(U){Je(s,s.return,U)}}if(s===t){Z=null;break}if(o=s.sibling,o!==null){o.return=s.return,Z=o;break}Z=s.return}}function Cp(t){for(;Z!==null;){var s=Z;if(s===t){Z=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Z=o;break}Z=s.return}}function Sp(t){for(;Z!==null;){var s=Z;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{il(4,s)}catch(C){Je(s,o,C)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var d=s.return;try{a.componentDidMount()}catch(C){Je(s,d,C)}}var f=s.return;try{Wc(s)}catch(C){Je(s,f,C)}break;case 5:var g=s.return;try{Wc(s)}catch(C){Je(s,g,C)}}}catch(C){Je(s,s.return,C)}if(s===t){Z=null;break}var w=s.sibling;if(w!==null){w.return=s.return,Z=w;break}Z=s.return}}var m0=Math.ceil,ol=me.ReactCurrentDispatcher,Gc=me.ReactCurrentOwner,qt=me.ReactCurrentBatchConfig,Ae=0,ut=null,rt=null,mt=0,Bt=0,gs=Vn(0),it=0,Ei=null,Pr=0,ll=0,Kc=0,Ni=null,Ot=null,qc=0,ys=1/0,kn=null,al=!1,Qc=null,Yn=null,cl=!1,Jn=null,ul=0,Ii=0,Yc=null,dl=-1,hl=0;function It(){return(Ae&6)!==0?tt():dl!==-1?dl:dl=tt()}function Xn(t){return(t.mode&1)===0?1:(Ae&2)!==0&&mt!==0?mt&-mt:X_.transition!==null?(hl===0&&(hl=mh()),hl):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Eh(t.type)),t)}function sn(t,s,o,a){if(50<Ii)throw Ii=0,Yc=null,Error(n(185));Ys(t,o,a),((Ae&2)===0||t!==ut)&&(t===ut&&((Ae&2)===0&&(ll|=o),it===4&&Zn(t,mt)),Dt(t,a),o===1&&Ae===0&&(s.mode&1)===0&&(ys=tt()+500,$o&&Gn()))}function Dt(t,s){var o=t.callbackNode;Xv(t,s);var a=wo(t,t===ut?mt:0);if(a===0)o!==null&&hh(o),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(o!=null&&hh(o),s===1)t.tag===0?J_(Np.bind(null,t)):uf(Np.bind(null,t)),K_(function(){(Ae&6)===0&&Gn()}),o=null;else{switch(gh(a)){case 1:o=Ta;break;case 4:o=fh;break;case 16:o=yo;break;case 536870912:o=ph;break;default:o=yo}o=Ap(o,Ep.bind(null,t))}t.callbackPriority=s,t.callbackNode=o}}function Ep(t,s){if(dl=-1,hl=0,(Ae&6)!==0)throw Error(n(327));var o=t.callbackNode;if(vs()&&t.callbackNode!==o)return null;var a=wo(t,t===ut?mt:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=fl(t,a);else{s=a;var d=Ae;Ae|=2;var f=kp();(ut!==t||mt!==s)&&(kn=null,ys=tt()+500,jr(t,s));do try{v0();break}catch(w){Ip(t,w)}while(!0);pc(),ol.current=f,Ae=d,rt!==null?s=0:(ut=null,mt=0,s=it)}if(s!==0){if(s===2&&(d=Pa(t),d!==0&&(a=d,s=Jc(t,d))),s===1)throw o=Ei,jr(t,0),Zn(t,a),Dt(t,tt()),o;if(s===6)Zn(t,a);else{if(d=t.current.alternate,(a&30)===0&&!g0(d)&&(s=fl(t,a),s===2&&(f=Pa(t),f!==0&&(a=f,s=Jc(t,f))),s===1))throw o=Ei,jr(t,0),Zn(t,a),Dt(t,tt()),o;switch(t.finishedWork=d,t.finishedLanes=a,s){case 0:case 1:throw Error(n(345));case 2:Ar(t,Ot,kn);break;case 3:if(Zn(t,a),(a&130023424)===a&&(s=qc+500-tt(),10<s)){if(wo(t,0)!==0)break;if(d=t.suspendedLanes,(d&a)!==a){It(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=rc(Ar.bind(null,t,Ot,kn),s);break}Ar(t,Ot,kn);break;case 4:if(Zn(t,a),(a&4194240)===a)break;for(s=t.eventTimes,d=-1;0<a;){var g=31-Xt(a);f=1<<g,g=s[g],g>d&&(d=g),a&=~f}if(a=d,a=tt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*m0(a/1960))-a,10<a){t.timeoutHandle=rc(Ar.bind(null,t,Ot,kn),a);break}Ar(t,Ot,kn);break;case 5:Ar(t,Ot,kn);break;default:throw Error(n(329))}}}return Dt(t,tt()),t.callbackNode===o?Ep.bind(null,t):null}function Jc(t,s){var o=Ni;return t.current.memoizedState.isDehydrated&&(jr(t,s).flags|=256),t=fl(t,s),t!==2&&(s=Ot,Ot=o,s!==null&&Xc(s)),t}function Xc(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function g0(t){for(var s=t;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var d=o[a],f=d.getSnapshot;d=d.value;try{if(!Zt(f(),d))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zn(t,s){for(s&=~Kc,s&=~ll,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var o=31-Xt(s),a=1<<o;t[o]=-1,s&=~a}}function Np(t){if((Ae&6)!==0)throw Error(n(327));vs();var s=wo(t,0);if((s&1)===0)return Dt(t,tt()),null;var o=fl(t,s);if(t.tag!==0&&o===2){var a=Pa(t);a!==0&&(s=a,o=Jc(t,a))}if(o===1)throw o=Ei,jr(t,0),Zn(t,s),Dt(t,tt()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ar(t,Ot,kn),Dt(t,tt()),null}function Zc(t,s){var o=Ae;Ae|=1;try{return t(s)}finally{Ae=o,Ae===0&&(ys=tt()+500,$o&&Gn())}}function Rr(t){Jn!==null&&Jn.tag===0&&(Ae&6)===0&&vs();var s=Ae;Ae|=1;var o=qt.transition,a=Le;try{if(qt.transition=null,Le=1,t)return t()}finally{Le=a,qt.transition=o,Ae=s,(Ae&6)===0&&Gn()}}function eu(){Bt=gs.current,Ge(gs)}function jr(t,s){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,G_(o)),rt!==null)for(o=rt.return;o!==null;){var a=o;switch(cc(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Fo();break;case 3:fs(),Ge(Rt),Ge(_t),Cc();break;case 5:xc(a);break;case 4:fs();break;case 13:Ge(Qe);break;case 19:Ge(Qe);break;case 10:mc(a.type._context);break;case 22:case 23:eu()}o=o.return}if(ut=t,rt=t=er(t.current,null),mt=Bt=s,it=0,Ei=null,Kc=ll=Pr=0,Ot=Ni=null,kr!==null){for(s=0;s<kr.length;s++)if(o=kr[s],a=o.interleaved,a!==null){o.interleaved=null;var d=a.next,f=o.pending;if(f!==null){var g=f.next;f.next=d,a.next=g}o.pending=a}kr=null}return t}function Ip(t,s){do{var o=rt;try{if(pc(),Yo.current=el,Jo){for(var a=Ye.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}Jo=!1}if(Tr=0,ct=st=Ye=null,vi=!1,_i=0,Gc.current=null,o===null||o.return===null){it=1,Ei=s,rt=null;break}e:{var f=t,g=o.return,w=o,C=s;if(s=mt,w.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var T=C,$=w,B=$.tag;if(($.mode&1)===0&&(B===0||B===11||B===15)){var U=$.alternate;U?($.updateQueue=U.updateQueue,$.memoizedState=U.memoizedState,$.lanes=U.lanes):($.updateQueue=null,$.memoizedState=null)}var J=Jf(g);if(J!==null){J.flags&=-257,Xf(J,g,w,f,s),J.mode&1&&Yf(f,T,s),s=J,C=T;var ee=s.updateQueue;if(ee===null){var te=new Set;te.add(C),s.updateQueue=te}else ee.add(C);break e}else{if((s&1)===0){Yf(f,T,s),tu();break e}C=Error(n(426))}}else if(qe&&w.mode&1){var nt=Jf(g);if(nt!==null){(nt.flags&65536)===0&&(nt.flags|=256),Xf(nt,g,w,f,s),hc(ps(C,w));break e}}f=C=ps(C,w),it!==4&&(it=2),Ni===null?Ni=[f]:Ni.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var I=qf(f,C,s);wf(f,I);break e;case 1:w=C;var S=f.type,b=f.stateNode;if((f.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Yn===null||!Yn.has(b)))){f.flags|=65536,s&=-s,f.lanes|=s;var W=Qf(f,w,s);wf(f,W);break e}}f=f.return}while(f!==null)}Tp(o)}catch(re){s=re,rt===o&&o!==null&&(rt=o=o.return);continue}break}while(!0)}function kp(){var t=ol.current;return ol.current=el,t===null?el:t}function tu(){(it===0||it===3||it===2)&&(it=4),ut===null||(Pr&268435455)===0&&(ll&268435455)===0||Zn(ut,mt)}function fl(t,s){var o=Ae;Ae|=2;var a=kp();(ut!==t||mt!==s)&&(kn=null,jr(t,s));do try{y0();break}catch(d){Ip(t,d)}while(!0);if(pc(),Ae=o,ol.current=a,rt!==null)throw Error(n(261));return ut=null,mt=0,it}function y0(){for(;rt!==null;)bp(rt)}function v0(){for(;rt!==null&&!Wv();)bp(rt)}function bp(t){var s=jp(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,s===null?Tp(t):rt=s,Gc.current=null}function Tp(t){var s=t;do{var o=s.alternate;if(t=s.return,(s.flags&32768)===0){if(o=u0(o,s,Bt),o!==null){rt=o;return}}else{if(o=d0(o,s),o!==null){o.flags&=32767,rt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,rt=null;return}}if(s=s.sibling,s!==null){rt=s;return}rt=s=t}while(s!==null);it===0&&(it=5)}function Ar(t,s,o){var a=Le,d=qt.transition;try{qt.transition=null,Le=1,_0(t,s,o,a)}finally{qt.transition=d,Le=a}return null}function _0(t,s,o,a){do vs();while(Jn!==null);if((Ae&6)!==0)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=o.lanes|o.childLanes;if(Zv(t,f),t===ut&&(rt=ut=null,mt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||cl||(cl=!0,Ap(yo,function(){return vs(),null})),f=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||f){f=qt.transition,qt.transition=null;var g=Le;Le=1;var w=Ae;Ae|=4,Gc.current=null,f0(t,o),_p(o,t),U_(tc),Eo=!!ec,tc=ec=null,t.current=o,p0(o),Vv(),Ae=w,Le=g,qt.transition=f}else t.current=o;if(cl&&(cl=!1,Jn=t,ul=d),f=t.pendingLanes,f===0&&(Yn=null),Kv(o.stateNode),Dt(t,tt()),s!==null)for(a=t.onRecoverableError,o=0;o<s.length;o++)d=s[o],a(d.value,{componentStack:d.stack,digest:d.digest});if(al)throw al=!1,t=Qc,Qc=null,t;return(ul&1)!==0&&t.tag!==0&&vs(),f=t.pendingLanes,(f&1)!==0?t===Yc?Ii++:(Ii=0,Yc=t):Ii=0,Gn(),null}function vs(){if(Jn!==null){var t=gh(ul),s=qt.transition,o=Le;try{if(qt.transition=null,Le=16>t?16:t,Jn===null)var a=!1;else{if(t=Jn,Jn=null,ul=0,(Ae&6)!==0)throw Error(n(331));var d=Ae;for(Ae|=4,Z=t.current;Z!==null;){var f=Z,g=f.child;if((Z.flags&16)!==0){var w=f.deletions;if(w!==null){for(var C=0;C<w.length;C++){var T=w[C];for(Z=T;Z!==null;){var $=Z;switch($.tag){case 0:case 11:case 15:Si(8,$,f)}var B=$.child;if(B!==null)B.return=$,Z=B;else for(;Z!==null;){$=Z;var U=$.sibling,J=$.return;if(pp($),$===T){Z=null;break}if(U!==null){U.return=J,Z=U;break}Z=J}}}var ee=f.alternate;if(ee!==null){var te=ee.child;if(te!==null){ee.child=null;do{var nt=te.sibling;te.sibling=null,te=nt}while(te!==null)}}Z=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Z=g;else e:for(;Z!==null;){if(f=Z,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Si(9,f,f.return)}var I=f.sibling;if(I!==null){I.return=f.return,Z=I;break e}Z=f.return}}var S=t.current;for(Z=S;Z!==null;){g=Z;var b=g.child;if((g.subtreeFlags&2064)!==0&&b!==null)b.return=g,Z=b;else e:for(g=S;Z!==null;){if(w=Z,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:il(9,w)}}catch(re){Je(w,w.return,re)}if(w===g){Z=null;break e}var W=w.sibling;if(W!==null){W.return=w.return,Z=W;break e}Z=w.return}}if(Ae=d,Gn(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(vo,t)}catch{}a=!0}return a}finally{Le=o,qt.transition=s}}return!1}function Pp(t,s,o){s=ps(o,s),s=qf(t,s,1),t=qn(t,s,1),s=It(),t!==null&&(Ys(t,1,s),Dt(t,s))}function Je(t,s,o){if(t.tag===3)Pp(t,t,o);else for(;s!==null;){if(s.tag===3){Pp(s,t,o);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Yn===null||!Yn.has(a))){t=ps(o,t),t=Qf(s,t,1),s=qn(s,t,1),t=It(),s!==null&&(Ys(s,1,t),Dt(s,t));break}}s=s.return}}function x0(t,s,o){var a=t.pingCache;a!==null&&a.delete(s),s=It(),t.pingedLanes|=t.suspendedLanes&o,ut===t&&(mt&o)===o&&(it===4||it===3&&(mt&130023424)===mt&&500>tt()-qc?jr(t,0):Kc|=o),Dt(t,s)}function Rp(t,s){s===0&&((t.mode&1)===0?s=1:(s=xo,xo<<=1,(xo&130023424)===0&&(xo=4194304)));var o=It();t=En(t,s),t!==null&&(Ys(t,s,o),Dt(t,o))}function w0(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),Rp(t,o)}function C0(t,s){var o=0;switch(t.tag){case 13:var a=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(s),Rp(t,o)}var jp;jp=function(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps||Rt.current)At=!0;else{if((t.lanes&o)===0&&(s.flags&128)===0)return At=!1,c0(t,s,o);At=(t.flags&131072)!==0}else At=!1,qe&&(s.flags&1048576)!==0&&df(s,Bo,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;rl(t,s),t=s.pendingProps;var d=os(s,_t.current);hs(s,o),d=Nc(null,s,a,t,d,o);var f=Ic();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,jt(a)?(f=!0,Uo(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,vc(s),d.updater=tl,s.stateNode=d,d._reactInternals=s,jc(s,a,t,o),s=Lc(null,s,a,!0,f,o)):(s.tag=0,qe&&f&&ac(s),Nt(null,s,d,o),s=s.child),s;case 16:a=s.elementType;e:{switch(rl(t,s),t=s.pendingProps,d=a._init,a=d(a._payload),s.type=a,d=s.tag=E0(a),t=tn(a,t),d){case 0:s=Dc(null,s,a,t,o);break e;case 1:s=sp(null,s,a,t,o);break e;case 11:s=Zf(null,s,a,t,o);break e;case 14:s=ep(null,s,a,tn(a.type,t),o);break e}throw Error(n(306,a,""))}return s;case 0:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:tn(a,d),Dc(t,s,a,d,o);case 1:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:tn(a,d),sp(t,s,a,d,o);case 3:e:{if(ip(s),t===null)throw Error(n(387));a=s.pendingProps,f=s.memoizedState,d=f.element,xf(t,s),qo(s,a,null,o);var g=s.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=ps(Error(n(423)),s),s=op(t,s,a,o,d);break e}else if(a!==d){d=ps(Error(n(424)),s),s=op(t,s,a,o,d);break e}else for(zt=Wn(s.stateNode.containerInfo.firstChild),$t=s,qe=!0,en=null,o=vf(s,null,a,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(cs(),a===d){s=In(t,s,o);break e}Nt(t,s,a,o)}s=s.child}return s;case 5:return Sf(s),t===null&&dc(s),a=s.type,d=s.pendingProps,f=t!==null?t.memoizedProps:null,g=d.children,nc(a,d)?g=null:f!==null&&nc(a,f)&&(s.flags|=32),rp(t,s),Nt(t,s,g,o),s.child;case 6:return t===null&&dc(s),null;case 13:return lp(t,s,o);case 4:return _c(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=us(s,null,a,o):Nt(t,s,a,o),s.child;case 11:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:tn(a,d),Zf(t,s,a,d,o);case 7:return Nt(t,s,s.pendingProps,o),s.child;case 8:return Nt(t,s,s.pendingProps.children,o),s.child;case 12:return Nt(t,s,s.pendingProps.children,o),s.child;case 10:e:{if(a=s.type._context,d=s.pendingProps,f=s.memoizedProps,g=d.value,ze(Ho,a._currentValue),a._currentValue=g,f!==null)if(Zt(f.value,g)){if(f.children===d.children&&!Rt.current){s=In(t,s,o);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var w=f.dependencies;if(w!==null){g=f.child;for(var C=w.firstContext;C!==null;){if(C.context===a){if(f.tag===1){C=Nn(-1,o&-o),C.tag=2;var T=f.updateQueue;if(T!==null){T=T.shared;var $=T.pending;$===null?C.next=C:(C.next=$.next,$.next=C),T.pending=C}}f.lanes|=o,C=f.alternate,C!==null&&(C.lanes|=o),gc(f.return,o,s),w.lanes|=o;break}C=C.next}}else if(f.tag===10)g=f.type===s.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(n(341));g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),gc(g,o,s),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===s){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Nt(t,s,d.children,o),s=s.child}return s;case 9:return d=s.type,a=s.pendingProps.children,hs(s,o),d=Gt(d),a=a(d),s.flags|=1,Nt(t,s,a,o),s.child;case 14:return a=s.type,d=tn(a,s.pendingProps),d=tn(a.type,d),ep(t,s,a,d,o);case 15:return tp(t,s,s.type,s.pendingProps,o);case 17:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:tn(a,d),rl(t,s),s.tag=1,jt(a)?(t=!0,Uo(s)):t=!1,hs(s,o),Gf(s,a,d),jc(s,a,d,o),Lc(null,s,a,!0,t,o);case 19:return cp(t,s,o);case 22:return np(t,s,o)}throw Error(n(156,s.tag))};function Ap(t,s){return dh(t,s)}function S0(t,s,o,a){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,s,o,a){return new S0(t,s,o,a)}function nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E0(t){if(typeof t=="function")return nu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fe)return 11;if(t===Se)return 14}return 2}function er(t,s){var o=t.alternate;return o===null?(o=Qt(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function pl(t,s,o,a,d,f){var g=2;if(a=t,typeof t=="function")nu(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case ve:return Or(o.children,d,f,s);case Me:g=8,d|=8;break;case Ve:return t=Qt(12,o,s,d|2),t.elementType=Ve,t.lanes=f,t;case O:return t=Qt(13,o,s,d),t.elementType=O,t.lanes=f,t;case se:return t=Qt(19,o,s,d),t.elementType=se,t.lanes=f,t;case X:return ml(o,d,f,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:g=10;break e;case Ke:g=9;break e;case Fe:g=11;break e;case Se:g=14;break e;case K:g=16,a=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return s=Qt(g,o,s,d),s.elementType=t,s.type=a,s.lanes=f,s}function Or(t,s,o,a){return t=Qt(7,t,a,s),t.lanes=o,t}function ml(t,s,o,a){return t=Qt(22,t,a,s),t.elementType=X,t.lanes=o,t.stateNode={isHidden:!1},t}function ru(t,s,o){return t=Qt(6,t,null,s),t.lanes=o,t}function su(t,s,o){return s=Qt(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function N0(t,s,o,a,d){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function iu(t,s,o,a,d,f,g,w,C){return t=new N0(t,s,o,w,C),s===1?(s=1,f===!0&&(s|=8)):s=0,f=Qt(3,null,null,s),t.current=f,f.stateNode=t,f.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(f),t}function I0(t,s,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:a==null?null:""+a,children:t,containerInfo:s,implementation:o}}function Op(t){if(!t)return Hn;t=t._reactInternals;e:{if(Cr(t)!==t||t.tag!==1)throw Error(n(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(jt(o))return af(t,o,s)}return s}function Dp(t,s,o,a,d,f,g,w,C){return t=iu(o,a,!0,t,d,f,g,w,C),t.context=Op(null),o=t.current,a=It(),d=Xn(o),f=Nn(a,d),f.callback=s??null,qn(o,f,d),t.current.lanes=d,Ys(t,d,a),Dt(t,a),t}function gl(t,s,o,a){var d=s.current,f=It(),g=Xn(d);return o=Op(o),s.context===null?s.context=o:s.pendingContext=o,s=Nn(f,g),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=qn(d,s,g),t!==null&&(sn(t,d,g,f),Ko(t,d,g)),g}function yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function ou(t,s){Lp(t,s),(t=t.alternate)&&Lp(t,s)}function k0(){return null}var Mp=typeof reportError=="function"?reportError:function(t){console.error(t)};function lu(t){this._internalRoot=t}vl.prototype.render=lu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(n(409));gl(t,s,null,null)},vl.prototype.unmount=lu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Rr(function(){gl(null,t,null,null)}),s[xn]=null}};function vl(t){this._internalRoot=t}vl.prototype.unstable_scheduleHydration=function(t){if(t){var s=_h();t={blockedOn:null,target:t,priority:s};for(var o=0;o<$n.length&&s!==0&&s<$n[o].priority;o++);$n.splice(o,0,t),o===0&&Ch(t)}};function au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function b0(t,s,o,a,d){if(d){if(typeof a=="function"){var f=a;a=function(){var T=yl(g);f.call(T)}}var g=Dp(s,a,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=g,t[xn]=g.current,ui(t.nodeType===8?t.parentNode:t),Rr(),g}for(;d=t.lastChild;)t.removeChild(d);if(typeof a=="function"){var w=a;a=function(){var T=yl(C);w.call(T)}}var C=iu(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=C,t[xn]=C.current,ui(t.nodeType===8?t.parentNode:t),Rr(function(){gl(s,C,o,a)}),C}function xl(t,s,o,a,d){var f=o._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var w=d;d=function(){var C=yl(g);w.call(C)}}gl(s,g,t,d)}else g=b0(o,s,t,d,a);return yl(g)}yh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var o=Qs(s.pendingLanes);o!==0&&(ja(s,o|1),Dt(s,tt()),(Ae&6)===0&&(ys=tt()+500,Gn()))}break;case 13:Rr(function(){var a=En(t,1);if(a!==null){var d=It();sn(a,t,1,d)}}),ou(t,1)}},Aa=function(t){if(t.tag===13){var s=En(t,134217728);if(s!==null){var o=It();sn(s,t,134217728,o)}ou(t,134217728)}},vh=function(t){if(t.tag===13){var s=Xn(t),o=En(t,s);if(o!==null){var a=It();sn(o,t,s,a)}ou(t,s)}},_h=function(){return Le},xh=function(t,s){var o=Le;try{return Le=t,s()}finally{Le=o}},Na=function(t,s,o){switch(s){case"input":if(xe(t,o),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var a=o[s];if(a!==t&&a.form===t.form){var d=Mo(a);if(!d)throw Error(n(90));le(a),xe(a,d)}}}break;case"textarea":Qd(t,o);break;case"select":s=o.value,s!=null&&vt(t,!!o.multiple,s,!1)}},sh=Zc,ih=Rr;var T0={usingClientEntryPoint:!1,Events:[fi,ss,Mo,nh,rh,Zc]},ki={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P0={bundleType:ki.bundleType,version:ki.version,rendererPackageName:ki.rendererPackageName,rendererConfig:ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ch(t),t===null?null:t.stateNode},findFiberByHostInstance:ki.findFiberByHostInstance||k0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{vo=wl.inject(P0),un=wl}catch{}}return Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T0,Lt.createPortal=function(t,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!au(s))throw Error(n(200));return I0(t,s,null,o)},Lt.createRoot=function(t,s){if(!au(t))throw Error(n(299));var o=!1,a="",d=Mp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=iu(t,1,!1,null,null,o,!1,a,d),t[xn]=s.current,ui(t.nodeType===8?t.parentNode:t),new lu(s)},Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=ch(s),t=t===null?null:t.stateNode,t},Lt.flushSync=function(t){return Rr(t)},Lt.hydrate=function(t,s,o){if(!_l(s))throw Error(n(200));return xl(null,t,s,!0,o)},Lt.hydrateRoot=function(t,s,o){if(!au(t))throw Error(n(405));var a=o!=null&&o.hydratedSources||null,d=!1,f="",g=Mp;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),s=Dp(s,null,t,1,o??null,d,!1,f,g),t[xn]=s.current,ui(t),a)for(t=0;t<a.length;t++)o=a[t],d=o._getVersion,d=d(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,d]:s.mutableSourceEagerHydrationData.push(o,d);return new vl(s)},Lt.render=function(t,s,o){if(!_l(s))throw Error(n(200));return xl(null,t,s,!1,o)},Lt.unmountComponentAtNode=function(t){if(!_l(t))throw Error(n(40));return t._reactRootContainer?(Rr(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1},Lt.unstable_batchedUpdates=Zc,Lt.unstable_renderSubtreeIntoContainer=function(t,s,o,a){if(!_l(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return xl(t,s,o,!1,a)},Lt.version="18.3.1-next-f1338f8080-20240426",Lt}var Gp;function mg(){if(Gp)return du.exports;Gp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),du.exports=U0(),du.exports}var Kp;function $0(){if(Kp)return Cl;Kp=1;var r=mg();return Cl.createRoot=r.createRoot,Cl.hydrateRoot=r.hydrateRoot,Cl}var z0=$0();const B0=fg(z0);mg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zi(){return zi=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},zi.apply(this,arguments)}var ur;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ur||(ur={}));const qp="popstate";function W0(r){r===void 0&&(r={});function e(i,l){let{pathname:c,search:u,hash:p}=i.location;return Tu("",{pathname:c,search:u,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:yg(l)}return H0(e,n,null,r)}function at(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function gg(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V0(){return Math.random().toString(36).substr(2,8)}function Qp(r,e){return{usr:r.state,key:r.key,idx:e}}function Tu(r,e,n,i){return n===void 0&&(n=null),zi({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ds(e):e,{state:n,key:e&&e.key||i||V0()})}function yg(r){let{pathname:e="/",search:n="",hash:i=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ds(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function H0(r,e,n,i){i===void 0&&(i={});let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,p=ur.Pop,m=null,y=x();y==null&&(y=0,u.replaceState(zi({},u.state,{idx:y}),""));function x(){return(u.state||{idx:null}).idx}function _(){p=ur.Pop;let P=x(),G=P==null?null:P-y;y=P,m&&m({action:p,location:z.location,delta:G})}function v(P,G){p=ur.Push;let Y=Tu(z.location,P,G);y=x()+1;let ce=Qp(Y,y),me=z.createHref(Y);try{u.pushState(ce,"",me)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;l.location.assign(me)}c&&m&&m({action:p,location:z.location,delta:1})}function k(P,G){p=ur.Replace;let Y=Tu(z.location,P,G);y=x();let ce=Qp(Y,y),me=z.createHref(Y);u.replaceState(ce,"",me),c&&m&&m({action:p,location:z.location,delta:0})}function D(P){let G=l.location.origin!=="null"?l.location.origin:l.location.href,Y=typeof P=="string"?P:yg(P);return Y=Y.replace(/ $/,"%20"),at(G,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,G)}let z={get action(){return p},get location(){return r(l,u)},listen(P){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(qp,_),m=P,()=>{l.removeEventListener(qp,_),m=null}},createHref(P){return e(l,P)},createURL:D,encodeLocation(P){let G=D(P);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:v,replace:k,go(P){return u.go(P)}};return z}var Yp;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Yp||(Yp={}));function G0(r,e,n){return n===void 0&&(n="/"),K0(r,e,n)}function K0(r,e,n,i){let l=typeof e=="string"?Ds(e):e,c=xg(l.pathname||"/",n);if(c==null)return null;let u=vg(r);q0(u);let p=null;for(let m=0;p==null&&m<u.length;++m){let y=ox(c);p=rx(u[m],y)}return p}function vg(r,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let l=(c,u,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};m.relativePath.startsWith("/")&&(at(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let y=Fr([i,m.relativePath]),x=n.concat(m);c.children&&c.children.length>0&&(at(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),vg(c.children,e,x,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:tx(y,c.index),routesMeta:x})};return r.forEach((c,u)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,u);else for(let m of _g(c.path))l(c,u,m)}),e}function _g(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=_g(i.join("/")),p=[];return p.push(...u.map(m=>m===""?c:[c,m].join("/"))),l&&p.push(...u),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function q0(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:nx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Q0=/^:[\w-]+$/,Y0=3,J0=2,X0=1,Z0=10,ex=-2,Jp=r=>r==="*";function tx(r,e){let n=r.split("/"),i=n.length;return n.some(Jp)&&(i+=ex),e&&(i+=J0),n.filter(l=>!Jp(l)).reduce((l,c)=>l+(Q0.test(c)?Y0:c===""?X0:Z0),i)}function nx(r,e){return r.length===e.length&&r.slice(0,-1).every((i,l)=>i===e[l])?r[r.length-1]-e[e.length-1]:0}function rx(r,e,n){let{routesMeta:i}=r,l={},c="/",u=[];for(let p=0;p<i.length;++p){let m=i[p],y=p===i.length-1,x=c==="/"?e:e.slice(c.length)||"/",_=sx({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},x),v=m.route;if(!_)return null;Object.assign(l,_.params),u.push({params:l,pathname:Fr([c,_.pathname]),pathnameBase:hx(Fr([c,_.pathnameBase])),route:v}),_.pathnameBase!=="/"&&(c=Fr([c,_.pathnameBase]))}return u}function sx(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=ix(r.path,r.caseSensitive,r.end),l=e.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,x,_)=>{let{paramName:v,isOptional:k}=x;if(v==="*"){let z=p[_]||"";u=c.slice(0,c.length-z.length).replace(/(.)\/+$/,"$1")}const D=p[_];return k&&!D?y[v]=void 0:y[v]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:u,pattern:r}}function ix(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gg(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function ox(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gg(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function xg(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function lx(r,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:l=""}=typeof r=="string"?Ds(r):r;return{pathname:n?n.startsWith("/")?n:ax(n,e):e,search:fx(i),hash:px(l)}}function ax(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function pu(r,e,n,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cx(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ux(r,e){let n=cx(r);return e?n.map((i,l)=>l===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function dx(r,e,n,i){i===void 0&&(i=!1);let l;typeof r=="string"?l=Ds(r):(l=zi({},r),at(!l.pathname||!l.pathname.includes("?"),pu("?","pathname","search",l)),at(!l.pathname||!l.pathname.includes("#"),pu("#","pathname","hash",l)),at(!l.search||!l.search.includes("#"),pu("#","search","hash",l)));let c=r===""||l.pathname==="",u=c?"/":l.pathname,p;if(u==null)p=n;else{let _=e.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),_-=1;l.pathname=v.join("/")}p=_>=0?e[_]:"/"}let m=lx(l,p),y=u&&u!=="/"&&u.endsWith("/"),x=(c||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(y||x)&&(m.pathname+="/"),m}const Fr=r=>r.join("/").replace(/\/\/+/g,"/"),hx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,px=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function mx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const wg=["post","put","patch","delete"];new Set(wg);const gx=["get",...wg];new Set(gx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bi(){return Bi=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Bi.apply(this,arguments)}const ed=R.createContext(null),yx=R.createContext(null),ea=R.createContext(null),ta=R.createContext(null),Gr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Cg=R.createContext(null);function na(){return R.useContext(ta)!=null}function ra(){return na()||at(!1),R.useContext(ta).location}function Sg(r){R.useContext(ea).static||R.useLayoutEffect(r)}function vn(){let{isDataRoute:r}=R.useContext(Gr);return r?Rx():vx()}function vx(){na()||at(!1);let r=R.useContext(ed),{basename:e,future:n,navigator:i}=R.useContext(ea),{matches:l}=R.useContext(Gr),{pathname:c}=ra(),u=JSON.stringify(ux(l,n.v7_relativeSplatPath)),p=R.useRef(!1);return Sg(()=>{p.current=!0}),R.useCallback(function(y,x){if(x===void 0&&(x={}),!p.current)return;if(typeof y=="number"){i.go(y);return}let _=dx(y,JSON.parse(u),c,x.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Fr([e,_.pathname])),(x.replace?i.replace:i.push)(_,x.state,x)},[e,i,u,c,r])}function _x(){let{matches:r}=R.useContext(Gr),e=r[r.length-1];return e?e.params:{}}function xx(r,e){return wx(r,e)}function wx(r,e,n,i){na()||at(!1);let{navigator:l}=R.useContext(ea),{matches:c}=R.useContext(Gr),u=c[c.length-1],p=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let y=ra(),x;if(e){var _;let P=typeof e=="string"?Ds(e):e;m==="/"||(_=P.pathname)!=null&&_.startsWith(m)||at(!1),x=P}else x=y;let v=x.pathname||"/",k=v;if(m!=="/"){let P=m.replace(/^\//,"").split("/");k="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let D=G0(r,{pathname:k}),z=Ix(D&&D.map(P=>Object.assign({},P,{params:Object.assign({},p,P.params),pathname:Fr([m,l.encodeLocation?l.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?m:Fr([m,l.encodeLocation?l.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),c,n,i);return e&&z?R.createElement(ta.Provider,{value:{location:Bi({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:ur.Pop}},z):z}function Cx(){let r=Px(),e=mx(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:l},n):null,null)}const Sx=R.createElement(Cx,null);class Ex extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Gr.Provider,{value:this.props.routeContext},R.createElement(Cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nx(r){let{routeContext:e,match:n,children:i}=r,l=R.useContext(ed);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Gr.Provider,{value:e},i)}function Ix(r,e,n,i){var l;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),r==null){var c;if(!n)return null;if(n.errors)r=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,p=(l=n)==null?void 0:l.errors;if(p!=null){let x=u.findIndex(_=>_.route.id&&p?.[_.route.id]!==void 0);x>=0||at(!1),u=u.slice(0,Math.min(u.length,x+1))}let m=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let x=0;x<u.length;x++){let _=u[x];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(y=x),_.route.id){let{loaderData:v,errors:k}=n,D=_.route.loader&&v[_.route.id]===void 0&&(!k||k[_.route.id]===void 0);if(_.route.lazy||D){m=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((x,_,v)=>{let k,D=!1,z=null,P=null;n&&(k=p&&_.route.id?p[_.route.id]:void 0,z=_.route.errorElement||Sx,m&&(y<0&&v===0?(jx("route-fallback"),D=!0,P=null):y===v&&(D=!0,P=_.route.hydrateFallbackElement||null)));let G=e.concat(u.slice(0,v+1)),Y=()=>{let ce;return k?ce=z:D?ce=P:_.route.Component?ce=R.createElement(_.route.Component,null):_.route.element?ce=_.route.element:ce=x,R.createElement(Nx,{match:_,routeContext:{outlet:x,matches:G,isDataRoute:n!=null},children:ce})};return n&&(_.route.ErrorBoundary||_.route.errorElement||v===0)?R.createElement(Ex,{location:n.location,revalidation:n.revalidation,component:z,error:k,children:Y(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):Y()},null)}var Eg=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Eg||{}),Ng=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Ng||{});function kx(r){let e=R.useContext(ed);return e||at(!1),e}function bx(r){let e=R.useContext(yx);return e||at(!1),e}function Tx(r){let e=R.useContext(Gr);return e||at(!1),e}function Ig(r){let e=Tx(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function Px(){var r;let e=R.useContext(Cg),n=bx(),i=Ig();return e!==void 0?e:(r=n.errors)==null?void 0:r[i]}function Rx(){let{router:r}=kx(Eg.UseNavigateStable),e=Ig(Ng.UseNavigateStable),n=R.useRef(!1);return Sg(()=>{n.current=!0}),R.useCallback(function(l,c){c===void 0&&(c={}),n.current&&(typeof l=="number"?r.navigate(l):r.navigate(l,Bi({fromRouteId:e},c)))},[r,e])}const Xp={};function jx(r,e,n){Xp[r]||(Xp[r]=!0)}function Ax(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function ir(r){at(!1)}function Ox(r){let{basename:e="/",children:n=null,location:i,navigationType:l=ur.Pop,navigator:c,static:u=!1,future:p}=r;na()&&at(!1);let m=e.replace(/^\/*/,"/"),y=R.useMemo(()=>({basename:m,navigator:c,static:u,future:Bi({v7_relativeSplatPath:!1},p)}),[m,p,c,u]);typeof i=="string"&&(i=Ds(i));let{pathname:x="/",search:_="",hash:v="",state:k=null,key:D="default"}=i,z=R.useMemo(()=>{let P=xg(x,m);return P==null?null:{location:{pathname:P,search:_,hash:v,state:k,key:D},navigationType:l}},[m,x,_,v,k,D,l]);return z==null?null:R.createElement(ea.Provider,{value:y},R.createElement(ta.Provider,{children:n,value:z}))}function Dx(r){let{children:e,location:n}=r;return xx(Pu(e),n)}new Promise(()=>{});function Pu(r,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(r,(i,l)=>{if(!R.isValidElement(i))return;let c=[...e,l];if(i.type===R.Fragment){n.push.apply(n,Pu(i.props.children,c));return}i.type!==ir&&at(!1),!i.props.index||!i.props.children||at(!1);let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Pu(i.props.children,c)),n.push(u)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Lx="6";try{window.__reactRouterVersion=Lx}catch{}const Mx="startTransition",Zp=L0[Mx];function Fx(r){let{basename:e,children:n,future:i,window:l}=r,c=R.useRef();c.current==null&&(c.current=W0({window:l,v5Compat:!0}));let u=c.current,[p,m]=R.useState({action:u.action,location:u.location}),{v7_startTransition:y}=i||{},x=R.useCallback(_=>{y&&Zp?Zp(()=>m(_)):m(_)},[m,y]);return R.useLayoutEffect(()=>u.listen(x),[u,x]),R.useEffect(()=>Ax(i),[i]),R.createElement(Ox,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:u,future:i})}var em;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(em||(em={}));var tm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(tm||(tm={}));function Ux({userName:r,userEmail:e,size:n="sm"}){const[i,l]=R.useState(""),[c,u]=R.useState(!1),[p,m]=R.useState(!1),y=vn();R.useEffect(()=>{const G=localStorage.getItem(`finder_profile_picture_${e}`);G&&l(G);const Y=ce=>{ce.target.closest(".profile-dropdown")||u(!1)};return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[e]);const x=()=>r?r.charAt(0).toUpperCase():"U",_=()=>{switch(n){case"xs":return"w-6 h-6 text-xs";case"sm":return"w-8 h-8 text-sm";case"md":return"w-10 h-10 text-base";case"lg":return"w-12 h-12 text-lg";default:return"w-8 h-8 text-sm"}},v=()=>{const G=["bg-pink-300","bg-purple-300","bg-indigo-300","bg-blue-300","bg-green-300","bg-yellow-300","bg-red-300","bg-gray-300"],Y=(r||e||"").length%G.length;return G[Y]},k=()=>{u(!1),y("/profile")},D=()=>{u(!1),m(!0)},z=()=>{localStorage.removeItem("finder_email"),localStorage.removeItem(`finder_profile_picture_${e}`),window.location.href="/"},P=()=>{m(!1)};return h.jsxs("div",{className:"relative profile-dropdown",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:`${_()} rounded-full cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0 relative group`,onClick:()=>u(!c),title:"",children:[i?h.jsx("img",{src:i,alt:"Profile",className:`${_()} rounded-full object-cover border border-gray-200`}):h.jsx("div",{className:`${_()} ${v()} rounded-full flex items-center justify-center text-gray-700 font-medium border border-gray-200`,children:x()}),h.jsx("div",{className:"absolute top-full mt-2 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:"Click for options"})]}),h.jsx("span",{className:"font-medium text-gray-700 cursor-pointer hover:text-gray-900 transition-colors",onClick:()=>u(!c),children:r||"User"})]}),c&&h.jsxs("div",{className:"absolute top-full mt-2 right-0 bg-white border border-gray-200 rounded-lg shadow-lg py-2 min-w-[160px] z-50",children:[h.jsxs("button",{onClick:k,className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-3 text-gray-700",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"View Profile"]}),h.jsxs("button",{onClick:D,className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-3 text-red-600",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),p&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Confirm Logout"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to logout? You will need to login again to access your account."}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx("button",{onClick:P,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})]})})]})}class $x{constructor(){this.storageKey="finder_notifications"}getNotifications(e){try{return(JSON.parse(localStorage.getItem(this.storageKey))||{})[e]||[]}catch(n){return console.error("Error getting notifications:",n),[]}}addNotification(e,n){try{const i=JSON.parse(localStorage.getItem(this.storageKey))||{};i[e]||(i[e]=[]);const l={id:Date.now()+Math.random(),timestamp:new Date().toISOString(),read:!1,...n};return i[e].unshift(l),i[e].length>50&&(i[e]=i[e].slice(0,50)),localStorage.setItem(this.storageKey,JSON.stringify(i)),l}catch(i){return console.error("Error adding notification:",i),null}}markAsRead(e,n){try{const i=JSON.parse(localStorage.getItem(this.storageKey))||{};if(i[e]){const l=i[e].find(c=>c.id===n);l&&(l.read=!0,localStorage.setItem(this.storageKey,JSON.stringify(i)))}}catch(i){console.error("Error marking notification as read:",i)}}markAllAsRead(e){try{const n=JSON.parse(localStorage.getItem(this.storageKey))||{};n[e]&&(n[e].forEach(i=>i.read=!0),localStorage.setItem(this.storageKey,JSON.stringify(n)))}catch(n){console.error("Error marking all notifications as read:",n)}}getUnreadCount(e){return this.getNotifications(e).filter(i=>!i.read).length}clearNotifications(e){try{const n=JSON.parse(localStorage.getItem(this.storageKey))||{};n[e]=[],localStorage.setItem(this.storageKey,JSON.stringify(n))}catch(n){console.error("Error clearing notifications:",n)}}notifyOpportunityPoster(e,n,i,l){return this.addNotification(e,{type:"new_application",title:"New Application Received",message:`${n} applied to your opportunity "${i}"`,icon:"👤",action:"View Applications",actionUrl:`/dashboard?tab=posted&opportunityId=${l}`})}notifyApplicationAccepted(e,n,i){return this.addNotification(e,{type:"application_accepted",title:"Application Accepted!",message:`Congratulations! Your application for "${n}" has been accepted.`,icon:"✅",action:"View Details",actionUrl:`/dashboard?filter=accepted&tab=applied&opportunityId=${i}`})}notifyApplicationRejected(e,n,i){return this.addNotification(e,{type:"application_rejected",title:"Application Update",message:`Your application for "${n}" was not selected this time.`,icon:"❌",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${i}`})}notifyOpportunityClosed(e,n,i){return this.addNotification(e,{type:"opportunity_closed",title:"Opportunity Closed",message:`The opportunity "${n}" you applied for has been closed.`,icon:"🔒",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${i}`})}}const Mt=new $x;function zx({userEmail:r}){const[e,n]=R.useState([]),[i,l]=R.useState(0),[c,u]=R.useState(!1),p=vn();R.useEffect(()=>{if(r){m();const k=setInterval(m,5e3);return()=>clearInterval(k)}},[r]);const m=()=>{if(!r)return;const k=Mt.getNotifications(r),D=Mt.getUnreadCount(r);n(k),l(D)},y=k=>{Mt.markAsRead(r,k.id),k.actionUrl&&p(k.actionUrl),u(!1),m()},x=()=>{Mt.markAllAsRead(r),m()},_=()=>{Mt.clearNotifications(r),m(),u(!1)},v=k=>{const D=new Date,z=new Date(k),P=Math.floor((D-z)/(1e3*60));if(P<1)return"Just now";if(P<60)return`${P}m ago`;const G=Math.floor(P/60);return G<24?`${G}h ago`:`${Math.floor(G/24)}d ago`};return h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>u(!c),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i>0&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1",children:i>99?"99+":i})]}),c&&h.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border z-50 max-h-96 overflow-hidden",children:[h.jsx("div",{className:"p-4 border-b bg-gray-50",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),h.jsxs("div",{className:"flex gap-2",children:[i>0&&h.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-700",children:"Mark all read"}),h.jsx("button",{onClick:_,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]})]})}),h.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.length===0?h.jsxs("div",{className:"p-6 text-center text-gray-500",children:[h.jsx("div",{className:"text-4xl mb-2",children:"🔔"}),h.jsx("p",{children:"No notifications yet"})]}):e.map(k=>h.jsx("div",{onClick:()=>y(k),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ${k.read?"":"bg-blue-50 border-l-4 border-l-blue-500"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-2xl",children:k.icon}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("h4",{className:`font-medium text-sm ${k.read?"text-gray-700":"text-gray-900"}`,children:k.title}),h.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:v(k.timestamp)})]}),h.jsx("p",{className:`text-sm mt-1 ${k.read?"text-gray-600":"text-gray-700"}`,children:k.message}),k.action&&h.jsxs("span",{className:"inline-block mt-2 text-xs text-blue-600 font-medium",children:[k.action," →"]})]})]})},k.id))})]}),c&&h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]})}const sa="/assets/Logo%20FI-XBWdYX7H.png",Bx=()=>{};var nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(r,e){if(!r)throw Ls(e)},Ls=function(r){return new Error("Firebase Database ("+kg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Wx=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const l=r[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],u=r[n++],p=r[n++],m=((l&7)<<18|(c&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const c=r[n++],u=r[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|u&63)}}return e.join("")},td={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<r.length;l+=3){const c=r[l],u=l+1<r.length,p=u?r[l+1]:0,m=l+2<r.length,y=m?r[l+2]:0,x=c>>2,_=(c&3)<<4|p>>4;let v=(p&15)<<2|y>>6,k=y&63;m||(k=64,u||(v=64)),i.push(n[x],n[_],n[v],n[k])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(bg(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Wx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const _=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||_==null)throw new Vx;const v=c<<2|p>>4;if(i.push(v),y!==64){const k=p<<4&240|y>>2;if(i.push(k),_!==64){const D=y<<6&192|_;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tg=function(r){const e=bg(r);return td.encodeByteArray(e,!0)},Rl=function(r){return Tg(r).replace(/\./g,"")},jl=function(r){try{return td.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(r){return Pg(void 0,r)}function Pg(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Gx(n)||(r[n]=Pg(r[n],e[n]));return r}function Gx(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=()=>Kx().__FIREBASE_DEFAULTS__,Qx=()=>{if(typeof process>"u"||typeof nm>"u")return;const r=nm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Yx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&jl(r[1]);return e&&JSON.parse(e)},nd=()=>{try{return Bx()||qx()||Qx()||Yx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Rg=r=>nd()?.emulatorHosts?.[r],Jx=r=>{const e=Rg(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},jg=()=>nd()?.config,Ag=r=>nd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Og(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Rl(JSON.stringify(n)),Rl(JSON.stringify(u)),""].join(".")}const Ai={};function Zx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ai))Ai[e]?r.emulator.push(e):r.prod.push(e);return r}function ew(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let rm=!1;function Dg(r,e){if(typeof window>"u"||typeof document>"u"||!Ms(window.location.host)||Ai[r]===e||Ai[r]||rm)return;Ai[r]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",c=Zx().prod.length>0;function u(){const v=document.getElementById(i);v&&v.remove()}function p(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function m(v,k){v.setAttribute("width","24"),v.setAttribute("id",k),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function y(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{rm=!0,u()},v}function x(v,k){v.setAttribute("id",k),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=ew(i),k=n("text"),D=document.getElementById(k)||document.createElement("span"),z=n("learnmore"),P=document.getElementById(z)||document.createElement("a"),G=n("preprendIcon"),Y=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const ce=v.element;p(ce),x(P,z);const me=y();m(Y,G),ce.append(Y,D,P,me),document.body.appendChild(ce)}c?(D.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function tw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Lg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rw(){const r=Tt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sw(){return kg.NODE_ADMIN===!0}function iw(){try{return typeof indexedDB=="object"}catch{return!1}}function ow(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="FirebaseError";class xr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=lw,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],u=c?aw(c,i):"Error",p=`${this.serviceName}: ${u} (${l}).`;return new xr(l,p,i)}}function aw(r,e){return r.replace(cw,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const cw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r){return JSON.parse(r)}function lt(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=function(r){let e={},n={},i={},l="";try{const c=r.split(".");e=Wi(jl(c[0])||""),n=Wi(jl(c[1])||""),l=c[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:l}},uw=function(r){const e=Mg(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dw=function(r){const e=Mg(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function ks(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Ru(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Al(r,e,n){const i={};for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=e.call(n,r[l],l,r));return i}function $r(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=r[l],u=e[l];if(sm(c)&&sm(u)){if(!$r(c,u))return!1}else if(c!==u)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function sm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const v=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(v<<1|v>>>31)&4294967295}let l=this.chain_[0],c=this.chain_[1],u=this.chain_[2],p=this.chain_[3],m=this.chain_[4],y,x;for(let _=0;_<80;_++){_<40?_<20?(y=p^c&(u^p),x=1518500249):(y=c^u^p,x=1859775393):_<60?(y=c&u|p&(c|u),x=2400959708):(y=c^u^p,x=3395469782);const v=(l<<5|l>>>27)+y+m+x+i[_]&4294967295;m=p,p=u,u=(c<<30|c>>>2)&4294967295,c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let l=0;const c=this.buf_;let u=this.inbuf_;for(;l<n;){if(u===0)for(;l<=i;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(c[u]=e.charCodeAt(l),++u,++l,u===this.blockSize){this.compress_(c),u=0;break}}else for(;l<n;)if(c[u]=e[l],++u,++l,u===this.blockSize){this.compress_(c),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let l=0;l<5;l++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[l]>>c&255,++i;return e}}function fw(r,e){const n=new pw(r,e);return n.subscribe.bind(n)}class pw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mw(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=mu),l.error===void 0&&(l.error=mu),l.complete===void 0&&(l.complete=mu);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function mu(){}function ia(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);if(l>=55296&&l<=56319){const c=l-55296;i++,H(i<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(i)-56320;l=65536+(c<<10)+u}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},oa=function(r){let e=0;for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class zr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new to;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_w(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&u.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vw(r){return r===Dr?void 0:r}function _w(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const ww={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Cw=Ue.INFO,Sw={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Ew=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=Sw[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=Cw,this._logHandler=Ew,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ww[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Nw=(r,e)=>e.some(n=>r instanceof n);let im,om;function Iw(){return im||(im=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return om||(om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fg=new WeakMap,ju=new WeakMap,Ug=new WeakMap,gu=new WeakMap,id=new WeakMap;function bw(r){const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{n(hr(r.result)),l()},u=()=>{i(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Fg.set(n,r)}).catch(()=>{}),id.set(e,r),e}function Tw(r){if(ju.has(r))return;const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{n(),l()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});ju.set(r,e)}let Au={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return ju.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ug.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Pw(r){Au=r(Au)}function Rw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(yu(this),e,...n);return Ug.set(i,e.sort?e.sort():[e]),hr(i)}:kw().includes(r)?function(...e){return r.apply(yu(this),e),hr(Fg.get(this))}:function(...e){return hr(r.apply(yu(this),e))}}function jw(r){return typeof r=="function"?Rw(r):(r instanceof IDBTransaction&&Tw(r),Nw(r,Iw())?new Proxy(r,Au):r)}function hr(r){if(r instanceof IDBRequest)return bw(r);if(gu.has(r))return gu.get(r);const e=jw(r);return e!==r&&(gu.set(r,e),id.set(e,r)),e}const yu=r=>id.get(r);function Aw(r,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const u=indexedDB.open(r,e),p=hr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(hr(u.result),m.oldVersion,m.newVersion,hr(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{c&&m.addEventListener("close",()=>c()),l&&m.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Ow=["get","getKey","getAll","getAllKeys","count"],Dw=["put","add","delete","clear"],vu=new Map;function lm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(vu.get(e))return vu.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=Dw.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||Ow.includes(n)))return;const c=async function(u,...p){const m=this.transaction(u,l?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&m.done]))[0]};return vu.set(e,c),c}Pw(r=>({...r,get:(e,n,i)=>lm(e,n)||r.get(e,n,i),has:(e,n)=>!!lm(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mw(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Mw(r){return r.getComponent()?.type==="VERSION"}const Ou="@firebase/app",am="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new sd("@firebase/app"),Fw="@firebase/app-compat",Uw="@firebase/analytics-compat",$w="@firebase/analytics",zw="@firebase/app-check-compat",Bw="@firebase/app-check",Ww="@firebase/auth",Vw="@firebase/auth-compat",Hw="@firebase/database",Gw="@firebase/data-connect",Kw="@firebase/database-compat",qw="@firebase/functions",Qw="@firebase/functions-compat",Yw="@firebase/installations",Jw="@firebase/installations-compat",Xw="@firebase/messaging",Zw="@firebase/messaging-compat",e1="@firebase/performance",t1="@firebase/performance-compat",n1="@firebase/remote-config",r1="@firebase/remote-config-compat",s1="@firebase/storage",i1="@firebase/storage-compat",o1="@firebase/firestore",l1="@firebase/ai",a1="@firebase/firestore-compat",c1="firebase",u1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="[DEFAULT]",d1={[Ou]:"fire-core",[Fw]:"fire-core-compat",[$w]:"fire-analytics",[Uw]:"fire-analytics-compat",[Bw]:"fire-app-check",[zw]:"fire-app-check-compat",[Ww]:"fire-auth",[Vw]:"fire-auth-compat",[Hw]:"fire-rtdb",[Gw]:"fire-data-connect",[Kw]:"fire-rtdb-compat",[qw]:"fire-fn",[Qw]:"fire-fn-compat",[Yw]:"fire-iid",[Jw]:"fire-iid-compat",[Xw]:"fire-fcm",[Zw]:"fire-fcm-compat",[e1]:"fire-perf",[t1]:"fire-perf-compat",[n1]:"fire-rc",[r1]:"fire-rc-compat",[s1]:"fire-gcs",[i1]:"fire-gcs-compat",[o1]:"fire-fst",[a1]:"fire-fst-compat",[l1]:"fire-vertex","fire-js":"fire-js",[c1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,h1=new Map,Lu=new Map;function cm(r,e){try{r.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function bs(r){const e=r.name;if(Lu.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;Lu.set(e,r);for(const n of Ol.values())cm(n,r);for(const n of h1.values())cm(n,r);return!0}function od(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new no("app","Firebase",f1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=u1;function $g(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:Du,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw fr.create("bad-app-name",{appName:String(l)});if(n||(n=jg()),!n)throw fr.create("no-options");const c=Ol.get(l);if(c){if($r(n,c.options)&&$r(i,c.config))return c;throw fr.create("duplicate-app",{appName:l})}const u=new xw(l);for(const m of Lu.values())u.addComponent(m);const p=new p1(n,i,u);return Ol.set(l,p),p}function zg(r=Du){const e=Ol.get(r);if(!e&&r===Du&&jg())return $g();if(!e)throw fr.create("no-app",{appName:r});return e}function pr(r,e,n){let i=d1[r]??r;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const u=[`Unable to register library "${i}" with version "${e}":`];l&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(u.join(" "));return}bs(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firebase-heartbeat-database",g1=1,Vi="firebase-heartbeat-store";let _u=null;function Bg(){return _u||(_u=Aw(m1,g1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Vi)}catch(n){console.warn(n)}}}}).catch(r=>{throw fr.create("idb-open",{originalErrorMessage:r.message})})),_u}async function y1(r){try{const n=(await Bg()).transaction(Vi),i=await n.objectStore(Vi).get(Wg(r));return await n.done,i}catch(e){if(e instanceof xr)jn.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}}async function um(r,e){try{const i=(await Bg()).transaction(Vi,"readwrite");await i.objectStore(Vi).put(e,Wg(r)),await i.done}catch(n){if(n instanceof xr)jn.warn(n.message);else{const i=fr.create("idb-set",{originalErrorMessage:n?.message});jn.warn(i.message)}}}function Wg(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=1024,_1=30;class x1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>_1){const l=S1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dm(),{heartbeatsToSend:n,unsentEntries:i}=w1(this._heartbeatsCache.heartbeats),l=Rl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return jn.warn(e),""}}}function dm(){return new Date().toISOString().substring(0,10)}function w1(r,e=v1){const n=[];let i=r.slice();for(const l of r){const c=n.find(u=>u.agent===l.agent);if(c){if(c.dates.push(l.date),hm(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),hm(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class C1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iw()?ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await y1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return um(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return um(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hm(r){return Rl(JSON.stringify({version:2,heartbeats:r})).length}function S1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){bs(new zr("platform-logger",e=>new Lw(e),"PRIVATE")),bs(new zr("heartbeat",e=>new x1(e),"PRIVATE")),pr(Ou,am,r),pr(Ou,am,"esm2020"),pr("fire-js","")}E1("");var N1="firebase",I1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(N1,I1,"app");var fm={};const pm="@firebase/database",mm="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg="";function k1(r){Vg=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),lt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return _n(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new b1(e)}}catch{}return new T1},Mr=Hg("localStorage"),P1=Hg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new sd("@firebase/database"),R1=function(){let r=1;return function(){return r++}}(),Gg=function(r){const e=gw(r),n=new hw;n.update(e);const i=n.digest();return td.encodeByteArray(i)},ro=function(...r){let e="";for(let n=0;n<r.length;n++){const i=r[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ro.apply(null,i):typeof i=="object"?e+=lt(i):e+=i,e+=" "}return e};let Oi=null,gm=!0;const j1=function(r,e){H(!0,"Can't turn on custom loggers persistently."),Cs.logLevel=Ue.VERBOSE,Oi=Cs.log.bind(Cs)},gt=function(...r){if(gm===!0&&(gm=!1,Oi===null&&P1.get("logging_enabled")===!0&&j1()),Oi){const e=ro.apply(null,r);Oi(e)}},so=function(r){return function(...e){gt(r,...e)}},Mu=function(...r){const e="FIREBASE INTERNAL ERROR: "+ro(...r);Cs.error(e)},An=function(...r){const e=`FIREBASE FATAL ERROR: ${ro(...r)}`;throw Cs.error(e),new Error(e)},bt=function(...r){const e="FIREBASE WARNING: "+ro(...r);Cs.warn(e)},A1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ld=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},O1=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ts="[MIN_NAME]",Br="[MAX_NAME]",Kr=function(r,e){if(r===e)return 0;if(r===Ts||e===Br)return-1;if(e===Ts||r===Br)return 1;{const n=ym(r),i=ym(e);return n!==null?i!==null?n-i===0?r.length-e.length:n-i:-1:i!==null?1:r<e?-1:1}},D1=function(r,e){return r===e?0:r<e?-1:1},Ti=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+lt(e))},ad=function(r){if(typeof r!="object"||r===null)return lt(r);const e=[];for(const i in r)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=lt(e[i]),n+=":",n+=ad(r[e[i]]);return n+="}",n},Kg=function(r,e){const n=r.length;if(n<=e)return[r];const i=[];for(let l=0;l<n;l+=e)l+e>n?i.push(r.substring(l,n)):i.push(r.substring(l,l+e));return i};function yt(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const qg=function(r){H(!ld(r),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let l,c,u,p,m;r===0?(c=0,u=0,l=1/r===-1/0?1:0):(l=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(r)/Math.LN2),i),c=p+i,u=Math.round(r*Math.pow(2,n-p)-Math.pow(2,n))):(c=0,u=Math.round(r/Math.pow(2,1-i-n))));const y=[];for(m=n;m;m-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)y.push(c%2?1:0),c=Math.floor(c/2);y.push(l?1:0),y.reverse();const x=y.join("");let _="";for(m=0;m<64;m+=8){let v=parseInt(x.substr(m,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},L1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},M1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function F1(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+n);return i.code=r.toUpperCase(),i}const U1=new RegExp("^-?(0*)\\d{1,10}$"),$1=-2147483648,z1=2147483647,ym=function(r){if(U1.test(r)){const e=Number(r);if(e>=$1&&e<=z1)return e}return null},$s=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bt("Exception was thrown by user callback.",n),e},Math.floor(0))}},B1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Di=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){bt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bt(e)}}class Il{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Il.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="5",Qg="v",Yg="s",Jg="r",Xg="f",Zg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ey="ls",ty="p",Fu="ac",ny="websocket",ry="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n,i,l,c=!1,u="",p=!1,m=!1,y=null){this.secure=n,this.namespace=i,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function H1(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function iy(r,e,n){H(typeof e=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");let i;if(e===ny)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===ry)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H1(r)&&(n.ns=r.namespace);const l=[];return yt(n,(c,u)=>{l.push(c+"="+u)}),i+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.counters_={}}incrementCounter(e,n=1){_n(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Hx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu={},wu={};function ud(r){const e=r.toString();return xu[e]||(xu[e]=new G1),xu[e]}function K1(r,e){const n=r.toString();return wu[n]||(wu[n]=e()),wu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<i.length;++l)i[l]&&$s(()=>{this.onMessage_(i[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="start",Q1="close",Y1="pLPCommand",J1="pRTLPCB",oy="id",ly="pw",ay="ser",X1="cb",Z1="seg",eC="ts",tC="d",nC="dframe",cy=1870,uy=30,rC=cy-uy,sC=25e3,iC=3e4;class xs{constructor(e,n,i,l,c,u,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=so(e),this.stats_=ud(n),this.urlFn=m=>(this.appCheckToken&&(m[Fu]=this.appCheckToken),iy(n,ry,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new q1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iC)),O1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dd((...c)=>{const[u,p,m,y,x]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===vm)this.id=p,this.password=m;else if(u===Q1)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...c)=>{const[u,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[vm]="t",i[ay]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[X1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Qg]=cd,this.transportSessionId&&(i[Yg]=this.transportSessionId),this.lastSessionId&&(i[ey]=this.lastSessionId),this.applicationId&&(i[ty]=this.applicationId),this.appCheckToken&&(i[Fu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Zg.test(location.hostname)&&(i[Jg]=Xg);const l=this.urlFn(i);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xs.forceAllow_=!0}static forceDisallow(){xs.forceDisallow_=!0}static isAvailable(){return xs.forceAllow_?!0:!xs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!L1()&&!M1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Tg(n),l=Kg(i,rC);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[nC]="t",i[oy]=e,i[ly]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=lt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class dd{constructor(e,n,i,l){this.onDisconnect=i,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R1(),window[Y1+this.uniqueCallbackIdentifier]=e,window[J1+this.uniqueCallbackIdentifier]=n,this.myIFrame=dd.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){gt("frame writing exception"),p.stack&&gt(p.stack),gt(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[oy]=this.myID,e[ly]=this.myPW,e[ay]=this.currentSerial;let n=this.urlFn(e),i="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uy+i.length<=cy;){const u=this.pendingSegs.shift();i=i+"&"+Z1+l+"="+u.seg+"&"+eC+l+"="+u.ts+"&"+tC+l+"="+u.d,l++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(i,Math.floor(sC)),c=()=>{clearTimeout(l),i()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const l=i.readyState;(!l||l==="loaded"||l==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=16384,lC=45e3;let Dl=null;typeof MozWebSocket<"u"?Dl=MozWebSocket:typeof WebSocket<"u"&&(Dl=WebSocket);class on{constructor(e,n,i,l,c,u,p){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=so(this.connId),this.stats_=ud(n),this.connURL=on.connectionURL_(n,u,p,l,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,l,c){const u={};return u[Qg]=cd,typeof location<"u"&&location.hostname&&Zg.test(location.hostname)&&(u[Jg]=Xg),n&&(u[Yg]=n),i&&(u[ey]=i),l&&(u[Fu]=l),c&&(u[ty]=c),iy(e,ny,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mr.set("previous_websocket_failure",!0);try{let i;sw(),this.mySock=new Dl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){on.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Dl!==null&&!on.forceDisallow_}static previouslyFailed(){return Mr.isInMemoryStorage||Mr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Wi(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(H(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Kg(n,oC);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}on.responsesRequiredToBeHealthy=2;on.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{static get ALL_TRANSPORTS(){return[xs,on]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=on&&on.isAvailable();let i=n&&!on.previouslyFailed();if(e.webSocketOnly&&(n||bt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[on];else{const l=this.transports_=[];for(const c of Hi.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);Hi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Hi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=6e4,cC=5e3,uC=10*1024,dC=100*1024,Cu="t",_m="d",hC="s",xm="r",fC="e",wm="o",Cm="a",Sm="n",Em="p",pC="h";class mC{constructor(e,n,i,l,c,u,p,m,y,x){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=so("c:"+this.id+":"),this.transportManager_=new Hi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Di(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cu in e){const n=e[Cu];n===Cm?this.upgradeIfSecondaryHealthy_():n===xm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ti("t",e),i=Ti("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Em,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ti("t",e),i=Ti("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ti(Cu,e);if(_m in e){const i=e[_m];if(n===pC){const l={...i};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===Sm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===hC?this.onConnectionShutdown_(i):n===xm?this.onReset_(i):n===fC?Mu("Server Error: "+i):n===wm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cd!==i&&bt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Di(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Di(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Em,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{put(e,n,i,l){}merge(e,n,i,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let l=0;l<i.length;l++)i[l].callback.apply(i[l].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const l=this.getInitialEvent(e);l&&n.apply(i,l)}off(e,n,i){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let c=0;c<l.length;c++)if(l[c].callback===n&&(!i||i===l[c].context)){l.splice(c,1);return}}validateEventType_(e){H(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends hy{static getInstance(){return new Ll}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return H(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=32,Im=768;class $e{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[i]=this.pieces_[l],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function De(){return new $e("")}function Ne(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function yr(r){return r.pieces_.length-r.pieceNum_}function We(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new $e(r.pieces_,e)}function hd(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function gC(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function Gi(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function fy(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new $e(e,0)}function Xe(r,e){const n=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)n.push(r.pieces_[i]);if(e instanceof $e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let l=0;l<i.length;l++)i[l].length>0&&n.push(i[l])}return new $e(n,0)}function be(r){return r.pieceNum_>=r.pieces_.length}function kt(r,e){const n=Ne(r),i=Ne(e);if(n===null)return e;if(n===i)return kt(We(r),We(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function yC(r,e){const n=Gi(r,0),i=Gi(e,0);for(let l=0;l<n.length&&l<i.length;l++){const c=Kr(n[l],i[l]);if(c!==0)return c}return n.length===i.length?0:n.length<i.length?-1:1}function fd(r,e){if(yr(r)!==yr(e))return!1;for(let n=r.pieceNum_,i=e.pieceNum_;n<=r.pieces_.length;n++,i++)if(r.pieces_[n]!==e.pieces_[i])return!1;return!0}function Yt(r,e){let n=r.pieceNum_,i=e.pieceNum_;if(yr(r)>yr(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class vC{constructor(e,n){this.errorPrefix_=n,this.parts_=Gi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=oa(this.parts_[i]);py(this)}}function _C(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=oa(e),py(r)}function xC(r){const e=r.parts_.pop();r.byteLength_-=oa(e),r.parts_.length>0&&(r.byteLength_-=1)}function py(r){if(r.byteLength_>Im)throw new Error(r.errorPrefix_+"has a key path longer than "+Im+" bytes ("+r.byteLength_+").");if(r.parts_.length>Nm)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Nm+") or object contains a cycle "+Lr(r))}function Lr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends hy{static getInstance(){return new pd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return H(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=1e3,wC=300*1e3,km=30*1e3,CC=1.3,SC=3e4,EC="server_kill",bm=3;class Rn extends dy{constructor(e,n,i,l,c,u,p,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=Rn.nextPersistentConnectionId_++,this.log_=so("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pi,this.maxReconnectDelay_=wC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ll.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const l=++this.requestNumber_,c={r:l,a:e,b:n};this.log_(lt(c)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const n=new to,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const p=u.d;u.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,i,l){this.initConnection_();const c=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+c),this.listens.has(u)||this.listens.set(u,new Map),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(u).has(c),"listen() called twice for same path/queryId.");const p={onComplete:l,hashFn:n,query:e,tag:i};this.listens.get(u).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+i+" for "+l);const c={p:i},u="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(u,c,p=>{const m=p.d,y=p.s;Rn.warnOnListenWarnings_(m,n),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",p),y!=="ok"&&this.removeListen_(i,l),e.onComplete&&e.onComplete(y,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&_n(e,"w")){const i=ks(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();bt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dw(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=km)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=uw(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,l=>{const c=l.s,u=l.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,n)}sendUnlisten_(e,n,i,l){this.log_("Unlisten on "+e+" for "+n);const c={p:e},u="n";l&&(c.q=i,c.t=l),this.sendRequest(u,c)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,l){const c={p:n,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,u=>{l&&setTimeout(()=>{l(u.s,u.d)},Math.floor(0))})}put(e,n,i,l){this.putInternal("p",e,n,i,l)}merge(e,n,i,l){this.putInternal("m",e,n,i,l)}putInternal(e,n,i,l,c){this.initConnection_();const u={p:n,d:i};c!==void 0&&(u.h=c),this.outstandingPuts_.push({action:e,request:u,onComplete:l}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+lt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Mu("Unrecognized action received from server: "+lt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SC&&(this.reconnectDelay_=Pi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Rn.nextConnectionId_++,c=this.lastSessionId;let u=!1,p=null;const m=function(){p?p.close():(u=!0,i())},y=function(_){H(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:m,sendRequest:y};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);u?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,p=new mC(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,k=>{bt(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(EC)},c))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&bt(_),m())}}}interrupt(e){gt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ru(this.interruptReasons_)&&(this.reconnectDelay_=Pi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(c=>ad(c)).join("$"):i="default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const i=new $e(e).toString();let l;if(this.listens.has(i)){const c=this.listens.get(i);l=c.get(n),c.delete(n),c.size===0&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,n){gt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bm&&(this.reconnectDelay_=km,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){gt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Vg.replace(/\./g,"-")]=1,rd()?e["framework.cordova"]=1:Lg()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ll.getInstance().currentlyOnline();return Ru(this.interruptReasons_)&&e}}Rn.nextPersistentConnectionId_=0;Rn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ie(Ts,e),l=new Ie(Ts,n);return this.compare(i,l)!==0}minPost(){return Ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;class my extends la{static get __EMPTY_NODE(){return Sl}static set __EMPTY_NODE(e){Sl=e}compare(e,n){return Kr(e.name,n.name)}isDefinedOn(e){throw Ls("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Br,Sl)}makePost(e,n){return H(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,Sl)}toString(){return".key"}}const Ss=new my;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,i,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?i(e.key,n):1,l&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ft{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??ft.RED,this.left=l??Ft.EMPTY_NODE,this.right=c??Ft.EMPTY_NODE}copy(e,n,i,l,c){return new ft(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ft.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,l;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ft.RED=!0;ft.BLACK=!1;class NC{copy(e,n,i,l,c){return this}insert(e,n,i){return new ft(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ft{constructor(e,n=Ft.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ft(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new Ft(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,l=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return l?l.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(l=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new El(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new El(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new El(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new El(this.root_,null,this.comparator_,!0,e)}}Ft.EMPTY_NODE=new NC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(r,e){return Kr(r.name,e.name)}function md(r,e){return Kr(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;function kC(r){Uu=r}const gy=function(r){return typeof r=="number"?"number:"+qg(r):"string:"+r},yy=function(r){if(r.isLeafNode()){const e=r.val();H(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_n(e,".sv"),"Priority must be a string or number.")}else H(r===Uu||r.isEmpty(),"priority of unexpected type.");H(r===Uu||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm;class ht{static set __childrenNodeConstructor(e){Tm=e}static get __childrenNodeConstructor(){return Tm}constructor(e,n=ht.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ht(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ht.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return be(e)?this:Ne(e)===".priority"?this.priorityNode_:ht.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ht.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ne(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(H(i!==".priority"||yr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ht.__childrenNodeConstructor.EMPTY_NODE.updateChild(We(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gy(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qg(this.value_):e+=this.value_,this.lazyHash_=Gg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ht.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ht.__childrenNodeConstructor?-1:(H(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,l=ht.VALUE_TYPE_ORDER.indexOf(n),c=ht.VALUE_TYPE_ORDER.indexOf(i);return H(l>=0,"Unknown leaf type: "+n),H(c>=0,"Unknown leaf type: "+i),l===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ht.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy,_y;function bC(r){vy=r}function TC(r){_y=r}class PC extends la{compare(e,n){const i=e.node.getPriority(),l=n.node.getPriority(),c=i.compareTo(l);return c===0?Kr(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Br,new ht("[PRIORITY-POST]",_y))}makePost(e,n){const i=vy(e);return new Ie(n,new ht("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ze=new PC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=Math.log(2);class jC{constructor(e){const n=c=>parseInt(Math.log(c)/RC,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=i(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ml=function(r,e,n,i){r.sort(e);const l=function(m,y){const x=y-m;let _,v;if(x===0)return null;if(x===1)return _=r[m],v=n?n(_):_,new ft(v,_.node,ft.BLACK,null,null);{const k=parseInt(x/2,10)+m,D=l(m,k),z=l(k+1,y);return _=r[k],v=n?n(_):_,new ft(v,_.node,ft.BLACK,D,z)}},c=function(m){let y=null,x=null,_=r.length;const v=function(D,z){const P=_-D,G=_;_-=D;const Y=l(P+1,G),ce=r[P],me=n?n(ce):ce;k(new ft(me,ce.node,z,null,Y))},k=function(D){y?(y.left=D,y=D):(x=D,y=D)};for(let D=0;D<m.count;++D){const z=m.nextBitIsOne(),P=Math.pow(2,m.count-(D+1));z?v(P,ft.BLACK):(v(P,ft.BLACK),v(P,ft.RED))}return x},u=new jC(r.length),p=c(u);return new Ft(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;const _s={};class bn{static get Default(){return H(_s&&Ze,"ChildrenNode.ts has not been loaded"),Su=Su||new bn({".priority":_s},{".priority":Ze}),Su}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ks(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ft?n:null}hasIndex(e){return _n(this.indexSet_,e.toString())}addIndex(e,n){H(e!==Ss,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let l=!1;const c=n.getIterator(Ie.Wrap);let u=c.getNext();for(;u;)l=l||e.isDefinedOn(u.node),i.push(u),u=c.getNext();let p;l?p=Ml(i,e.getCompare()):p=_s;const m=e.toString(),y={...this.indexSet_};y[m]=e;const x={...this.indexes_};return x[m]=p,new bn(x,y)}addToIndexes(e,n){const i=Al(this.indexes_,(l,c)=>{const u=ks(this.indexSet_,c);if(H(u,"Missing index implementation for "+c),l===_s)if(u.isDefinedOn(e.node)){const p=[],m=n.getIterator(Ie.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&p.push(y),y=m.getNext();return p.push(e),Ml(p,u.getCompare())}else return _s;else{const p=n.get(e.name);let m=l;return p&&(m=m.remove(new Ie(e.name,p))),m.insert(e,e.node)}});return new bn(i,this.indexSet_)}removeFromIndexes(e,n){const i=Al(this.indexes_,l=>{if(l===_s)return l;{const c=n.get(e.name);return c?l.remove(new Ie(e.name,c)):l}});return new bn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri;class fe{static get EMPTY_NODE(){return Ri||(Ri=new fe(new Ft(md),null,bn.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yy(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ri}updatePriority(e){return this.children_.isEmpty()?this:new fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ri:n}}getChild(e){const n=Ne(e);return n===null?this:this.getImmediateChild(n).getChild(We(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(H(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ie(e,n);let l,c;n.isEmpty()?(l=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(i,this.children_));const u=l.isEmpty()?Ri:this.priorityNode_;return new fe(l,u,c)}}updateChild(e,n){const i=Ne(e);if(i===null)return n;{H(Ne(e)!==".priority"||yr(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(We(e),n);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,l=0,c=!0;if(this.forEachChild(Ze,(u,p)=>{n[u]=p.val(e),i++,c&&fe.INTEGER_REGEXP_.test(u)?l=Math.max(l,Number(u)):c=!1}),!e&&c&&l<2*i){const u=[];for(const p in n)u[p]=n[p];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+gy(this.getPriority().val())+":"),this.forEachChild(Ze,(n,i)=>{const l=i.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":Gg(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const l=this.resolveIndex_(i);if(l){const c=l.getPredecessorKey(new Ie(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ie(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Ie.Wrap);let c=l.peek();for(;c!=null&&n.compare(c,e)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Ie.Wrap);let c=l.peek();for(;c!=null&&n.compare(c,e)>0;)l.getNext(),c=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===io?-1:0}withIndex(e){if(e===Ss||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ss||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ze),l=n.getIterator(Ze);let c=i.getNext(),u=l.getNext();for(;c&&u;){if(c.name!==u.name||!c.node.equals(u.node))return!1;c=i.getNext(),u=l.getNext()}return c===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===Ss?null:this.indexMap_.get(e.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AC extends fe{constructor(){super(new Ft(md),fe.EMPTY_NODE,bn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fe.EMPTY_NODE}isEmpty(){return!1}}const io=new AC;Object.defineProperties(Ie,{MIN:{value:new Ie(Ts,fe.EMPTY_NODE)},MAX:{value:new Ie(Br,io)}});my.__EMPTY_NODE=fe.EMPTY_NODE;ht.__childrenNodeConstructor=fe;kC(io);TC(io);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=!0;function ot(r,e=null){if(r===null)return fe.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),H(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new ht(n,ot(e))}if(!(r instanceof Array)&&OC){const n=[];let i=!1;if(yt(r,(u,p)=>{if(u.substring(0,1)!=="."){const m=ot(p);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),n.push(new Ie(u,m)))}}),n.length===0)return fe.EMPTY_NODE;const c=Ml(n,IC,u=>u.name,md);if(i){const u=Ml(n,Ze.getCompare());return new fe(c,ot(e),new bn({".priority":u},{".priority":Ze}))}else return new fe(c,ot(e),bn.Default)}else{let n=fe.EMPTY_NODE;return yt(r,(i,l)=>{if(_n(r,i)&&i.substring(0,1)!=="."){const c=ot(l);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(i,c))}}),n.updatePriority(ot(e))}}bC(ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends la{constructor(e){super(),this.indexPath_=e,H(!be(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),l=this.extractChild(n.node),c=i.compareTo(l);return c===0?Kr(e.name,n.name):c}makePost(e,n){const i=ot(e),l=fe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(n,l)}maxPost(){const e=fe.EMPTY_NODE.updateChild(this.indexPath_,io);return new Ie(Br,e)}toString(){return Gi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends la{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Kr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){const i=ot(e);return new Ie(n,i)}toString(){return".value"}}const MC=new LC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(r){return{type:"value",snapshotNode:r}}function Ps(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Ki(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function qi(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function FC(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.index_=e}updateChild(e,n,i,l,c,u){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(l).equals(i.getChild(l))&&p.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(n)?u.trackChildChange(Ki(n,p)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(Ps(n,i)):u.trackChildChange(qi(n,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ze,(l,c)=>{n.hasChild(l)||i.trackChildChange(Ki(l,c))}),n.isLeafNode()||n.forEachChild(Ze,(l,c)=>{if(e.hasChild(l)){const u=e.getImmediateChild(l);u.equals(c)||i.trackChildChange(qi(l,c,u))}else i.trackChildChange(Ps(l,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.indexedFilter_=new gd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qi.getStartPost_(e),this.endPost_=Qi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,l,c,u){return this.matches(new Ie(n,i))||(i=fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,l,c,u)}updateFullNode(e,n,i){n.isLeafNode()&&(n=fe.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(fe.EMPTY_NODE);const c=this;return n.forEachChild(Ze,(u,p)=>{c.matches(new Ie(u,p))||(l=l.updateImmediateChild(u,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Qi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,l,c,u){return this.rangedFilter_.matches(new Ie(n,i))||(i=fe.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,l,c,u):this.fullLimitUpdateChild_(e,n,i,c,u)}updateFullNode(e,n,i){let l;if(n.isLeafNode()||n.isEmpty())l=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=fe.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;c.hasNext()&&u<this.limit_;){const p=c.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))l=l.updateImmediateChild(p.name,p.node),u++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(fe.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let u=0;for(;c.hasNext();){const p=c.getNext();u<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?u++:l=l.updateImmediateChild(p.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,l,c){let u;if(this.reverse_){const _=this.index_.getCompare();u=(v,k)=>_(k,v)}else u=this.index_.getCompare();const p=e;H(p.numChildren()===this.limit_,"");const m=new Ie(n,i),y=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),x=this.rangedFilter_.matches(m);if(p.hasChild(n)){const _=p.getImmediateChild(n);let v=l.getChildAfterChild(this.index_,y,this.reverse_);for(;v!=null&&(v.name===n||p.hasChild(v.name));)v=l.getChildAfterChild(this.index_,v,this.reverse_);const k=v==null?1:u(v,m);if(x&&!i.isEmpty()&&k>=0)return c?.trackChildChange(qi(n,i,_)),p.updateImmediateChild(n,i);{c?.trackChildChange(Ki(n,_));const z=p.updateImmediateChild(n,fe.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c?.trackChildChange(Ps(v.name,v.node)),z.updateImmediateChild(v.name,v.node)):z}}else return i.isEmpty()?e:x&&u(y,m)>=0?(c!=null&&(c.trackChildChange(Ki(y.name,y.node)),c.trackChildChange(Ps(n,i))),p.updateImmediateChild(n,i).updateImmediateChild(y.name,fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ze}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ts}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Br}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ze}copy(){const e=new yd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $C(r){return r.loadsAllData()?new gd(r.getIndex()):r.hasLimit()?new UC(r):new Qi(r)}function Pm(r){const e={};if(r.isDefault())return e;let n;if(r.index_===Ze?n="$priority":r.index_===MC?n="$value":r.index_===Ss?n="$key":(H(r.index_ instanceof DC,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=lt(n),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=lt(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+lt(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=lt(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+lt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Rm(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==Ze&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends dy{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=l,this.log_=so("p:rest:"),this.listens_={}}listen(e,n,i,l){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const u=Fl.getListenId_(e,i),p={};this.listens_[u]=p;const m=Pm(e._queryParams);this.restRequest_(c+".json",m,(y,x)=>{let _=x;if(y===404&&(_=null,y=null),y===null&&this.onDataUpdate_(c,_,!1,i),ks(this.listens_,u)===p){let v;y?y===401?v="permission_denied":v="rest_error:"+y:v="ok",l(v,null)}})}unlisten(e,n){const i=Fl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Pm(e._queryParams),i=e._path.toString(),l=new to;return this.restRequest_(i+".json",n,(c,u)=>{let p=u;c===404&&(p=null,c=null),c===null?(this.onDataUpdate_(i,p,!1,null),l.resolve(p)):l.reject(new Error(p))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(n.auth=l.accessToken),c&&c.token&&(n.ac=c.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fs(n);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=Wi(p.responseText)}catch{bt("Failed to parse JSON response for "+u+": "+p.responseText)}i(null,m)}else p.status!==401&&p.status!==404&&bt("Got unsuccessful REST response for "+u+" Status: "+p.status),i(p.status);i=null}},p.open("GET",u,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(){return{value:null,children:new Map}}function wy(r,e,n){if(be(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const i=Ne(e);r.children.has(i)||r.children.set(i,Ul());const l=r.children.get(i);e=We(e),wy(l,e,n)}}function $u(r,e,n){r.value!==null?n(e,r.value):BC(r,(i,l)=>{const c=new $e(e.toString()+"/"+i);$u(l,c,n)})}function BC(r,e){r.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&yt(this.last_,(i,l)=>{n[i]=n[i]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=10*1e3,VC=30*1e3,HC=300*1e3;class GC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WC(e);const i=jm+(VC-jm)*Math.random();Di(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;yt(e,(l,c)=>{c>0&&_n(this.statsToReport_,l)&&(n[l]=c,i=!0)}),i&&this.server_.reportStats(n),Di(this.reportStats_.bind(this),Math.floor(Math.random()*2*HC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ln||(ln={}));function vd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _d(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xd(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ln.ACK_USER_WRITE,this.source=vd()}operationForChild(e){if(be(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $e(e));return new $l(De(),n,this.revert)}}else return H(Ne(this.path)===e,"operationForChild called for unrelated child."),new $l(We(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.source=e,this.path=n,this.type=ln.LISTEN_COMPLETE}operationForChild(e){return be(this.path)?new Yi(this.source,De()):new Yi(this.source,We(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ln.OVERWRITE}operationForChild(e){return be(this.path)?new Wr(this.source,De(),this.snap.getImmediateChild(e)):new Wr(this.source,We(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ln.MERGE}operationForChild(e){if(be(this.path)){const n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new Wr(this.source,De(),n.value):new Rs(this.source,De(),n)}else return H(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Rs(this.source,We(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qC(r,e,n,i){const l=[],c=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&c.push(FC(u.childName,u.snapshotNode))}),ji(r,l,"child_removed",e,i,n),ji(r,l,"child_added",e,i,n),ji(r,l,"child_moved",c,i,n),ji(r,l,"child_changed",e,i,n),ji(r,l,"value",e,i,n),l}function ji(r,e,n,i,l,c){const u=i.filter(p=>p.type===n);u.sort((p,m)=>YC(r,p,m)),u.forEach(p=>{const m=QC(r,p,c);l.forEach(y=>{y.respondsTo(p.type)&&e.push(y.createEvent(m,r.query_))})})}function QC(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function YC(r,e,n){if(e.childName==null||n.childName==null)throw Ls("Should only compare child_ events.");const i=new Ie(e.childName,e.snapshotNode),l=new Ie(n.childName,n.snapshotNode);return r.index_.compare(i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(r,e){return{eventCache:r,serverCache:e}}function Li(r,e,n,i){return aa(new vr(e,n,i),r.serverCache)}function Cy(r,e,n,i){return aa(r.eventCache,new vr(e,n,i))}function zl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Vr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu;const JC=()=>(Eu||(Eu=new Ft(D1)),Eu);class Be{static fromObject(e){let n=new Be(null);return yt(e,(i,l)=>{n=n.set(new $e(i),l)}),n}constructor(e,n=JC()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:De(),value:this.value};if(be(e))return null;{const i=Ne(e),l=this.children.get(i);if(l!==null){const c=l.findRootMostMatchingPathAndValue(We(e),n);return c!=null?{path:Xe(new $e(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{const n=Ne(e),i=this.children.get(n);return i!==null?i.subtree(We(e)):new Be(null)}}set(e,n){if(be(e))return new Be(n,this.children);{const i=Ne(e),c=(this.children.get(i)||new Be(null)).set(We(e),n),u=this.children.insert(i,c);return new Be(this.value,u)}}remove(e){if(be(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const n=Ne(e),i=this.children.get(n);if(i){const l=i.remove(We(e));let c;return l.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,l),this.value===null&&c.isEmpty()?new Be(null):new Be(this.value,c)}else return this}}get(e){if(be(e))return this.value;{const n=Ne(e),i=this.children.get(n);return i?i.get(We(e)):null}}setTree(e,n){if(be(e))return n;{const i=Ne(e),c=(this.children.get(i)||new Be(null)).setTree(We(e),n);let u;return c.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,c),new Be(this.value,u)}}fold(e){return this.fold_(De(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((l,c)=>{i[l]=c.fold_(Xe(e,l),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,De(),n)}findOnPath_(e,n,i){const l=this.value?i(n,this.value):!1;if(l)return l;if(be(e))return null;{const c=Ne(e),u=this.children.get(c);return u?u.findOnPath_(We(e),Xe(n,c),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,De(),n)}foreachOnPath_(e,n,i){if(be(e))return this;{this.value&&i(n,this.value);const l=Ne(e),c=this.children.get(l);return c?c.foreachOnPath_(We(e),Xe(n,l),i):new Be(null)}}foreach(e){this.foreach_(De(),e)}foreach_(e,n){this.children.inorderTraversal((i,l)=>{l.foreach_(Xe(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.writeTree_=e}static empty(){return new cn(new Be(null))}}function Mi(r,e,n){if(be(e))return new cn(new Be(n));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const l=i.path;let c=i.value;const u=kt(l,e);return c=c.updateChild(u,n),new cn(r.writeTree_.set(l,c))}else{const l=new Be(n),c=r.writeTree_.setTree(e,l);return new cn(c)}}}function zu(r,e,n){let i=r;return yt(n,(l,c)=>{i=Mi(i,Xe(e,l),c)}),i}function Am(r,e){if(be(e))return cn.empty();{const n=r.writeTree_.setTree(e,new Be(null));return new cn(n)}}function Bu(r,e){return qr(r,e)!=null}function qr(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(kt(n.path,e)):null}function Om(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ze,(i,l)=>{e.push(new Ie(i,l))}):r.writeTree_.children.inorderTraversal((i,l)=>{l.value!=null&&e.push(new Ie(i,l.value))}),e}function mr(r,e){if(be(e))return r;{const n=qr(r,e);return n!=null?new cn(new Be(n)):new cn(r.writeTree_.subtree(e))}}function Wu(r){return r.writeTree_.isEmpty()}function js(r,e){return Sy(De(),r.writeTree_,e)}function Sy(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((l,c)=>{l===".priority"?(H(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):n=Sy(Xe(r,l),c,n)}),!n.getChild(r).isEmpty()&&i!==null&&(n=n.updateChild(Xe(r,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(r,e){return ky(e,r)}function XC(r,e,n,i,l){H(i>r.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),r.allWrites.push({path:e,snap:n,writeId:i,visible:l}),l&&(r.visibleWrites=Mi(r.visibleWrites,e,n)),r.lastWriteId=i}function ZC(r,e,n,i){H(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:n,writeId:i,visible:!0}),r.visibleWrites=zu(r.visibleWrites,e,n),r.lastWriteId=i}function eS(r,e){for(let n=0;n<r.allWrites.length;n++){const i=r.allWrites[n];if(i.writeId===e)return i}return null}function tS(r,e){const n=r.allWrites.findIndex(p=>p.writeId===e);H(n>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[n];r.allWrites.splice(n,1);let l=i.visible,c=!1,u=r.allWrites.length-1;for(;l&&u>=0;){const p=r.allWrites[u];p.visible&&(u>=n&&nS(p,i.path)?l=!1:Yt(i.path,p.path)&&(c=!0)),u--}if(l){if(c)return rS(r),!0;if(i.snap)r.visibleWrites=Am(r.visibleWrites,i.path);else{const p=i.children;yt(p,m=>{r.visibleWrites=Am(r.visibleWrites,Xe(i.path,m))})}return!0}else return!1}function nS(r,e){if(r.snap)return Yt(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&Yt(Xe(r.path,n),e))return!0;return!1}function rS(r){r.visibleWrites=Ey(r.allWrites,sS,De()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function sS(r){return r.visible}function Ey(r,e,n){let i=cn.empty();for(let l=0;l<r.length;++l){const c=r[l];if(e(c)){const u=c.path;let p;if(c.snap)Yt(n,u)?(p=kt(n,u),i=Mi(i,p,c.snap)):Yt(u,n)&&(p=kt(u,n),i=Mi(i,De(),c.snap.getChild(p)));else if(c.children){if(Yt(n,u))p=kt(n,u),i=zu(i,p,c.children);else if(Yt(u,n))if(p=kt(u,n),be(p))i=zu(i,De(),c.children);else{const m=ks(c.children,Ne(p));if(m){const y=m.getChild(We(p));i=Mi(i,De(),y)}}}else throw Ls("WriteRecord should have .snap or .children")}}return i}function Ny(r,e,n,i,l){if(!i&&!l){const c=qr(r.visibleWrites,e);if(c!=null)return c;{const u=mr(r.visibleWrites,e);if(Wu(u))return n;if(n==null&&!Bu(u,De()))return null;{const p=n||fe.EMPTY_NODE;return js(u,p)}}}else{const c=mr(r.visibleWrites,e);if(!l&&Wu(c))return n;if(!l&&n==null&&!Bu(c,De()))return null;{const u=function(y){return(y.visible||l)&&(!i||!~i.indexOf(y.writeId))&&(Yt(y.path,e)||Yt(e,y.path))},p=Ey(r.allWrites,u,e),m=n||fe.EMPTY_NODE;return js(p,m)}}}function iS(r,e,n){let i=fe.EMPTY_NODE;const l=qr(r.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Ze,(c,u)=>{i=i.updateImmediateChild(c,u)}),i;if(n){const c=mr(r.visibleWrites,e);return n.forEachChild(Ze,(u,p)=>{const m=js(mr(c,new $e(u)),p);i=i.updateImmediateChild(u,m)}),Om(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const c=mr(r.visibleWrites,e);return Om(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function oS(r,e,n,i,l){H(i||l,"Either existingEventSnap or existingServerSnap must exist");const c=Xe(e,n);if(Bu(r.visibleWrites,c))return null;{const u=mr(r.visibleWrites,c);return Wu(u)?l.getChild(n):js(u,l.getChild(n))}}function lS(r,e,n,i){const l=Xe(e,n),c=qr(r.visibleWrites,l);if(c!=null)return c;if(i.isCompleteForChild(n)){const u=mr(r.visibleWrites,l);return js(u,i.getNode().getImmediateChild(n))}else return null}function aS(r,e){return qr(r.visibleWrites,e)}function cS(r,e,n,i,l,c,u){let p;const m=mr(r.visibleWrites,e),y=qr(m,De());if(y!=null)p=y;else if(n!=null)p=js(m,n);else return[];if(p=p.withIndex(u),!p.isEmpty()&&!p.isLeafNode()){const x=[],_=u.getCompare(),v=c?p.getReverseIteratorFrom(i,u):p.getIteratorFrom(i,u);let k=v.getNext();for(;k&&x.length<l;)_(k,i)!==0&&x.push(k),k=v.getNext();return x}else return[]}function uS(){return{visibleWrites:cn.empty(),allWrites:[],lastWriteId:-1}}function Bl(r,e,n,i){return Ny(r.writeTree,r.treePath,e,n,i)}function wd(r,e){return iS(r.writeTree,r.treePath,e)}function Dm(r,e,n,i){return oS(r.writeTree,r.treePath,e,n,i)}function Wl(r,e){return aS(r.writeTree,Xe(r.treePath,e))}function dS(r,e,n,i,l,c){return cS(r.writeTree,r.treePath,e,n,i,l,c)}function Cd(r,e,n){return lS(r.writeTree,r.treePath,e,n)}function Iy(r,e){return ky(Xe(r.treePath,e),r.writeTree)}function ky(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(i!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(i);if(l){const c=l.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(i,qi(i,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(i,Ki(i,l.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(i,Ps(i,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(i,qi(i,e.snapshotNode,l.oldSnap));else throw Ls("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const by=new fS;class Sd{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new vr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cd(this.writes_,e,i)}}getChildAfterChild(e,n,i){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vr(this.viewCache_),c=dS(this.writes_,l,n,1,i,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r){return{filter:r}}function mS(r,e){H(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),H(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function gS(r,e,n,i,l){const c=new hS;let u,p;if(n.type===ln.OVERWRITE){const y=n;y.source.fromUser?u=Vu(r,e,y.path,y.snap,i,l,c):(H(y.source.fromServer,"Unknown source."),p=y.source.tagged||e.serverCache.isFiltered()&&!be(y.path),u=Vl(r,e,y.path,y.snap,i,l,p,c))}else if(n.type===ln.MERGE){const y=n;y.source.fromUser?u=vS(r,e,y.path,y.children,i,l,c):(H(y.source.fromServer,"Unknown source."),p=y.source.tagged||e.serverCache.isFiltered(),u=Hu(r,e,y.path,y.children,i,l,p,c))}else if(n.type===ln.ACK_USER_WRITE){const y=n;y.revert?u=wS(r,e,y.path,i,l,c):u=_S(r,e,y.path,y.affectedTree,i,l,c)}else if(n.type===ln.LISTEN_COMPLETE)u=xS(r,e,n.path,i,c);else throw Ls("Unknown operation type: "+n.type);const m=c.getChanges();return yS(e,u,m),{viewCache:u,changes:m}}function yS(r,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const l=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=zl(r);(n.length>0||!r.eventCache.isFullyInitialized()||l&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&n.push(xy(zl(e)))}}function Ty(r,e,n,i,l,c){const u=e.eventCache;if(Wl(i,n)!=null)return e;{let p,m;if(be(n))if(H(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Vr(e),x=y instanceof fe?y:fe.EMPTY_NODE,_=wd(i,x);p=r.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const y=Bl(i,Vr(e));p=r.filter.updateFullNode(e.eventCache.getNode(),y,c)}else{const y=Ne(n);if(y===".priority"){H(yr(n)===1,"Can't have a priority with additional path components");const x=u.getNode();m=e.serverCache.getNode();const _=Dm(i,n,x,m);_!=null?p=r.filter.updatePriority(x,_):p=u.getNode()}else{const x=We(n);let _;if(u.isCompleteForChild(y)){m=e.serverCache.getNode();const v=Dm(i,n,u.getNode(),m);v!=null?_=u.getNode().getImmediateChild(y).updateChild(x,v):_=u.getNode().getImmediateChild(y)}else _=Cd(i,y,e.serverCache);_!=null?p=r.filter.updateChild(u.getNode(),y,_,x,l,c):p=u.getNode()}}return Li(e,p,u.isFullyInitialized()||be(n),r.filter.filtersNodes())}}function Vl(r,e,n,i,l,c,u,p){const m=e.serverCache;let y;const x=u?r.filter:r.filter.getIndexedFilter();if(be(n))y=x.updateFullNode(m.getNode(),i,null);else if(x.filtersNodes()&&!m.isFiltered()){const k=m.getNode().updateChild(n,i);y=x.updateFullNode(m.getNode(),k,null)}else{const k=Ne(n);if(!m.isCompleteForPath(n)&&yr(n)>1)return e;const D=We(n),P=m.getNode().getImmediateChild(k).updateChild(D,i);k===".priority"?y=x.updatePriority(m.getNode(),P):y=x.updateChild(m.getNode(),k,P,D,by,null)}const _=Cy(e,y,m.isFullyInitialized()||be(n),x.filtersNodes()),v=new Sd(l,_,c);return Ty(r,_,n,l,v,p)}function Vu(r,e,n,i,l,c,u){const p=e.eventCache;let m,y;const x=new Sd(l,e,c);if(be(n))y=r.filter.updateFullNode(e.eventCache.getNode(),i,u),m=Li(e,y,!0,r.filter.filtersNodes());else{const _=Ne(n);if(_===".priority")y=r.filter.updatePriority(e.eventCache.getNode(),i),m=Li(e,y,p.isFullyInitialized(),p.isFiltered());else{const v=We(n),k=p.getNode().getImmediateChild(_);let D;if(be(v))D=i;else{const z=x.getCompleteChild(_);z!=null?hd(v)===".priority"&&z.getChild(fy(v)).isEmpty()?D=z:D=z.updateChild(v,i):D=fe.EMPTY_NODE}if(k.equals(D))m=e;else{const z=r.filter.updateChild(p.getNode(),_,D,v,x,u);m=Li(e,z,p.isFullyInitialized(),r.filter.filtersNodes())}}}return m}function Lm(r,e){return r.eventCache.isCompleteForChild(e)}function vS(r,e,n,i,l,c,u){let p=e;return i.foreach((m,y)=>{const x=Xe(n,m);Lm(e,Ne(x))&&(p=Vu(r,p,x,y,l,c,u))}),i.foreach((m,y)=>{const x=Xe(n,m);Lm(e,Ne(x))||(p=Vu(r,p,x,y,l,c,u))}),p}function Mm(r,e,n){return n.foreach((i,l)=>{e=e.updateChild(i,l)}),e}function Hu(r,e,n,i,l,c,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,y;be(n)?y=i:y=new Be(null).setTree(n,i);const x=e.serverCache.getNode();return y.children.inorderTraversal((_,v)=>{if(x.hasChild(_)){const k=e.serverCache.getNode().getImmediateChild(_),D=Mm(r,k,v);m=Vl(r,m,new $e(_),D,l,c,u,p)}}),y.children.inorderTraversal((_,v)=>{const k=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!x.hasChild(_)&&!k){const D=e.serverCache.getNode().getImmediateChild(_),z=Mm(r,D,v);m=Vl(r,m,new $e(_),z,l,c,u,p)}}),m}function _S(r,e,n,i,l,c,u){if(Wl(l,n)!=null)return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(be(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return Vl(r,e,n,m.getNode().getChild(n),l,c,p,u);if(be(n)){let y=new Be(null);return m.getNode().forEachChild(Ss,(x,_)=>{y=y.set(new $e(x),_)}),Hu(r,e,n,y,l,c,p,u)}else return e}else{let y=new Be(null);return i.foreach((x,_)=>{const v=Xe(n,x);m.isCompleteForPath(v)&&(y=y.set(x,m.getNode().getChild(v)))}),Hu(r,e,n,y,l,c,p,u)}}function xS(r,e,n,i,l){const c=e.serverCache,u=Cy(e,c.getNode(),c.isFullyInitialized()||be(n),c.isFiltered());return Ty(r,u,n,i,by,l)}function wS(r,e,n,i,l,c){let u;if(Wl(i,n)!=null)return e;{const p=new Sd(i,e,l),m=e.eventCache.getNode();let y;if(be(n)||Ne(n)===".priority"){let x;if(e.serverCache.isFullyInitialized())x=Bl(i,Vr(e));else{const _=e.serverCache.getNode();H(_ instanceof fe,"serverChildren would be complete if leaf node"),x=wd(i,_)}x=x,y=r.filter.updateFullNode(m,x,c)}else{const x=Ne(n);let _=Cd(i,x,e.serverCache);_==null&&e.serverCache.isCompleteForChild(x)&&(_=m.getImmediateChild(x)),_!=null?y=r.filter.updateChild(m,x,_,We(n),p,c):e.eventCache.getNode().hasChild(x)?y=r.filter.updateChild(m,x,fe.EMPTY_NODE,We(n),p,c):y=m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Bl(i,Vr(e)),u.isLeafNode()&&(y=r.filter.updateFullNode(y,u,c)))}return u=e.serverCache.isFullyInitialized()||Wl(i,De())!=null,Li(e,y,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,l=new gd(i.getIndex()),c=$C(i);this.processor_=pS(c);const u=n.serverCache,p=n.eventCache,m=l.updateFullNode(fe.EMPTY_NODE,u.getNode(),null),y=c.updateFullNode(fe.EMPTY_NODE,p.getNode(),null),x=new vr(m,u.isFullyInitialized(),l.filtersNodes()),_=new vr(y,p.isFullyInitialized(),c.filtersNodes());this.viewCache_=aa(_,x),this.eventGenerator_=new KC(this.query_)}get query(){return this.query_}}function SS(r){return r.viewCache_.serverCache.getNode()}function ES(r){return zl(r.viewCache_)}function NS(r,e){const n=Vr(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(Ne(e)).isEmpty())?n.getChild(e):null}function Fm(r){return r.eventRegistrations_.length===0}function IS(r,e){r.eventRegistrations_.push(e)}function Um(r,e,n){const i=[];if(n){H(e==null,"A cancel should cancel all event registrations.");const l=r.query._path;r.eventRegistrations_.forEach(c=>{const u=c.createCancelEvent(n,l);u&&i.push(u)})}if(e){let l=[];for(let c=0;c<r.eventRegistrations_.length;++c){const u=r.eventRegistrations_[c];if(!u.matches(e))l.push(u);else if(e.hasAnyCallback()){l=l.concat(r.eventRegistrations_.slice(c+1));break}}r.eventRegistrations_=l}else r.eventRegistrations_=[];return i}function $m(r,e,n,i){e.type===ln.MERGE&&e.source.queryId!==null&&(H(Vr(r.viewCache_),"We should always have a full cache before handling merges"),H(zl(r.viewCache_),"Missing event cache, even though we have a server cache"));const l=r.viewCache_,c=gS(r.processor_,l,e,n,i);return mS(r.processor_,c.viewCache),H(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=c.viewCache,Py(r,c.changes,c.viewCache.eventCache.getNode(),null)}function kS(r,e){const n=r.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ze,(c,u)=>{i.push(Ps(c,u))}),n.isFullyInitialized()&&i.push(xy(n.getNode())),Py(r,i,n.getNode(),e)}function Py(r,e,n,i){const l=i?[i]:r.eventRegistrations_;return qC(r.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl;class Ry{constructor(){this.views=new Map}}function bS(r){H(!Hl,"__referenceConstructor has already been defined"),Hl=r}function TS(){return H(Hl,"Reference.ts has not been loaded"),Hl}function PS(r){return r.views.size===0}function Ed(r,e,n,i){const l=e.source.queryId;if(l!==null){const c=r.views.get(l);return H(c!=null,"SyncTree gave us an op for an invalid query."),$m(c,e,n,i)}else{let c=[];for(const u of r.views.values())c=c.concat($m(u,e,n,i));return c}}function jy(r,e,n,i,l){const c=e._queryIdentifier,u=r.views.get(c);if(!u){let p=Bl(n,l?i:null),m=!1;p?m=!0:i instanceof fe?(p=wd(n,i),m=!1):(p=fe.EMPTY_NODE,m=!1);const y=aa(new vr(p,m,!1),new vr(i,l,!1));return new CS(e,y)}return u}function RS(r,e,n,i,l,c){const u=jy(r,e,i,l,c);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),IS(u,n),kS(u,n)}function jS(r,e,n,i){const l=e._queryIdentifier,c=[];let u=[];const p=_r(r);if(l==="default")for(const[m,y]of r.views.entries())u=u.concat(Um(y,n,i)),Fm(y)&&(r.views.delete(m),y.query._queryParams.loadsAllData()||c.push(y.query));else{const m=r.views.get(l);m&&(u=u.concat(Um(m,n,i)),Fm(m)&&(r.views.delete(l),m.query._queryParams.loadsAllData()||c.push(m.query)))}return p&&!_r(r)&&c.push(new(TS())(e._repo,e._path)),{removed:c,events:u}}function Ay(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gr(r,e){let n=null;for(const i of r.views.values())n=n||NS(i,e);return n}function Oy(r,e){if(e._queryParams.loadsAllData())return ua(r);{const i=e._queryIdentifier;return r.views.get(i)}}function Dy(r,e){return Oy(r,e)!=null}function _r(r){return ua(r)!=null}function ua(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl;function AS(r){H(!Gl,"__referenceConstructor has already been defined"),Gl=r}function OS(){return H(Gl,"Reference.ts has not been loaded"),Gl}let DS=1;class zm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=uS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ly(r,e,n,i,l){return XC(r.pendingWriteTree_,e,n,i,l),l?zs(r,new Wr(vd(),e,n)):[]}function LS(r,e,n,i){ZC(r.pendingWriteTree_,e,n,i);const l=Be.fromObject(n);return zs(r,new Rs(vd(),e,l))}function dr(r,e,n=!1){const i=eS(r.pendingWriteTree_,e);if(tS(r.pendingWriteTree_,e)){let c=new Be(null);return i.snap!=null?c=c.set(De(),!0):yt(i.children,u=>{c=c.set(new $e(u),!0)}),zs(r,new $l(i.path,c,n))}else return[]}function oo(r,e,n){return zs(r,new Wr(_d(),e,n))}function MS(r,e,n){const i=Be.fromObject(n);return zs(r,new Rs(_d(),e,i))}function FS(r,e){return zs(r,new Yi(_d(),e))}function US(r,e,n){const i=Id(r,n);if(i){const l=kd(i),c=l.path,u=l.queryId,p=kt(c,e),m=new Yi(xd(u),p);return bd(r,c,m)}else return[]}function Kl(r,e,n,i,l=!1){const c=e._path,u=r.syncPointTree_.get(c);let p=[];if(u&&(e._queryIdentifier==="default"||Dy(u,e))){const m=jS(u,e,n,i);PS(u)&&(r.syncPointTree_=r.syncPointTree_.remove(c));const y=m.removed;if(p=m.events,!l){const x=y.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(c,(v,k)=>_r(k));if(x&&!_){const v=r.syncPointTree_.subtree(c);if(!v.isEmpty()){const k=BS(v);for(let D=0;D<k.length;++D){const z=k[D],P=z.query,G=$y(r,z);r.listenProvider_.startListening(Fi(P),Ji(r,P),G.hashFn,G.onComplete)}}}!_&&y.length>0&&!i&&(x?r.listenProvider_.stopListening(Fi(e),null):y.forEach(v=>{const k=r.queryToTagMap.get(da(v));r.listenProvider_.stopListening(Fi(v),k)}))}WS(r,y)}return p}function My(r,e,n,i){const l=Id(r,i);if(l!=null){const c=kd(l),u=c.path,p=c.queryId,m=kt(u,e),y=new Wr(xd(p),m,n);return bd(r,u,y)}else return[]}function $S(r,e,n,i){const l=Id(r,i);if(l){const c=kd(l),u=c.path,p=c.queryId,m=kt(u,e),y=Be.fromObject(n),x=new Rs(xd(p),m,y);return bd(r,u,x)}else return[]}function Gu(r,e,n,i=!1){const l=e._path;let c=null,u=!1;r.syncPointTree_.foreachOnPath(l,(v,k)=>{const D=kt(v,l);c=c||gr(k,D),u=u||_r(k)});let p=r.syncPointTree_.get(l);p?(u=u||_r(p),c=c||gr(p,De())):(p=new Ry,r.syncPointTree_=r.syncPointTree_.set(l,p));let m;c!=null?m=!0:(m=!1,c=fe.EMPTY_NODE,r.syncPointTree_.subtree(l).foreachChild((k,D)=>{const z=gr(D,De());z&&(c=c.updateImmediateChild(k,z))}));const y=Dy(p,e);if(!y&&!e._queryParams.loadsAllData()){const v=da(e);H(!r.queryToTagMap.has(v),"View does not exist, but we have a tag");const k=VS();r.queryToTagMap.set(v,k),r.tagToQueryMap.set(k,v)}const x=ca(r.pendingWriteTree_,l);let _=RS(p,e,n,x,c,m);if(!y&&!u&&!i){const v=Oy(p,e);_=_.concat(HS(r,e,v))}return _}function Nd(r,e,n){const l=r.pendingWriteTree_,c=r.syncPointTree_.findOnPath(e,(u,p)=>{const m=kt(u,e),y=gr(p,m);if(y)return y});return Ny(l,e,c,n,!0)}function zS(r,e){const n=e._path;let i=null;r.syncPointTree_.foreachOnPath(n,(y,x)=>{const _=kt(y,n);i=i||gr(x,_)});let l=r.syncPointTree_.get(n);l?i=i||gr(l,De()):(l=new Ry,r.syncPointTree_=r.syncPointTree_.set(n,l));const c=i!=null,u=c?new vr(i,!0,!1):null,p=ca(r.pendingWriteTree_,e._path),m=jy(l,e,p,c?u.getNode():fe.EMPTY_NODE,c);return ES(m)}function zs(r,e){return Fy(e,r.syncPointTree_,null,ca(r.pendingWriteTree_,De()))}function Fy(r,e,n,i){if(be(r.path))return Uy(r,e,n,i);{const l=e.get(De());n==null&&l!=null&&(n=gr(l,De()));let c=[];const u=Ne(r.path),p=r.operationForChild(u),m=e.children.get(u);if(m&&p){const y=n?n.getImmediateChild(u):null,x=Iy(i,u);c=c.concat(Fy(p,m,y,x))}return l&&(c=c.concat(Ed(l,r,i,n))),c}}function Uy(r,e,n,i){const l=e.get(De());n==null&&l!=null&&(n=gr(l,De()));let c=[];return e.children.inorderTraversal((u,p)=>{const m=n?n.getImmediateChild(u):null,y=Iy(i,u),x=r.operationForChild(u);x&&(c=c.concat(Uy(x,p,m,y)))}),l&&(c=c.concat(Ed(l,r,i,n))),c}function $y(r,e){const n=e.query,i=Ji(r,n);return{hashFn:()=>(SS(e)||fe.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return i?US(r,n._path,i):FS(r,n._path);{const c=F1(l,n);return Kl(r,n,null,c)}}}}function Ji(r,e){const n=da(e);return r.queryToTagMap.get(n)}function da(r){return r._path.toString()+"$"+r._queryIdentifier}function Id(r,e){return r.tagToQueryMap.get(e)}function kd(r){const e=r.indexOf("$");return H(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new $e(r.substr(0,e))}}function bd(r,e,n){const i=r.syncPointTree_.get(e);H(i,"Missing sync point for query tag that we're tracking");const l=ca(r.pendingWriteTree_,e);return Ed(i,n,l,null)}function BS(r){return r.fold((e,n,i)=>{if(n&&_r(n))return[ua(n)];{let l=[];return n&&(l=Ay(n)),yt(i,(c,u)=>{l=l.concat(u)}),l}})}function Fi(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(OS())(r._repo,r._path):r}function WS(r,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const l=da(i),c=r.queryToTagMap.get(l);r.queryToTagMap.delete(l),r.tagToQueryMap.delete(c)}}}function VS(){return DS++}function HS(r,e,n){const i=e._path,l=Ji(r,e),c=$y(r,n),u=r.listenProvider_.startListening(Fi(e),l,c.hashFn,c.onComplete),p=r.syncPointTree_.subtree(i);if(l)H(!_r(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((y,x,_)=>{if(!be(y)&&x&&_r(x))return[ua(x).query];{let v=[];return x&&(v=v.concat(Ay(x).map(k=>k.query))),yt(_,(k,D)=>{v=v.concat(D)}),v}});for(let y=0;y<m.length;++y){const x=m[y];r.listenProvider_.stopListening(Fi(x),Ji(r,x))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Td(n)}node(){return this.node_}}class Pd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Xe(this.path_,e);return new Pd(this.syncTree_,n)}node(){return Nd(this.syncTree_,this.path_)}}const GS=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Bm=function(r,e,n){if(!r||typeof r!="object")return r;if(H(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return KS(r[".sv"],e,n);if(typeof r[".sv"]=="object")return qS(r[".sv"],e);H(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},KS=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+r)}},qS=function(r,e,n){r.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&H(!1,"Unexpected increment value: "+i);const l=e.node();if(H(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return i;const u=l.getValue();return typeof u!="number"?i:u+i},zy=function(r,e,n,i){return Rd(e,new Pd(n,r),i)},By=function(r,e,n){return Rd(r,new Td(e),n)};function Rd(r,e,n){const i=r.getPriority().val(),l=Bm(i,e.getImmediateChild(".priority"),n);let c;if(r.isLeafNode()){const u=r,p=Bm(u.getValue(),e,n);return p!==u.getValue()||l!==u.getPriority().val()?new ht(p,ot(l)):r}else{const u=r;return c=u,l!==u.getPriority().val()&&(c=c.updatePriority(new ht(l))),u.forEachChild(Ze,(p,m)=>{const y=Rd(m,e.getImmediateChild(p),n);y!==m&&(c=c.updateImmediateChild(p,y))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Ad(r,e){let n=e instanceof $e?e:new $e(e),i=r,l=Ne(n);for(;l!==null;){const c=ks(i.node.children,l)||{children:{},childCount:0};i=new jd(l,i,c),n=We(n),l=Ne(n)}return i}function Bs(r){return r.node.value}function Wy(r,e){r.node.value=e,Ku(r)}function Vy(r){return r.node.childCount>0}function QS(r){return Bs(r)===void 0&&!Vy(r)}function ha(r,e){yt(r.node.children,(n,i)=>{e(new jd(n,r,i))})}function Hy(r,e,n,i){n&&e(r),ha(r,l=>{Hy(l,e,!0)})}function YS(r,e,n){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function lo(r){return new $e(r.parent===null?r.name:lo(r.parent)+"/"+r.name)}function Ku(r){r.parent!==null&&JS(r.parent,r.name,r)}function JS(r,e,n){const i=QS(n),l=_n(r.node.children,e);i&&l?(delete r.node.children[e],r.node.childCount--,Ku(r)):!i&&!l&&(r.node.children[e]=n.node,r.node.childCount++,Ku(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=/[\[\].#$\/\u0000-\u001F\u007F]/,ZS=/[\[\].#$\u0000-\u001F\u007F]/,Nu=10*1024*1024,Od=function(r){return typeof r=="string"&&r.length!==0&&!XS.test(r)},Gy=function(r){return typeof r=="string"&&r.length!==0&&!ZS.test(r)},eE=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Gy(r)},tE=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!ld(r)||r&&typeof r=="object"&&_n(r,".sv")},Ky=function(r,e,n,i){i&&e===void 0||fa(ia(r,"value"),e,n)},fa=function(r,e,n){const i=n instanceof $e?new vC(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+Lr(i));if(typeof e=="function")throw new Error(r+"contains a function "+Lr(i)+" with contents = "+e.toString());if(ld(e))throw new Error(r+"contains "+e.toString()+" "+Lr(i));if(typeof e=="string"&&e.length>Nu/3&&oa(e)>Nu)throw new Error(r+"contains a string greater than "+Nu+" utf8 bytes "+Lr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,c=!1;if(yt(e,(u,p)=>{if(u===".value")l=!0;else if(u!==".priority"&&u!==".sv"&&(c=!0,!Od(u)))throw new Error(r+" contains an invalid key ("+u+") "+Lr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_C(i,u),fa(r,p,i),xC(i)}),l&&c)throw new Error(r+' contains ".value" child '+Lr(i)+" in addition to actual children.")}},nE=function(r,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const c=Gi(i);for(let u=0;u<c.length;u++)if(!(c[u]===".priority"&&u===c.length-1)){if(!Od(c[u]))throw new Error(r+"contains an invalid key ("+c[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(yC);let l=null;for(n=0;n<e.length;n++){if(i=e[n],l!==null&&Yt(l,i))throw new Error(r+"contains a path "+l.toString()+" that is ancestor of another path "+i.toString());l=i}},rE=function(r,e,n,i){const l=ia(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const c=[];yt(e,(u,p)=>{const m=new $e(u);if(fa(l,p,Xe(n,m)),hd(m)===".priority"&&!tE(p))throw new Error(l+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(m)}),nE(l,c)},qy=function(r,e,n,i){if(!Gy(n))throw new Error(ia(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sE=function(r,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qy(r,e,n)},Qy=function(r,e){if(Ne(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},iE=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Od(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!eE(n))throw new Error(ia(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pa(r,e){let n=null;for(let i=0;i<e.length;i++){const l=e[i],c=l.getPath();n!==null&&!fd(c,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(l)}n&&r.eventLists_.push(n)}function Yy(r,e,n){pa(r,n),Jy(r,i=>fd(i,e))}function Jt(r,e,n){pa(r,n),Jy(r,i=>Yt(i,e)||Yt(e,i))}function Jy(r,e){r.recursionDepth_++;let n=!0;for(let i=0;i<r.eventLists_.length;i++){const l=r.eventLists_[i];if(l){const c=l.path;e(c)?(lE(r.eventLists_[i]),r.eventLists_[i]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function lE(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const i=n.getEventRunner();Oi&&gt("event: "+n.toString()),$s(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="repo_interrupt",cE=25;class uE{constructor(e,n,i,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ul(),this.transactionQueueTree_=new jd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dE(r,e,n){if(r.stats_=ud(r.repoInfo_),r.forceRestClient_||B1())r.server_=new Fl(r.repoInfo_,(i,l,c,u)=>{Wm(r,i,l,c,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Vm(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{lt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Rn(r.repoInfo_,e,(i,l,c,u)=>{Wm(r,i,l,c,u)},i=>{Vm(r,i)},i=>{hE(r,i)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=K1(r.repoInfo_,()=>new GC(r.stats_,r.server_)),r.infoData_=new zC,r.infoSyncTree_=new zm({startListening:(i,l,c,u)=>{let p=[];const m=r.infoData_.getNode(i._path);return m.isEmpty()||(p=oo(r.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),Dd(r,"connected",!1),r.serverSyncTree_=new zm({startListening:(i,l,c,u)=>(r.server_.listen(i,c,l,(p,m)=>{const y=u(p,m);Jt(r.eventQueue_,i._path,y)}),[]),stopListening:(i,l)=>{r.server_.unlisten(i,l)}})}function Xy(r){const n=r.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ma(r){return GS({timestamp:Xy(r)})}function Wm(r,e,n,i,l){r.dataUpdateCount++;const c=new $e(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let u=[];if(l)if(i){const m=Al(n,y=>ot(y));u=$S(r.serverSyncTree_,c,m,l)}else{const m=ot(n);u=My(r.serverSyncTree_,c,m,l)}else if(i){const m=Al(n,y=>ot(y));u=MS(r.serverSyncTree_,c,m)}else{const m=ot(n);u=oo(r.serverSyncTree_,c,m)}let p=c;u.length>0&&(p=As(r,c)),Jt(r.eventQueue_,p,u)}function Vm(r,e){Dd(r,"connected",e),e===!1&&gE(r)}function hE(r,e){yt(e,(n,i)=>{Dd(r,n,i)})}function Dd(r,e,n){const i=new $e("/.info/"+e),l=ot(n);r.infoData_.updateSnapshot(i,l);const c=oo(r.infoSyncTree_,i,l);Jt(r.eventQueue_,i,c)}function Ld(r){return r.nextWriteId_++}function fE(r,e,n){const i=zS(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(l=>{const c=ot(l).withIndex(e._queryParams.getIndex());Gu(r.serverSyncTree_,e,n,!0);let u;if(e._queryParams.loadsAllData())u=oo(r.serverSyncTree_,e._path,c);else{const p=Ji(r.serverSyncTree_,e);u=My(r.serverSyncTree_,e._path,c,p)}return Jt(r.eventQueue_,e._path,u),Kl(r.serverSyncTree_,e,n,null,!0),c},l=>(ao(r,"get for query "+lt(e)+" failed: "+l),Promise.reject(new Error(l))))}function pE(r,e,n,i,l){ao(r,"set",{path:e.toString(),value:n,priority:i});const c=ma(r),u=ot(n,i),p=Nd(r.serverSyncTree_,e),m=By(u,p,c),y=Ld(r),x=Ly(r.serverSyncTree_,e,m,y,!0);pa(r.eventQueue_,x),r.server_.put(e.toString(),u.val(!0),(v,k)=>{const D=v==="ok";D||bt("set at "+e+" failed: "+v);const z=dr(r.serverSyncTree_,y,!D);Jt(r.eventQueue_,e,z),qu(r,l,v,k)});const _=Fd(r,e);As(r,_),Jt(r.eventQueue_,_,[])}function mE(r,e,n,i){ao(r,"update",{path:e.toString(),value:n});let l=!0;const c=ma(r),u={};if(yt(n,(p,m)=>{l=!1,u[p]=zy(Xe(e,p),ot(m),r.serverSyncTree_,c)}),l)gt("update() called with empty data.  Don't do anything."),qu(r,i,"ok",void 0);else{const p=Ld(r),m=LS(r.serverSyncTree_,e,u,p);pa(r.eventQueue_,m),r.server_.merge(e.toString(),n,(y,x)=>{const _=y==="ok";_||bt("update at "+e+" failed: "+y);const v=dr(r.serverSyncTree_,p,!_),k=v.length>0?As(r,e):e;Jt(r.eventQueue_,k,v),qu(r,i,y,x)}),yt(n,y=>{const x=Fd(r,Xe(e,y));As(r,x)}),Jt(r.eventQueue_,e,[])}}function gE(r){ao(r,"onDisconnectEvents");const e=ma(r),n=Ul();$u(r.onDisconnect_,De(),(l,c)=>{const u=zy(l,c,r.serverSyncTree_,e);wy(n,l,u)});let i=[];$u(n,De(),(l,c)=>{i=i.concat(oo(r.serverSyncTree_,l,c));const u=Fd(r,l);As(r,u)}),r.onDisconnect_=Ul(),Jt(r.eventQueue_,De(),i)}function yE(r,e,n){let i;Ne(e._path)===".info"?i=Gu(r.infoSyncTree_,e,n):i=Gu(r.serverSyncTree_,e,n),Yy(r.eventQueue_,e._path,i)}function vE(r,e,n){let i;Ne(e._path)===".info"?i=Kl(r.infoSyncTree_,e,n):i=Kl(r.serverSyncTree_,e,n),Yy(r.eventQueue_,e._path,i)}function _E(r){r.persistentConnection_&&r.persistentConnection_.interrupt(aE)}function ao(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),gt(n,...e)}function qu(r,e,n,i){e&&$s(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let c=l;i&&(c+=": "+i);const u=new Error(c);u.code=l,e(u)}})}function Zy(r,e,n){return Nd(r.serverSyncTree_,e,n)||fe.EMPTY_NODE}function Md(r,e=r.transactionQueueTree_){if(e||ga(r,e),Bs(e)){const n=tv(r,e);H(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&xE(r,lo(e),n)}else Vy(e)&&ha(e,n=>{Md(r,n)})}function xE(r,e,n){const i=n.map(y=>y.currentWriteId),l=Zy(r,e,i);let c=l;const u=l.hash();for(let y=0;y<n.length;y++){const x=n[y];H(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const _=kt(e,x.path);c=c.updateChild(_,x.currentOutputSnapshotRaw)}const p=c.val(!0),m=e;r.server_.put(m.toString(),p,y=>{ao(r,"transaction put response",{path:m.toString(),status:y});let x=[];if(y==="ok"){const _=[];for(let v=0;v<n.length;v++)n[v].status=2,x=x.concat(dr(r.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&_.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();ga(r,Ad(r.transactionQueueTree_,e)),Md(r,r.transactionQueueTree_),Jt(r.eventQueue_,e,x);for(let v=0;v<_.length;v++)$s(_[v])}else{if(y==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{bt("transaction at "+m.toString()+" failed: "+y);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=y}As(r,e)}},u)}function As(r,e){const n=ev(r,e),i=lo(n),l=tv(r,n);return wE(r,l,i),i}function wE(r,e,n){if(e.length===0)return;const i=[];let l=[];const u=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],y=kt(n,m.path);let x=!1,_;if(H(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)x=!0,_=m.abortReason,l=l.concat(dr(r.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=cE)x=!0,_="maxretry",l=l.concat(dr(r.serverSyncTree_,m.currentWriteId,!0));else{const v=Zy(r,m.path,u);m.currentInputSnapshot=v;const k=e[p].update(v.val());if(k!==void 0){fa("transaction failed: Data returned ",k,m.path);let D=ot(k);typeof k=="object"&&k!=null&&_n(k,".priority")||(D=D.updatePriority(v.getPriority()));const P=m.currentWriteId,G=ma(r),Y=By(D,v,G);m.currentOutputSnapshotRaw=D,m.currentOutputSnapshotResolved=Y,m.currentWriteId=Ld(r),u.splice(u.indexOf(P),1),l=l.concat(Ly(r.serverSyncTree_,m.path,Y,m.currentWriteId,m.applyLocally)),l=l.concat(dr(r.serverSyncTree_,P,!0))}else x=!0,_="nodata",l=l.concat(dr(r.serverSyncTree_,m.currentWriteId,!0))}Jt(r.eventQueue_,n,l),l=[],x&&(e[p].status=2,function(v){setTimeout(v,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(_),!1,null))))}ga(r,r.transactionQueueTree_);for(let p=0;p<i.length;p++)$s(i[p]);Md(r,r.transactionQueueTree_)}function ev(r,e){let n,i=r.transactionQueueTree_;for(n=Ne(e);n!==null&&Bs(i)===void 0;)i=Ad(i,n),e=We(e),n=Ne(e);return i}function tv(r,e){const n=[];return nv(r,e,n),n.sort((i,l)=>i.order-l.order),n}function nv(r,e,n){const i=Bs(e);if(i)for(let l=0;l<i.length;l++)n.push(i[l]);ha(e,l=>{nv(r,l,n)})}function ga(r,e){const n=Bs(e);if(n){let i=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[i]=n[l],i++);n.length=i,Wy(e,n.length>0?n:void 0)}ha(e,i=>{ga(r,i)})}function Fd(r,e){const n=lo(ev(r,e)),i=Ad(r.transactionQueueTree_,e);return YS(i,l=>{Iu(r,l)}),Iu(r,i),Hy(i,l=>{Iu(r,l)}),n}function Iu(r,e){const n=Bs(e);if(n){const i=[];let l=[],c=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(H(c===u-1,"All SENT items should be at beginning of queue."),c=u,n[u].status=3,n[u].abortReason="set"):(H(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),l=l.concat(dr(r.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&i.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Wy(e,void 0):n.length=c+1,Jt(r.eventQueue_,lo(e),l);for(let u=0;u<i.length;u++)$s(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r){let e="";const n=r.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let l=n[i];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function SE(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bt(`Invalid query segment '${n}' in query '${r}'`)}return e}const Hm=function(r,e){const n=EE(r),i=n.namespace;n.domain==="firebase.com"&&An(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&An("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||A1();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new sy(n.host,n.secure,i,l,e,"",i!==n.subdomain),path:new $e(n.pathString)}},EE=function(r){let e="",n="",i="",l="",c="",u=!0,p="https",m=443;if(typeof r=="string"){let y=r.indexOf("//");y>=0&&(p=r.substring(0,y-1),r=r.substring(y+2));let x=r.indexOf("/");x===-1&&(x=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(x,_)),x<_&&(l=CE(r.substring(x,_)));const v=SE(r.substring(Math.min(r.length,_)));y=e.indexOf(":"),y>=0?(u=p==="https"||p==="wss",m=parseInt(e.substring(y+1),10)):y=e.length;const k=e.slice(0,y);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const D=e.indexOf(".");i=e.substring(0,D).toLowerCase(),n=e.substring(D+1),c=i}"ns"in v&&(c=v.ns)}return{host:e,port:m,domain:n,subdomain:i,secure:u,scheme:p,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NE=function(){let r=0;const e=[];return function(n){const i=n===r;r=n;let l;const c=new Array(8);for(l=7;l>=0;l--)c[l]=Gm.charAt(n%64),n=Math.floor(n/64);H(n===0,"Cannot push at time == 0");let u=c.join("");if(i){for(l=11;l>=0&&e[l]===63;l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)u+=Gm.charAt(e[l]);return H(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,i,l){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+lt(this.snapshot.exportVal())}}class kE{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,i,l){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=l}get key(){return be(this._path)?null:hd(this._path)}get ref(){return new Ln(this._repo,this._path)}get _queryIdentifier(){const e=Rm(this._queryParams),n=ad(e);return n==="{}"?"default":n}get _queryObject(){return Rm(this._queryParams)}isEqual(e){if(e=Wt(e),!(e instanceof Ud))return!1;const n=this._repo===e._repo,i=fd(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&i&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+gC(this._path)}}class Ln extends Ud{constructor(e,n){super(e,n,new yd,!1)}get parent(){const e=fy(this._path);return e===null?null:new Ln(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xi{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new $e(e),i=Zi(this.ref,e);return new Xi(this._node.getChild(n),i,Ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,l)=>e(new Xi(l,Zi(this.ref,i),Ze)))}hasChild(e){const n=new $e(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function St(r,e){return r=Wt(r),r._checkNotDeleted("ref"),e!==void 0?Zi(r._root,e):r._root}function Zi(r,e){return r=Wt(r),Ne(r._path)===null?sE("child","path",e):qy("child","path",e),new Ln(r._repo,Xe(r._path,e))}function Km(r,e){r=Wt(r),Qy("push",r._path),Ky("push",e,r._path,!0);const n=Xy(r._repo),i=NE(n),l=Zi(r,i),c=Zi(r,i);let u;return u=Promise.resolve(c),l.then=u.then.bind(u),l.catch=u.then.bind(u,void 0),l}function qm(r,e){r=Wt(r),Qy("set",r._path),Ky("set",e,r._path,!1);const n=new to;return pE(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function nr(r,e){rE("update",e,r._path);const n=new to;return mE(r._repo,r._path,e,n.wrapCallback(()=>{})),n.promise}function rr(r){r=Wt(r);const e=new rv(()=>{}),n=new ya(e);return fE(r._repo,r,n).then(i=>new Xi(i,new Ln(r._repo,r._path),r._queryParams.getIndex()))}class ya{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new IE("value",this,new Xi(e.snapshotNode,new Ln(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kE(this,e,n):null}matches(e){return e instanceof ya?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function bE(r,e,n,i,l){const c=new rv(n,void 0),u=new ya(c);return yE(r._repo,r,u),()=>vE(r._repo,r,u)}function Qm(r,e,n,i){return bE(r,"value",e)}bS(Ln);AS(Ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="FIREBASE_DATABASE_EMULATOR_HOST",Qu={};let PE=!1;function RE(r,e,n,i){const l=e.lastIndexOf(":"),c=e.substring(0,l),u=Ms(c);r.repoInfo_=new sy(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(r.authTokenProvider_=i)}function jE(r,e,n,i,l){let c=i||r.options.databaseURL;c===void 0&&(r.options.projectId||An("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",r.options.projectId),c=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=Hm(c,l),p=u.repoInfo,m;typeof process<"u"&&fm&&(m=fm[TE]),m?(c=`http://${m}?ns=${p.namespace}`,u=Hm(c,l),p=u.repoInfo):u.repoInfo.secure;const y=new V1(r.name,r.options,e);iE("Invalid Firebase Database URL",u),be(u.path)||An("Database URL must point to the root of a Firebase Database (not including a child path).");const x=OE(p,r,y,new W1(r,n));return new DE(x,r)}function AE(r,e){const n=Qu[e];(!n||n[r.key]!==r)&&An(`Database ${e}(${r.repoInfo_}) has already been deleted.`),_E(r),delete n[r.key]}function OE(r,e,n,i){let l=Qu[e.name];l||(l={},Qu[e.name]=l);let c=l[r.toURLString()];return c&&An("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new uE(r,PE,n,i),l[r.toURLString()]=c,c}class DE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ln(this._repo,De())),this._rootInternal}_delete(){return this._rootInternal!==null&&(AE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&An("Cannot call "+e+" on a deleted database.")}}function LE(r=zg(),e){const n=od(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Jx("database");i&&ME(n,...i)}return n}function ME(r,e,n,i={}){r=Wt(r),r._checkNotDeleted("useEmulator");const l=`${e}:${n}`,c=r._repoInternal;if(r._instanceStarted){if(l===r._repoInternal.repoInfo_.host&&$r(i,c.repoInfo_.emulatorOptions))return;An("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(c.repoInfo_.nodeAdmin)i.mockUserToken&&An('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Il(Il.OWNER);else if(i.mockUserToken){const p=typeof i.mockUserToken=="string"?i.mockUserToken:Xx(i.mockUserToken,r.app.options.projectId);u=new Il(p)}Ms(e)&&(Og(e),Dg("Database",!0)),RE(c,l,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(r){k1(Us),bs(new zr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return jE(i,l,c,n)},"PUBLIC").setMultipleInstances(!0)),pr(pm,mm,r),pr(pm,mm,"esm2020")}Rn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Rn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};FE();function sv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UE=sv,iv=new no("auth","Firebase",sv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new sd("@firebase/auth");function $E(r,...e){ql.logLevel<=Ue.WARN&&ql.warn(`Auth (${Us}): ${r}`,...e)}function kl(r,...e){ql.logLevel<=Ue.ERROR&&ql.error(`Auth (${Us}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(r,...e){throw $d(r,...e)}function gn(r,...e){return $d(r,...e)}function ov(r,e,n){const i={...UE(),[e]:n};return new no("auth","Firebase",i).create(e,{appName:r.name})}function Ur(r){return ov(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $d(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return iv.create(r,...e)}function ye(r,e,...n){if(!r)throw $d(e,...n)}function Tn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw kl(e),new Error(e)}function Dn(r,e){r||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(){return typeof self<"u"&&self.location?.href||""}function zE(){return Ym()==="http:"||Ym()==="https:"}function Ym(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zE()||nw()||"connection"in navigator)?navigator.onLine:!0}function WE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dn(n>e,"Short delay should be less than long delay!"),this.isMobile=rd()||Lg()}get(){return BE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(r,e){Dn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GE=new co(3e4,6e4);function Bd(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ws(r,e,n,i,l={}){return av(r,l,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const p=Fs({key:r.config.apiKey,...u}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:m,...c};return tw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ms(r.emulatorConfig.host)&&(y.credentials="include"),lv.fetch()(await cv(r,r.config.apiHost,n,p),y)})}async function av(r,e,n){r._canInitEmulator=!1;const i={...VE,...e};try{const l=new qE(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Nl(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const p=c.ok?u.errorMessage:u.error.message,[m,y]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Nl(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw Nl(r,"user-disabled",u);const x=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ov(r,x,y);On(r,x)}}catch(l){if(l instanceof xr)throw l;On(r,"network-request-failed",{message:String(l)})}}async function KE(r,e,n,i,l={}){const c=await Ws(r,e,n,i,l);return"mfaPendingCredential"in c&&On(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function cv(r,e,n,i){const l=`${e}${n}?${i}`,c=r,u=c.config.emulator?zd(r.config,l):`${r.config.apiScheme}://${l}`;return HE.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class qE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(gn(this.auth,"network-request-failed")),GE.get())})}}function Nl(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=gn(r,e,i);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(r,e){return Ws(r,"POST","/v1/accounts:delete",e)}async function Ql(r,e){return Ws(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YE(r,e=!1){const n=Wt(r),i=await n.getIdToken(e),l=Wd(i);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,u=c?.sign_in_provider;return{claims:l,token:i,authTime:Ui(ku(l.auth_time)),issuedAtTime:Ui(ku(l.iat)),expirationTime:Ui(ku(l.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ku(r){return Number(r)*1e3}function Wd(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return kl("JWT malformed, contained fewer than 3 sections"),null;try{const l=jl(n);return l?JSON.parse(l):(kl("Failed to decode base64 JWT payload"),null)}catch(l){return kl("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Jm(r){const e=Wd(r);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof xr&&JE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function JE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(r){const e=r.auth,n=await r.getIdToken(),i=await eo(r,Ql(e,{idToken:n}));ye(i?.users.length,e,"internal-error");const l=i.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?uv(l.providerUserInfo):[],u=eN(r.providerData,c),p=r.isAnonymous,m=!(r.email&&l.passwordHash)&&!u?.length,y=p?m:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Ju(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,x)}async function ZE(r){const e=Wt(r);await Yl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eN(r,e){return[...r.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function uv(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){const n=await av(r,{},async()=>{const i=Fs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,u=await cv(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return r.emulatorConfig&&Ms(r.emulatorConfig.host)&&(m.credentials="include"),lv.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nN(r,e){return Ws(r,"POST","/v2/accounts:revokeToken",Bd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Jm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await tN(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,u=new Es;return i&&(ye(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),l&&(ye(typeof l=="string","internal-error",{appName:e}),u.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(r,e){ye(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class an{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new XE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ju(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YE(this,e)}reload(){return ZE(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await eo(this,QE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:_,emailVerified:v,isAnonymous:k,providerData:D,stsTokenManager:z}=n;ye(_&&z,e,"internal-error");const P=Es.fromJSON(this.name,z);ye(typeof _=="string",e,"internal-error"),sr(i,e.name),sr(l,e.name),ye(typeof v=="boolean",e,"internal-error"),ye(typeof k=="boolean",e,"internal-error"),sr(c,e.name),sr(u,e.name),sr(p,e.name),sr(m,e.name),sr(y,e.name),sr(x,e.name);const G=new an({uid:_,auth:e,email:l,emailVerified:v,displayName:i,isAnonymous:k,photoURL:u,phoneNumber:c,tenantId:p,stsTokenManager:P,createdAt:y,lastLoginAt:x});return D&&Array.isArray(D)&&(G.providerData=D.map(Y=>({...Y}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(e,n,i=!1){const l=new Es;l.updateFromServerResponse(n);const c=new an({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Yl(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?uv(l.providerUserInfo):[],u=!(l.email&&l.passwordHash)&&!c?.length,p=new Es;p.updateFromIdToken(i);const m=new an({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Ju(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new Map;function Pn(r){Dn(r instanceof Function,"Expected a class definition");let e=Xm.get(r);return e?(Dn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Xm.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dv.type="NONE";const Zm=dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(r,e,n){return`firebase:${r}:${e}:${n}`}class Ns{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=bl(this.userKey,l.apiKey,c),this.fullPersistenceKey=bl("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ql(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ns(Pn(Zm),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Pn(Zm);const u=bl(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(u);if(x){let _;if(typeof x=="string"){const v=await Ql(e,{idToken:x}).catch(()=>{});if(!v)break;_=await an._fromGetAccountInfoResponse(e,v,x)}else _=an._fromJSON(e,x);y!==c&&(p=_),c=y;break}}catch{}const m=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Ns(c,e,i):(c=m[0],p&&await c._set(u,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new Ns(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yv(e))return"Blackberry";if(vv(e))return"Webos";if(fv(e))return"Safari";if((e.includes("chrome/")||pv(e))&&!e.includes("edge/"))return"Chrome";if(gv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function hv(r=Tt()){return/firefox\//i.test(r)}function fv(r=Tt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pv(r=Tt()){return/crios\//i.test(r)}function mv(r=Tt()){return/iemobile/i.test(r)}function gv(r=Tt()){return/android/i.test(r)}function yv(r=Tt()){return/blackberry/i.test(r)}function vv(r=Tt()){return/webos/i.test(r)}function Vd(r=Tt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rN(r=Tt()){return Vd(r)&&!!window.navigator?.standalone}function sN(){return rw()&&document.documentMode===10}function _v(r=Tt()){return Vd(r)||gv(r)||vv(r)||yv(r)||/windows phone/i.test(r)||mv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(r,e=[]){let n;switch(r){case"Browser":n=eg(Tt());break;case"Worker":n=`${eg(Tt())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Us}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((u,p)=>{try{const m=e(c);u(m)}catch(m){p(m)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(r,e={}){return Ws(r,"GET","/v2/passwordPolicy",Bd(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=6;class aN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tg(this),this.idTokenSubscription=new tg(this),this.beforeStateQueue=new iN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ql(this,{idToken:e}),i=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===u)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Ur(this));const n=e?Wt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oN(this),n=new aN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await nN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,l);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$E(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Hd(r){return Wt(r)}class tg{constructor(e){this.auth=e,this.observer=null,this.addObserver=fw(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uN(r){Gd=r}function dN(r){return Gd.loadJS(r)}function hN(){return Gd.gapiScript}function fN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r,e){const n=od(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if($r(c,e??{}))return l;On(l,"already-initialized")}return n.initialize({options:e})}function mN(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Pn);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function gN(r,e,n){const i=Hd(r);ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=wv(e),{host:u,port:p}=yN(e),m=p===null?"":`:${p}`,y={url:`${c}//${u}${m}/`},x=Object.freeze({host:u,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ye($r(y,i.config.emulator)&&$r(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Ms(u)?(Og(`${c}//${u}${m}`),Dg("Auth",!0)):vN()}function wv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function yN(r){const e=wv(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:ng(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:ng(u)}}}function ng(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vN(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(r,e){return KE(r,"POST","/v1/accounts:signInWithIdp",Bd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="http://localhost";class Hr extends Cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const u=new Hr(i,l);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Is(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Is(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Is(e,n)}buildRequest(){const e={requestUri:_N,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Sv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends uo{constructor(){super("facebook.com")}static credential(e){return Hr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends uo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends uo{constructor(){super("github.com")}static credential(e){return Hr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends uo{constructor(){super("twitter.com")}static credential(e,n){return Hr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return cr.credential(n,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await an._fromIdTokenResponse(e,i,l),u=rg(i);return new Os({user:c,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=rg(i);return new Os({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function rg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends xr{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Jl(e,n,i,l)}}function Ev(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jl._fromErrorAndOperation(r,c,e,i):c})}async function xN(r,e,n=!1){const i=await eo(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Os._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e,n=!1){const{auth:i}=r;if(mn(i.app))return Promise.reject(Ur(i));const l="reauthenticate";try{const c=await eo(r,Ev(i,l,e,r),n);ye(c.idToken,i,"internal-error");const u=Wd(c.idToken);ye(u,i,"internal-error");const{sub:p}=u;return ye(r.uid===p,i,"user-mismatch"),Os._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&On(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r,e,n=!1){if(mn(r.app))return Promise.reject(Ur(r));const i="signIn",l=await Ev(r,i,e),c=await Os._fromIdTokenResponse(r,i,l);return n||await r._updateCurrentUser(c.user),c}function SN(r,e,n,i){return Wt(r).onIdTokenChanged(e,n,i)}function EN(r,e,n){return Wt(r).beforeAuthStateChanged(e,n)}const Xl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xl,"1"),this.storage.removeItem(Xl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=1e3,IN=10;class Iv extends Nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_v(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,p,m)=>{this.notifyListeners(u,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);sN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,IN):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},NN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iv.type="LOCAL";const kN=Iv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kv.type="SESSION";const bv=kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new va(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,u=this.handlersMap[l];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(u).map(async y=>y(n.origin,c)),m=await bN(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}va.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,u;return new Promise((p,m)=>{const y=Kd("",20);l.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:l,onMessage(_){const v=_;if(v.data.eventId===y)switch(v.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(v.data.response);break;default:clearTimeout(x),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),l.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function PN(r){yn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function RN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){return navigator?.serviceWorker?.controller||null}function AN(){return Tv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="firebaseLocalStorageDb",ON=1,Zl="firebaseLocalStorage",Rv="fbase_key";class ho{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _a(r,e){return r.transaction([Zl],e?"readwrite":"readonly").objectStore(Zl)}function DN(){const r=indexedDB.deleteDatabase(Pv);return new ho(r).toPromise()}function Xu(){const r=indexedDB.open(Pv,ON);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Zl,{keyPath:Rv})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Zl)?e(i):(i.close(),await DN(),e(await Xu()))})})}async function sg(r,e,n){const i=_a(r,!0).put({[Rv]:e,value:n});return new ho(i).toPromise()}async function LN(r,e){const n=_a(r,!1).get(e),i=await new ho(n).toPromise();return i===void 0?null:i.value}function ig(r,e){const n=_a(r,!0).delete(e);return new ho(n).toPromise()}const MN=800,FN=3;class jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>FN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=va._getInstance(AN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await RN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xu();return await sg(e,Xl,"1"),await ig(e,Xl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>LN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ig(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=_a(l,!1).getAll();return new ho(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jv.type="LOCAL";const UN=jv;new co(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(r,e){return e?Pn(e):(ye(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Is(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Is(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Is(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zN(r){return CN(r.auth,new qd(r),r.bypassAuthState)}function BN(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),wN(n,new qd(r),r.bypassAuthState)}async function WN(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),xN(n,new qd(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:u,type:p}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zN;case"linkViaPopup":case"linkViaRedirect":return WN;case"reauthViaPopup":case"reauthViaRedirect":return BN;default:On(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new co(2e3,1e4);class ws extends Av{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Dn(this.filter.length===1,"Popup operations only handle one event");const e=Kd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VN.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="pendingRedirect",Tl=new Map;class GN extends Av{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Tl.get(this.auth._key());if(!e){try{const i=await KN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Tl.set(this.auth._key(),e)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KN(r,e){const n=YN(e),i=QN(r);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function qN(r,e){Tl.set(r._key(),e)}function QN(r){return Pn(r._redirectPersistence)}function YN(r){return bl(HN,r.config.apiKey,r.name)}async function JN(r,e,n=!1){if(mn(r.app))return Promise.reject(Ur(r));const i=Hd(r),l=$N(i,e),u=await new GN(i,l,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=600*1e3;class ZN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ov(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XN&&this.cachedEventUids.clear(),this.cachedEventUids.has(og(e))}saveEventToCache(e){this.cachedEventUids.add(og(e)),this.lastProcessedEventTime=Date.now()}}function og(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ov({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function eI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ov(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(r,e={}){return Ws(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rI=/^https?/;async function sI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await tI(r);for(const n of e)try{if(iI(n))return}catch{}On(r,"unauthorized-domain")}function iI(r){const e=Yu(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!rI.test(n))return!1;if(nI.test(r))return i===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new co(3e4,6e4);function lg(){const r=yn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function lI(r){return new Promise((e,n)=>{function i(){lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lg(),n(gn(r,"network-request-failed"))},timeout:oI.get()})}if(yn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yn().gapi?.load)i();else{const l=fN("iframefcb");return yn()[l]=()=>{gapi.load?i():n(gn(r,"network-request-failed"))},dN(`${hN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function aI(r){return Pl=Pl||lI(r),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new co(5e3,15e3),uI="__/auth/iframe",dI="emulator/auth/iframe",hI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pI(r){const e=r.config;ye(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?zd(e,dI):`https://${r.config.authDomain}/${uI}`,i={apiKey:e.apiKey,appName:r.name,v:Us},l=fI.get(r.config.apiHost);l&&(i.eid=l);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Fs(i).slice(1)}`}async function mI(r){const e=await aI(r),n=yn().gapi;return ye(n,r,"internal-error"),e.open({where:document.body,url:pI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hI,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const u=gn(r,"network-request-failed"),p=yn().setTimeout(()=>{c(u)},cI.get());function m(){yn().clearTimeout(p),l(i)}i.ping(m).then(m,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI=500,vI=600,_I="_blank",xI="http://localhost";class ag{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wI(r,e,n,i=yI,l=vI){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m={...gI,width:i.toString(),height:l.toString(),top:c,left:u},y=Tt().toLowerCase();n&&(p=pv(y)?_I:n),hv(y)&&(e=e||xI,m.scrollbars="yes");const x=Object.entries(m).reduce((v,[k,D])=>`${v}${k}=${D},`,"");if(rN(y)&&p!=="_self")return CI(e||"",p),new ag(null);const _=window.open(e||"",p,x);ye(_,r,"popup-blocked");try{_.focus()}catch{}return new ag(_)}function CI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="__/auth/handler",EI="emulator/auth/handler",NI=encodeURIComponent("fac");async function cg(r,e,n,i,l,c){ye(r.config.authDomain,r,"auth-domain-config-required"),ye(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Us,eventId:l};if(e instanceof Sv){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Ru(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))u[x]=_}if(e instanceof uo){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(u.scopes=x.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const m=await r._getAppCheckToken(),y=m?`#${NI}=${encodeURIComponent(m)}`:"";return`${II(r)}?${Fs(p).slice(1)}${y}`}function II({config:r}){return r.emulator?zd(r,EI):`https://${r.authDomain}/${SI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu="webStorageSupport";class kI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bv,this._completeRedirectFn=JN,this._overrideRedirectResult=qN}async _openPopup(e,n,i,l){Dn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await cg(e,n,i,Yu(),l);return wI(e,c,Kd())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await cg(e,n,i,Yu(),l);return PN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Dn(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mI(e),i=new ZN(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bu,{type:bu},l=>{const c=l?.[0]?.[bu];c!==void 0&&n(!!c),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _v()||fv()||Vd()}}const bI=kI;var ug="@firebase/auth",dg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RI(r){bs(new zr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;ye(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xv(r)},y=new cN(i,l,c,m);return mN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),bs(new zr("auth-internal",e=>{const n=Hd(e.getProvider("auth").getImmediate());return(i=>new TI(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(ug,dg,PI(r)),pr(ug,dg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=300,AI=Ag("authIdTokenMaxAge")||jI;let hg=null;const OI=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>AI)return;const l=n?.token;hg!==l&&(hg=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function DI(r=zg()){const e=od(r,"auth");if(e.isInitialized())return e.getImmediate();const n=pN(r,{popupRedirectResolver:bI,persistence:[UN,kN,bv]}),i=Ag("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=OI(c.toString());EN(n,u,()=>u(n.currentUser)),SN(n,p=>u(p))}}const l=Rg("auth");return l&&gN(n,`http://${l}`),n}function LI(){return document.getElementsByTagName("head")?.[0]??document}uN({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=l=>{const c=gn("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",LI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RI("Browser");const MI={apiKey:"AIzaSyBk7mlUbypMT4rsq4gLquiBSCdVyIEGiB8",authDomain:"finder-webapp.firebaseapp.com",databaseURL:"https://finder-webapp-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"finder-webapp",storageBucket:"finder-webapp.firebasestorage.app",messagingSenderId:"944048700192",appId:"1:944048700192:web:e7a686da117c216404b545"},Dv=$g(MI),Et=LE(Dv);DI(Dv);class $i{static async getAllEmployees(){try{const e=St(Et,"employees"),n=await rr(e);if(n.exists()){const i=n.val();return Object.keys(i).map(l=>({id:l,...i[l]}))}return[]}catch(e){throw console.error("Error fetching employees:",e),e}}static async createEmployee(e){try{const n=St(Et,"employees"),i=Km(n);return await qm(i,{...e,createdAt:Date.now(),updatedAt:Date.now()}),i.key}catch(n){throw console.error("Error creating employee:",n),n}}static async updateEmployee(e,n){try{const i=St(Et,`employees/${e}`);return await nr(i,{...n,updatedAt:Date.now()}),!0}catch(i){throw console.error("Error updating employee:",i),i}}static async getEmployeeByEmail(e){try{const n=St(Et,"employees"),i=await rr(n);if(i.exists()){const l=i.val();for(const c in l)if(l[c].email===e)return{id:c,...l[c]}}return null}catch(n){throw console.error("Error fetching employee by email:",n),n}}static async getAllOpportunities(){try{const e=St(Et,"opportunities"),n=await rr(e);if(n.exists()){const i=n.val();return Object.keys(i).map(l=>({id:l,...i[l]}))}return[]}catch(e){throw console.error("Error fetching opportunities:",e),e}}static async createOpportunity(e){try{const n=St(Et,"opportunities"),i=Km(n);return await qm(i,{...e,status:"open",applied:[],not_interested:[],application_statuses:{},createdAt:Date.now(),updatedAt:Date.now()}),i.key}catch(n){throw console.error("Error creating opportunity:",n),n}}static async getOpportunityById(e){try{const n=St(Et,`opportunities/${e}`),i=await rr(n);return i.exists()?{id:e,...i.val()}:null}catch(n){throw console.error("Error fetching opportunity:",n),n}}static async updateOpportunity(e,n){try{const i=St(Et,`opportunities/${e}`);return await nr(i,{...n,updatedAt:Date.now()}),!0}catch(i){throw console.error("Error updating opportunity:",i),i}}static async applyToOpportunity(e,n){try{const i=St(Et,`opportunities/${e}`),l=await rr(i);if(l.exists()){const u=l.val().applied||[];return u.includes(n)||(u.push(n),await nr(i,{applied:u,updatedAt:Date.now()})),!0}return!1}catch(i){throw console.error("Error applying to opportunity:",i),i}}static async markNotInterested(e,n){try{const i=St(Et,`opportunities/${e}`),l=await rr(i);if(l.exists()){const u=l.val().not_interested||[];return u.includes(n)||(u.push(n),await nr(i,{not_interested:u,updatedAt:Date.now()})),!0}return!1}catch(i){throw console.error("Error marking not interested:",i),i}}static async acceptApplicant(e,n){try{const i=St(Et,`opportunities/${e}`),l=await rr(i);if(l.exists()){const u=l.val().application_statuses||{};return u[n]="accepted",await nr(i,{application_statuses:u,updatedAt:Date.now()}),!0}return!1}catch(i){throw console.error("Error accepting applicant:",i),i}}static async rejectApplicant(e,n){try{const i=St(Et,`opportunities/${e}`),l=await rr(i);if(l.exists()){const u=l.val().application_statuses||{};return u[n]="rejected",await nr(i,{application_statuses:u,updatedAt:Date.now()}),!0}return!1}catch(i){throw console.error("Error rejecting applicant:",i),i}}static async closeOpportunity(e){try{const n=St(Et,`opportunities/${e}`);return await nr(n,{status:"closed",updatedAt:Date.now()}),!0}catch(n){throw console.error("Error closing opportunity:",n),n}}static async reopenOpportunity(e){try{const n=St(Et,`opportunities/${e}`);return await nr(n,{status:"open",updatedAt:Date.now()}),!0}catch(n){throw console.error("Error reopening opportunity:",n),n}}static onOpportunitiesChange(e){const n=St(Et,"opportunities");return Qm(n,i=>{if(i.exists()){const l=i.val(),c=Object.keys(l).map(u=>({id:u,...l[u]}));e(c)}else e([])})}static onEmployeesChange(e){const n=St(Et,"employees");return Qm(n,i=>{if(i.exists()){const l=i.val(),c=Object.keys(l).map(u=>({id:u,...l[u]}));e(c)}else e([])})}}const FI=r=>{let e=r.trim();return/^https?:\/\//i.test(e)||(e=`https://${e}`),e.replace(/\/+$/,"")},UI=()=>{const r=FI("https://finder-webapp.onrender.com");return r||(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://127.0.0.1:5000":"https://finder-webapp.onrender.com")},_e=r=>{const e=UI(),n=(r||"").replace(/^\/+/,"");return`${e}/${n}`};function fo({userEmail:r,userName:e}){const n=vn(),i=ra(),l=r||localStorage.getItem("finder_email")||"",c=p=>p==="/dashboard"?i.pathname==="/dashboard":i.pathname.startsWith(p),u=p=>`${c(p)?"text-finder-blue-600":"text-gray-700 hover:text-finder-blue-600"} cursor-pointer transition-colors`;return h.jsxs("header",{className:"bg-white px-8 py-4 shadow flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center",children:h.jsx("img",{src:sa,alt:"Finder Logo",className:"h-8 cursor-pointer",onClick:()=>n("/dashboard")})}),h.jsxs("nav",{className:"flex-1 flex justify-center items-center space-x-6 font-medium",children:[h.jsx("span",{className:u("/dashboard"),onClick:()=>n("/dashboard"),children:"Home"}),h.jsx("span",{className:u("/find-opportunities"),onClick:()=>n("/find-opportunities"),children:"Find Opportunity"}),h.jsxs("button",{className:"border px-4 py-2 rounded-xl text-white flex items-center",style:{backgroundColor:"#115CBA",borderColor:"#115CBA"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#0E4A9A",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#115CBA",onClick:()=>n("/post-opportunity"),children:[h.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Post an Opportunity"]})]}),h.jsxs("div",{className:"flex items-center ml-6 gap-3",children:[h.jsx(zx,{userEmail:l}),h.jsx(Ux,{userName:e,userEmail:l,size:"sm"})]})]})}function $I(){const[r,e]=R.useState({title:"",description:"",domain:"",type:"",startDate:"",endDate:"",hoursPerWeek:"",roles:[],skills:[],email:localStorage.getItem("finder_email")||""}),[n,i]=R.useState(""),[l,c]=R.useState(""),u=vn(),p=localStorage.getItem("finder_email")||"";R.useEffect(()=>{p&&(async()=>{try{const Y=await(await fetch(_e("employees"))).json(),me=(Y.employees||Y||[]).find(Te=>(Te.email||"").trim().toLowerCase()===p.trim().toLowerCase());me&&c(me.name||"")}catch(G){console.error("Error fetching user name:",G)}})()},[p]);const m=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],y=["Proposal / POV","CS&D Operations","Domain / Industry Operations","Other"],x=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"],_=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],v=["Research","Data Analysis","Presentation","Storyboarding","Stakeholder management","Slide Making","Dashboarding","Excel Modelling","PMO"],k=P=>{e({...r,[P.target.name]:P.target.value}),P.target.name==="email"&&localStorage.setItem("finder_email",P.target.value)},D=(P,G)=>{const Y=P.target.value;e(ce=>{const me=ce[G];return me.includes(Y)?{...ce,[G]:me.filter(Te=>Te!==Y)}:{...ce,[G]:[...me,Y]}})},z=async P=>{P.preventDefault(),i("");const G={title:"Opportunity Title",description:"Description",type:"Type of FI",startDate:"Start Date",endDate:"End Date",hoursPerWeek:"Number of Hours per Week"},Y=[];if(Object.keys(G).forEach(ve=>{(!r[ve]||r[ve].toString().trim()==="")&&Y.push(G[ve])}),Y.length>0){i(`Please fill in the following mandatory fields: ${Y.join(", ")}`);return}const ce=new Date;ce.setHours(0,0,0,0);const me=new Date(r.startDate),Te=new Date(r.endDate);if(me<ce){i("Start date must be today or a future date.");return}if(Te<me){i("End date must be on or after the start date.");return}const Ce={...r,email:localStorage.getItem("finder_email")||""};try{const Me=await(await fetch(_e("opportunities"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)})).json();Me.success?u("/dashboard"):i(Me.message||"Failed to post opportunity")}catch{i("Network error. Please try again.")}};return h.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[h.jsx(fo,{userEmail:p,userName:l}),h.jsxs("div",{className:"max-w-6xl mx-auto mt-10",children:[h.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-8 text-center flex items-center justify-center gap-3",children:["Let's",h.jsx("img",{src:sa,alt:"FInder",className:"h-6 md:h-8 inline-block -mt-1"}),"your next resource!"]}),h.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white p-8 rounded-2xl shadow",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block font-semibold mb-1",children:["Opportunity Title",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{name:"title",type:"text",placeholder:"e.g. RFP Support",value:r.title,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4"}),h.jsxs("label",{className:"block font-semibold mb-1",children:["Description",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("textarea",{name:"description",placeholder:"Enter Brief Summary...",value:r.description,onChange:k,maxLength:500,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 h-32"}),h.jsxs("div",{className:"flex gap-4 mb-4",children:[h.jsxs("div",{className:"w-1/2",children:[h.jsx("label",{className:"block font-semibold mb-1",children:"Domain"}),h.jsxs("select",{name:"domain",value:r.domain,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[h.jsx("option",{value:"",children:"Select Domain"}),m.map(P=>h.jsx("option",{value:P,children:P},P))]})]}),h.jsxs("div",{className:"w-1/2",children:[h.jsxs("label",{className:"block font-semibold mb-1",children:["Type of FI",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsxs("select",{name:"type",value:r.type,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[h.jsx("option",{value:"",children:"Select Type of FI"}),y.map(P=>h.jsx("option",{value:P,children:P},P))]})]})]}),h.jsxs("div",{className:"flex gap-4 mb-4",children:[h.jsxs("div",{className:"w-1/2",children:[h.jsx("label",{className:"block font-semibold mb-1",children:"Industry"}),h.jsxs("select",{name:"industry",value:r.industry||"",onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-xl",children:[h.jsx("option",{value:"",children:"Select Industry"}),x.map(P=>h.jsx("option",{value:P,children:P},P))]})]}),h.jsxs("div",{className:"w-1/2",children:[h.jsxs("label",{className:"block font-semibold mb-1",children:["Start Date",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{name:"startDate",type:"date",value:r.startDate,onChange:k,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]})]}),h.jsxs("div",{className:"flex gap-4 mb-4",children:[h.jsxs("div",{className:"w-1/2",children:[h.jsxs("label",{className:"block font-semibold mb-1",children:["End Date",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{name:"endDate",type:"date",value:r.endDate,onChange:k,min:r.startDate||new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]}),h.jsxs("div",{className:"w-1/2",children:[h.jsxs("label",{className:"block font-semibold mb-1",children:["No. of Hours per Week",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{name:"hoursPerWeek",type:"number",placeholder:"Enter Number of hours per week required",value:r.hoursPerWeek,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-xl"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block font-semibold mb-1",children:"Role Required"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:_.map(P=>h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",value:P,checked:r.roles.includes(P),onChange:G=>D(G,"roles"),className:"mr-2"}),P]},P))}),h.jsx("label",{className:"block font-semibold mb-1",children:"Skills Required"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:v.map(P=>h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",value:P,checked:r.skills.includes(P),onChange:G=>D(G,"skills"),className:"mr-2"}),P]},P))}),n&&h.jsx("div",{className:"text-red-600 mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:n}),h.jsx("div",{className:"mb-4",children:h.jsxs("p",{className:"text-sm text-gray-500",children:[h.jsx("span",{className:"text-red-500",children:"*"})," Indicates mandatory field"]})}),h.jsx("button",{type:"submit",className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium",children:"Submit"})]})]})]})]})}const zI=["All","Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],BI=["All","Proposal / POV","Client Operations","Domain / Industry Operations","Other"],WI=["All","Open","Closed","Applied","Not Interested"];function VI(){const[r,e]=R.useState([]),[n,i]=R.useState([]),[l,c]=R.useState("All"),[u,p]=R.useState("All"),[m,y]=R.useState("All"),[x,_]=R.useState(!0),[v,k]=R.useState(null),[D,z]=R.useState(!1),[P,G]=R.useState(!1),[Y,ce]=R.useState(null),[me,Te]=R.useState(""),Ce=vn(),ve=localStorage.getItem("finder_email")||"";R.useEffect(()=>{Promise.all([fetch(_e("opportunities")).then(O=>O.json()),fetch(_e("employees")).then(O=>O.json())]).then(([O,se])=>{console.log("Fetched opportunities:",O),console.log("Fetched employees:",se),O.success&&e(O.opportunities);const Se=se.employees||se||[];i(Se);const K=Se.find(X=>(X.email||"").trim().toLowerCase()===ve.trim().toLowerCase());K&&Te(K.name||"")}).catch(O=>{console.error("Error fetching data:",O),e([]),i([])})},[]);const Me={};n.forEach(O=>{Me[O.email]=O.name});const Ve=async O=>{try{if((await fetch(_e(`opportunities/${O}/apply`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ve})})).ok){const Se=n.find(L=>(L.email||"").trim().toLowerCase()===ve.trim().toLowerCase()),K=Se?Se.name:"Someone",X=r.find(L=>L.id===O);X&&X.email&&X.email!==ve&&Mt.notifyOpportunityPoster(X.email,K,X.title,O);const M=await(await fetch(_e("opportunities"))).json();M.success&&e(M.opportunities),z(!1)}}catch(se){console.error("Apply error:",se)}},oe=async O=>{try{if((await fetch(_e(`opportunities/${O}/not_interested`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ve})})).ok){const K=await(await fetch(_e("opportunities"))).json();K.success&&e(K.opportunities),z(!1)}}catch(se){console.error("Mark not interested error:",se)}},Ke=async O=>{try{const se=n.find(Se=>(Se.email||"").trim().toLowerCase()===O.trim().toLowerCase());se&&(ce(se),G(!0))}catch(se){console.error("Error fetching profile:",se)}};let Fe=r.filter(O=>{if(l!=="All"&&O.domain!==l||u!=="All"&&O.type!==u)return!1;if(m!=="All"){if(m==="Open")return O.status==="open";if(m==="Closed")return O.status==="closed";if(m==="Applied")return O.applied&&O.applied.includes(ve);if(m==="Not Interested")return O.not_interested&&O.not_interested.includes(ve)}return!0});return!x&&m!=="Not Interested"&&m!=="Applied"&&(Fe=Fe.filter(O=>!(O.not_interested&&O.not_interested.includes(ve)))),Fe=Fe.sort((O,se)=>O.status!=="closed"&&se.status==="closed"?-1:O.status==="closed"&&se.status!=="closed"?1:se.id-O.id),h.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[h.jsx(fo,{userEmail:ve,userName:me}),h.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Find Opportunities"}),h.jsx("p",{className:"text-gray-600",children:"Discover and apply for opportunities that match your skills and interests"})]}),h.jsxs("div",{className:"mb-8 bg-white p-6 rounded-xl shadow",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain"}),h.jsx("select",{value:l,onChange:O=>c(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:zI.map(O=>h.jsx("option",{value:O,children:O},O))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),h.jsx("select",{value:u,onChange:O=>p(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:BI.map(O=>h.jsx("option",{value:O,children:O},O))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),h.jsx("select",{value:m,onChange:O=>y(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-finder-blue-500",children:WI.map(O=>h.jsx("option",{value:O,children:O},O))})]}),h.jsx("div",{className:"flex items-end",children:h.jsx("button",{onClick:()=>{c("All"),p("All"),y("All")},className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium",children:"Clear Filters"})})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:x,onChange:O=>_(O.target.checked),className:"rounded border-gray-300"}),h.jsx("span",{className:"text-gray-600 font-medium",children:"Show not interested"})]})})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Fe.map((O,se)=>{const Se=O.applied&&O.applied.includes(ve),K=O.not_interested&&O.not_interested.includes(ve),X=O.status==="closed",F=O.application_statuses&&O.application_statuses[ve],M=K||X;return h.jsxs("div",{className:`bg-white p-6 rounded-xl shadow cursor-pointer hover:shadow-lg transition-shadow ${M?"opacity-50 bg-gray-100":""}`,onClick:()=>{k(O),z(!0)},children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:`font-bold text-lg flex-1 ${M?"text-gray-500":""}`,children:O.title}),h.jsxs("div",{className:"flex gap-1",children:[O.status==="closed"?h.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:"Closed"}):h.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded-full",children:"Open"}),Se&&!F&&h.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded-full",children:"Applied"}),F==="accepted"&&h.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded-full",children:"Accepted"}),F==="rejected"&&h.jsx("span",{className:"px-2 py-1 bg-red-600 text-white text-xs rounded-full",children:"Not Considered"}),K&&h.jsx("span",{className:"px-2 py-1 bg-gray-500 text-white text-xs rounded-full",children:"Not Interested"})]})]}),h.jsx("p",{className:`text-gray-600 text-sm mb-4 line-clamp-2 ${M?"text-gray-400":""}`,children:O.description}),h.jsxs("div",{className:`text-right text-xs text-gray-500 ${M?"text-gray-400":""}`,children:["Posted by: ",Me[O.email]||"Unknown User"]})]},se)})}),Fe.length===0&&h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-500 text-lg",children:"No opportunities found matching your criteria."})})]}),D&&v&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:v.title}),h.jsx("div",{className:"flex items-center gap-2",children:v.status==="closed"?h.jsx("span",{className:"px-3 py-1 bg-red-500 text-white text-sm rounded-full",children:"Closed"}):h.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"})})]}),h.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),h.jsx("p",{className:"text-gray-600",children:v.description||"-"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),h.jsx("p",{className:"text-gray-600",children:v.domain||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Type"}),h.jsx("p",{className:"text-gray-600",children:v.type||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),h.jsx("p",{className:"text-gray-600",children:v.industry||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Hours per Week"}),h.jsx("p",{className:"text-gray-600",children:v.hoursPerWeek||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Start Date"}),h.jsx("p",{className:"text-gray-600",children:v.startDate||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"End Date"}),h.jsx("p",{className:"text-gray-600",children:v.endDate||"-"})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),v.roles&&v.roles.length>0?h.jsx("div",{className:"flex flex-wrap gap-2",children:v.roles.map((O,se)=>h.jsx("span",{className:"px-2 py-1 bg-finder-blue-100 text-finder-blue-800 text-sm rounded",children:O},se))}):h.jsx("p",{className:"text-gray-600",children:"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),v.skills&&v.skills.length>0?h.jsx("div",{className:"flex flex-wrap gap-2",children:v.skills.map((O,se)=>h.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded",children:O},se))}):h.jsx("p",{className:"text-gray-600",children:"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Posted by"}),h.jsx("p",{className:"text-finder-blue-600 cursor-pointer hover:underline",onClick:()=>Ke(v.email),children:Me[v.email]||"Unknown User"})]})]}),h.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:v.email===ve?h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"You posted this opportunity"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"View and manage this opportunity from your dashboard"})]}),h.jsx("button",{onClick:()=>Ce("/dashboard",{state:{tab:"posted"}}),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Go to Dashboard"})]}):(()=>{const O=v.applied&&v.applied.includes(ve),se=v.not_interested&&v.not_interested.includes(ve),Se=v.application_statuses&&v.application_statuses[ve];return Se==="accepted"?h.jsx("div",{className:"text-center",children:h.jsxs("div",{className:"mb-4",children:[h.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium",children:"✅ Application Status"}),h.jsx("p",{className:"text-green-600 text-sm mt-2 font-semibold",children:"Accepted"})]})}):Se==="rejected"?h.jsx("div",{className:"text-center",children:h.jsxs("div",{className:"mb-4",children:[h.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-lg font-medium",children:"❌ Application Status"}),h.jsx("p",{className:"text-red-600 text-sm mt-2 font-semibold",children:"Not Considered"})]})}):O?h.jsx("div",{className:"text-center",children:h.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg",children:"Already Applied"})}):se?h.jsx("div",{className:"text-center",children:h.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg",children:"Marked as Not Interested"})}):v.status==="closed"?h.jsx("div",{className:"text-center",children:h.jsxs("div",{className:"mb-4",children:[h.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-gray-500 text-white rounded-lg font-medium",children:"🔒 Opportunity Closed"}),h.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"This opportunity is no longer accepting applications."})]})}):h.jsxs("div",{className:"flex justify-center gap-4",children:[h.jsx("button",{onClick:()=>Ve(v.id),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Apply for this Opportunity"}),h.jsx("button",{onClick:()=>oe(v.id),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Mark as not Interested"})]})})()})]})})}),P&&Y&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:h.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),h.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-20 h-20 bg-finder-blue-600 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-2xl font-bold",children:Y.name?Y.name.charAt(0).toUpperCase():"U"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-800 font-semibold",children:Y.name||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("p",{className:"text-gray-800",children:Y.email||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),h.jsx("p",{className:"text-gray-800",children:Y.industry||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),h.jsx("p",{className:"text-gray-800",children:Y.domain||"N/A"})]})]})]})})})]})}const HI="data:image/svg+xml,%3csvg%20width='1127'%20height='287'%20viewBox='0%200%201127%20287'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M298.135%2012.1909H373.838L329.869%20120.011H279.782L298.135%2012.1909Z'%20fill='%23222222'/%3e%3cpath%20d='M535.263%2066.6106C559.988%2066.6106%20581.841%2077.3998%20596.369%2093.9679C586.978%20112.751%20577.586%20131.534%20577.586%20159.709C575.081%20186.096%20576.391%20200.438%20582.282%20225.451C589.064%20243.611%20596.139%20256.199%20615.937%20283.015H540.998V167.931C540.998%20155.696%20537.812%20146.137%20531.44%20139.255C525.068%20132.118%20516.529%20128.55%20505.823%20128.55C494.608%20128.55%20485.814%20132.118%20479.442%20139.255C473.069%20146.137%20469.883%20155.696%20469.883%20167.931V283.015H394.944V68.5223H469.883V99.1096C476.51%2089.4236%20485.432%2081.6493%20496.647%2075.7868C507.862%2069.6693%20520.734%2066.6106%20535.263%2066.6106Z'%20fill='%23222222'/%3e%3cpath%20d='M589.386%20175.578C589.386%20153.402%20593.337%20134.03%20601.238%20117.462C609.395%20100.894%20620.483%2088.1492%20634.502%2079.2279C648.521%2070.3067%20664.07%2065.846%20681.147%2065.846C694.912%2065.846%20707.147%2068.7773%20717.852%2074.6399C728.813%2080.2475%20737.351%2088.0218%20743.469%2097.9626V0.0834961H818.79L817.074%2079.8804C787.377%20111.052%20779.211%20133.71%20779.507%20183.188C783.905%20225.111%20793.667%20246.669%20818.79%20283.015H743.469V253.193C737.606%20263.134%20729.322%20271.035%20718.617%20276.898C707.911%20282.761%20695.294%20285.692%20680.765%20285.692C663.687%20285.692%20648.139%20281.231%20634.12%20272.31C620.355%20263.389%20609.395%20250.644%20601.238%20234.076C593.337%20217.253%20589.386%20197.753%20589.386%20175.578ZM743.851%20175.578C743.851%20161.813%20740.028%20150.981%20732.381%20143.079C724.989%20135.177%20715.813%20131.226%20704.853%20131.226C693.637%20131.226%20684.334%20135.177%20676.942%20143.079C669.55%20150.726%20665.854%20161.559%20665.854%20175.578C665.854%20189.342%20669.55%20200.302%20676.942%20208.459C684.334%20216.361%20693.637%20220.312%20704.853%20220.312C715.813%20220.312%20724.989%20216.361%20732.381%20208.459C740.028%20200.557%20743.851%20189.597%20743.851%20175.578Z'%20fill='%23222222'/%3e%3cpath%20d='M968.933%20136.23C968.933%20166.214%20968.933%20178.493%20968.933%20190.872H866.415C867.18%20202.597%20870.366%20211.391%20875.974%20217.253C881.836%20222.861%20889.228%20225.665%20898.15%20225.665C910.639%20225.665%20919.561%20220.057%20924.913%20208.842H968.553C968.553%20225.126%20968.933%20230.147%20968.933%20248.93C968.933%20260.113%20963.912%20269.124%20949.383%20275.751C934.854%20282.378%20918.796%20285.692%20901.208%20285.692C880.052%20285.692%20861.19%20281.231%20844.622%20272.31C828.309%20263.389%20815.437%20250.644%20806.005%20234.076C796.829%20217.508%20792.241%20198.009%20792.241%20175.578C792.241%20153.147%20796.829%20133.775%20806.005%20117.462C815.182%20100.894%20827.926%2088.1494%20844.24%2079.2282C860.808%2070.3069%20879.797%2065.8463%20901.208%2065.8463C922.364%2065.8463%20941.099%2070.1794%20957.412%2078.8458C972.035%2087.2884%20968.933%2084.5762%20968.933%20108.055C968.933%20131.534%20968.933%20112.751%20968.933%20136.23ZM932.942%20154.549C932.942%20145.373%20929.884%20138.236%20923.766%20133.138C917.649%20127.785%20910.002%20125.109%20900.826%20125.109C891.65%20125.109%20884.13%20127.658%20878.268%20132.756C872.405%20137.599%20868.582%20144.863%20866.798%20154.549H932.942Z'%20fill='%23222222'/%3e%3cpath%20d='M1057.8%20106.374C1066.21%2094.1391%201076.4%2084.4532%201088.38%2077.3162C1100.36%2070.1791%201113.24%2066.6106%201127%2066.6106V146.52H1105.97C1089.66%20146.52%201077.55%20149.706%201069.65%20156.078C1061.75%20162.451%201057.8%20173.539%201057.8%20189.342V283.015H982.858V68.5223H1057.8V106.374Z'%20fill='%23222222'/%3e%3cpath%20d='M154.466%2013.4655V73.1106H74.9387V120.521H137.896V177.489H74.9387V286.497H0V13.4655L154.466%2013.4655Z'%20fill='%23115CBA'/%3e%3cpath%20d='M253.575%20286.497V98.6637H178.441V286.497H253.575Z'%20fill='%23115CBA'/%3e%3ccircle%20cx='216.008'%20cy='51.7054'%20r='37.5666'%20fill='%23115CBA'/%3e%3c/svg%3e";function GI(){const{id:r}=_x(),[e,n]=R.useState(null),[i,l]=R.useState(""),[c,u]=R.useState(""),[p,m]=R.useState(""),[y,x]=R.useState([]),[_,v]=R.useState(!1),[k,D]=R.useState({}),[z,P]=R.useState(!1),[G,Y]=R.useState(null),[ce,me]=R.useState(()=>{try{const K=localStorage.getItem("finder_applicant_statuses");return K?JSON.parse(K):{}}catch{return{}}}),Te=vn(),Ce=localStorage.getItem("finder_email")||"";R.useEffect(()=>{localStorage.setItem("finder_applicant_statuses",JSON.stringify(ce))},[ce]),R.useEffect(()=>{Promise.all([fetch(_e(`opportunities/${r}`)).then(K=>K.json()),fetch(_e("employees")).then(K=>K.json())]).then(([K,X])=>{if(K.success){const L=K.opportunity,E=X.employees||X||[],j={};E.forEach(ae=>{j[ae.email]=ae.name});const ie={...L,applicants:(L.applied||[]).map(ae=>({email:ae,name:j[ae]||"Unknown User"})),postedBy:j[L.email]||"Unknown User"};n(ie),x(E),console.log("🔍 Server opportunity data:",L),console.log("🔍 Server application_statuses:",L.application_statuses),L.application_statuses&&me(ae=>{const we={...ae};return Object.entries(L.application_statuses).forEach(([pe,Re])=>{const N=`${r}-${pe}`;console.log(`🔍 Mapping server status: ${pe} (${Re}) -> statusKey: ${N}`),Re==="accepted"?(we[N]="confirmed",console.log(`✅ Set ${N} = confirmed (from server)`)):Re==="rejected"&&(we[N]="rejected",console.log(`❌ Set ${N} = rejected (from server)`))}),console.log("🔍 Final applicantStatuses after server sync:",we),we})}else l("Opportunity not found");const M=(X.employees||X||[]).find(L=>(L.email||"").trim().toLowerCase()===Ce.trim().toLowerCase());M&&m(M.name||"")}).catch(()=>l("Error fetching opportunity"))},[r,Ce]);const ve=e&&(e.email||"").trim().toLowerCase()===Ce.trim().toLowerCase(),Me=async K=>{u("");const F=await(await fetch(_e(`opportunities/${r}/${K}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Ce})})).json();if(F.success){if(K==="apply"&&e&&e.email&&e.email!==Ce)try{const L=await(await fetch(_e("employees"))).json(),j=(L.employees||L||[]).find(ae=>(ae.email||"").trim().toLowerCase()===Ce.trim().toLowerCase()),ie=j?j.name:"Someone";Mt.notifyOpportunityPoster(e.email,ie,e.title,r)}catch(M){console.error("Error sending notification:",M)}u(K==="apply"?"Applied successfully!":"Marked as not interested.")}else u(F.message||"Action failed")},Ve=async(K,X,F,M)=>{console.log("🚀 FUNCTION CALLED handleAcceptReject"),console.log(`🔥 Frontend Accept/Reject called - oppId: ${K}, applicantEmail: ${X}, action: ${M}`),alert(`DEBUG: handleAcceptReject called with oppId: ${K}, email: ${X}, action: ${M}`);const L=M==="accept"?"accept":"reject",E=`${L.charAt(0).toUpperCase()+L.slice(1)} Candidate`,j=`${L.charAt(0).toUpperCase()+L.slice(1)} "${F}" for this role?`;Fe(E,j,async()=>{try{const ie=`${K}-${X}`;console.log(`🔥 Setting local status key: ${ie} to ${M==="accept"?"confirmed":"rejected"}`),me(pe=>({...pe,[ie]:M==="accept"?"confirmed":"rejected"})),e&&(M==="accept"?Mt.notifyApplicationAccepted(X,e.title,r):Mt.notifyApplicationRejected(X,e.title,r));const ae=_e(`opportunities/${K}/${M}`);console.log(`🔥 Making API call to: ${ae}`),(await fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantEmail:X})})).ok?console.log(`✅ Successfully ${M}ed applicant on server`):console.log("❌ Server update failed, but local status maintained")}catch(ie){console.error("❌ Accept/Reject error:",ie)}})},oe=async(K,X)=>{Fe("Close Opportunity",`Are you sure you want to close the opportunity "${X}"?`,async()=>{try{const F=e?e.applied||[]:[];if((await fetch(_e(`opportunities/${K}/close`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Ce})})).ok){F.forEach(E=>{E!==Ce&&Mt.notifyOpportunityClosed(E,X,K)});const L=await fetch(_e(`opportunities/${r}`)).then(E=>E.json());if(L.success){const E={};y.forEach(ie=>{E[ie.email]=ie.name});const j={...L.opportunity,applicants:(L.opportunity.applied||[]).map(ie=>({email:ie,name:E[ie]||"Unknown User"})),postedBy:E[L.opportunity.email]||"Unknown User"};n(j)}}}catch(F){console.error("Error closing opportunity:",F)}})},Ke=async(K,X)=>{Fe("Reopen Opportunity",`Are you sure you want to reopen the opportunity "${X}"?`,async()=>{try{if((await fetch(_e(`opportunities/${K}/reopen`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Ce})})).ok){const M=await fetch(_e(`opportunities/${r}`)).then(L=>L.json());if(M.success){const L={};y.forEach(j=>{L[j.email]=j.name});const E={...M.opportunity,applicants:(M.opportunity.applied||[]).map(j=>({email:j,name:L[j]||"Unknown User"})),postedBy:L[M.opportunity.email]||"Unknown User"};n(E)}}}catch(F){console.error("Error reopening opportunity:",F)}})},Fe=(K,X,F)=>{D({title:K,message:X,onConfirm:F}),v(!0)},O=()=>{k.onConfirm&&k.onConfirm(),v(!1),D({})},se=()=>{v(!1),D({})},Se=async K=>{try{const X=y.find(F=>(F.email||"").trim().toLowerCase()===K.trim().toLowerCase());X&&(Y(X),P(!0))}catch(X){console.error("Error fetching profile:",X)}};return i?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i}):e?h.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[h.jsx(fo,{userEmail:Ce,userName:p}),_&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:k.title}),h.jsx("p",{className:"text-gray-600 mb-6",children:k.message}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx("button",{onClick:se,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),h.jsx("button",{onClick:O,className:"px-4 py-2 bg-finder-blue-600 text-white rounded hover:bg-finder-blue-700",children:"Confirm"})]})]})}),z&&G&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:h.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),h.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-20 h-20 bg-finder-blue-600 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-2xl font-bold",children:G.name?G.name.charAt(0).toUpperCase():"U"})})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-800 font-semibold",children:G.name||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("p",{className:"text-gray-800",children:G.email||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),h.jsx("p",{className:"text-gray-800",children:G.industry||"N/A"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),h.jsx("p",{className:"text-gray-800",children:G.domain||"N/A"})]})]})]})})}),h.jsxs("div",{className:"max-w-4xl mx-auto mt-10 bg-white p-8 rounded-2xl shadow relative",children:[h.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl font-bold focus:outline-none",onClick:()=>Te("/find-opportunities"),"aria-label":"Close",children:"×"}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:e.title}),e.status==="closed"?h.jsx("span",{className:"px-3 py-1 bg-gray-400 text-white text-sm rounded-full",children:"Closed"}):h.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"})]}),h.jsxs("div",{className:"mb-4 text-gray-500 text-sm",children:["Posted by: ",h.jsx("span",{className:"cursor-pointer hover:text-finder-blue-600 underline transition-colors",onClick:()=>Se(e.email),children:e.postedBy})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"mb-4 text-gray-800 border p-4 rounded-xl bg-blue-50",children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),e.description]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"text-gray-600",children:["Type of FI: ",h.jsx("span",{className:"font-semibold",children:e.type})]}),h.jsxs("div",{className:"text-gray-600",children:["Domain: ",h.jsx("span",{className:"font-semibold",children:e.domain})]}),h.jsxs("div",{className:"text-gray-600",children:["Industry: ",h.jsx("span",{className:"font-semibold",children:e.industry})]}),h.jsxs("div",{className:"text-gray-600",children:["Start Date: ",h.jsx("span",{className:"font-semibold",children:e.startDate})]}),h.jsxs("div",{className:"text-gray-600",children:["End Date: ",h.jsx("span",{className:"font-semibold",children:e.endDate})]}),h.jsxs("div",{className:"text-gray-600",children:["Hours per Week: ",h.jsx("span",{className:"font-semibold",children:e.hoursPerWeek})]})]})]}),h.jsx("div",{children:ve?h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:["Applicants (",e.applicants?e.applicants.length:0,")"]}),e.applicants&&e.applicants.length>0?h.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.applicants.map((K,X)=>{const F=`${r}-${K.email}`,M=ce[F],L=e.status==="closed";return h.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-medium text-gray-800 cursor-pointer hover:text-finder-blue-600 transition-colors",onClick:()=>Se(K.email),children:K.name}),h.jsx("p",{className:"text-sm text-gray-500",children:K.email}),h.jsxs("div",{className:"mt-1 space-y-1",children:[M&&h.jsx("p",{className:`text-sm font-medium ${M==="confirmed"?"text-green-600":"text-red-600"}`,children:M==="confirmed"?"✅ Candidate Confirmed":"❌ Candidate Not Considered"}),!M&&!L&&h.jsx("p",{className:"text-sm text-yellow-600",children:"⏳ Pending Decision"})]})]}),!M&&!L&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Ve(r,K.email,K.name,"accept"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Accept"}),h.jsx("button",{onClick:()=>Ve(r,K.email,K.name,"reject"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Not Considered"})]})]},`${X}-${M||"none"}`)})}):h.jsx("p",{className:"text-gray-500 text-center py-8",children:"No applicants yet"})]}),h.jsx("div",{className:"space-y-3",children:e.status==="closed"?h.jsx("button",{onClick:()=>Ke(r,e.title),className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Reopen Opportunity"}):h.jsx("button",{onClick:()=>oe(r,e.title),className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium",children:"Close Opportunity"})})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"space-y-4",children:[e.roles&&e.roles.length>0&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:e.roles.map((K,X)=>h.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:K},X))})]}),e.skills&&e.skills.length>0&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:e.skills.map((K,X)=>h.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:K},X))})]})]}),h.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.applied&&e.applied.includes(Ce)?h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Already Applied"}),c&&h.jsx("p",{className:"mt-2 text-sm text-gray-600",children:c})]}):e.not_interested&&e.not_interested.includes(Ce)?h.jsx("div",{className:"text-center",children:h.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Marked as Not Interested"})}):e.status==="closed"?h.jsx("div",{className:"text-center",children:h.jsx("span",{className:"px-6 py-3 bg-gray-400 text-white rounded-lg font-medium",children:"Opportunity Closed"})}):h.jsxs("div",{className:"flex gap-4 justify-center",children:[h.jsx("button",{onClick:()=>Me("apply"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium",children:"Apply for this Opportunity"}),h.jsx("button",{onClick:()=>Me("not_interested"),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Mark as not Interested"})]}),c&&h.jsx("p",{className:"mt-3 text-center text-sm text-gray-600",children:c})]})]})})]})]})]}):h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}function KI(){const[r,e]=R.useState({name:"",email:"",password:"",role:"",industry:"",domain:""}),[n,i]=R.useState(""),[l,c]=R.useState(""),u=vn(),p=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],m=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],y=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"],x=v=>{e({...r,[v.target.name]:v.target.value})},_=async v=>{v.preventDefault(),i(""),c("");const D=await(await fetch(_e("register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();D.success?(c("Registration successful! Please login."),setTimeout(()=>u("/"),1500)):i(D.message||"Registration failed")};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:h.jsxs("form",{onSubmit:_,className:"bg-white p-10 rounded-2xl shadow-md w-full max-w-md text-center",children:[h.jsx("div",{className:"mb-6 flex justify-center",children:h.jsx("img",{src:HI,alt:"Finder Logo",className:"h-12"})}),h.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Register"}),h.jsx("input",{name:"name",type:"text",placeholder:"Name",value:r.name,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),h.jsx("input",{name:"email",type:"email",placeholder:"Email",value:r.email,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),h.jsx("input",{name:"password",type:"password",placeholder:"Password",value:r.password,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0}),h.jsxs("select",{name:"role",value:r.role,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Role"}),m.map(v=>h.jsx("option",{value:v,children:v},v))]}),h.jsxs("select",{name:"industry",value:r.industry,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Industry"}),y.map(v=>h.jsx("option",{value:v,children:v},v))]}),h.jsxs("select",{name:"domain",value:r.domain,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-2 focus:ring-finder-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Domain"}),p.map(v=>h.jsx("option",{value:v,children:v},v))]}),n&&h.jsx("div",{className:"text-red-600 mb-2",children:n}),l&&h.jsx("div",{className:"text-green-600 mb-2",children:l}),h.jsx("button",{type:"submit",className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium mb-2",children:"Register"}),h.jsxs("div",{className:"text-sm text-gray-500",children:["Already have an account? ",h.jsx("span",{className:"text-finder-blue-600 cursor-pointer",onClick:()=>u("/"),children:"Login"})]})]})})}function qI(){const[r,e]=R.useState(null),[n,i]=R.useState(!0),[l,c]=R.useState(""),[u,p]=R.useState(!1),[m,y]=R.useState({}),[x,_]=R.useState(!1),[v,k]=R.useState(!1),[D,z]=R.useState(0),[P,G]=R.useState(0),[Y,ce]=R.useState(0),me=vn(),Te=localStorage.getItem("finder_email")||"",Ce=["Cross-Domain","Customer & Commercial Strategy","Agency Strategy","Marketing Strategy","Commerce Strategy","Pricing & Sales Strategy","Service Strategy","Innovation & Product Strategy"],ve=["Analyst","Consultant","Senior Consultant","Manager","Senior Manager"],Me=["Life Sciences & Health Care","Consumer","Energy, Resources & Industrial","Technology, Media & Telecom","Financial Services & Insurance","Cross-Industry"];R.useEffect(()=>{oe(),Ve()},[]);const Ve=async()=>{try{const Se=(await(await fetch(_e("opportunities"))).json()).opportunities||[],K=(Te||"").trim().toLowerCase(),X=Se.filter(L=>(L.applied||[]).some(j=>(j||"").trim().toLowerCase()===K)),F=Se.filter(L=>(L.email||"").trim().toLowerCase()===K),M=Se.filter(L=>{if(!(L.applied||[]).some(pe=>(pe||"").trim().toLowerCase()===K))return!1;const ae=`${Se.findIndex(pe=>pe.title===L.title&&pe.email===L.email&&pe.description===L.description)}-${Te}`;return JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}")[ae]==="confirmed"});z(X.length),G(F.length),ce(M.length)}catch(O){console.error("Error fetching opportunity counts:",O)}},oe=async()=>{try{i(!0);const se=await(await fetch(_e("employees"))).json(),K=(se.employees||se||[]).find(X=>(X.email||"").trim().toLowerCase()===Te.trim().toLowerCase());K?(e(K),y({name:K.name||"",role:K.role||"",industry:K.industry||"",domain:K.domain||""})):c("Profile not found")}catch(O){c("Failed to load profile"),console.error("Error fetching profile:",O)}finally{i(!1)}},Ke=async O=>{O.preventDefault(),_(!0),c(""),k(!1);try{const Se=await(await fetch(_e(`employees/${encodeURIComponent(Te)}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name,role:m.role,industry:m.industry,domain:m.domain})})).json();Se.success?(e(Se.employee),p(!1),k(!0),setTimeout(()=>k(!1),3e3)):c(Se.message||"Failed to update profile")}catch(se){c("Failed to update profile. Please check your connection and try again."),console.error("Error updating profile:",se)}finally{_(!1)}},Fe=O=>{y({...m,[O.target.name]:O.target.value})};return n?h.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):l?h.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),h.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Profile Error"}),h.jsx("p",{className:"text-gray-600 mb-4",children:l}),h.jsx("button",{onClick:()=>me("/dashboard"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})}):h.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[h.jsx(fo,{userEmail:Te,userName:r?.name}),h.jsxs("div",{className:"max-w-4xl mx-auto px-8 py-12",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("div",{className:"relative inline-block mb-4",children:h.jsx("div",{className:"w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg",children:r?.name?r.name.charAt(0).toUpperCase():"U"})}),h.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:r?.name||"User"}),h.jsx("p",{className:"text-gray-600",children:r?.email})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Information"}),!u&&h.jsxs("button",{onClick:()=>p(!0),className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]})]})}),h.jsxs("div",{className:"p-8",children:[v&&h.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",children:"✅ Profile updated successfully!"}),l&&h.jsxs("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:["❌ ",l]}),u?h.jsxs("form",{onSubmit:Ke,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),h.jsx("input",{type:"text",name:"name",value:m.name,onChange:Fe,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role"}),h.jsxs("select",{name:"role",value:m.role,onChange:Fe,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Role"}),ve.map(O=>h.jsx("option",{value:O,children:O},O))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),h.jsx("input",{type:"email",value:r?.email||"",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 text-gray-500",disabled:!0}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Industry"}),h.jsxs("select",{name:"industry",value:m.industry,onChange:Fe,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Industry"}),Me.map(O=>h.jsx("option",{value:O,children:O},O))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Domain"}),h.jsxs("select",{name:"domain",value:m.domain,onChange:Fe,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[h.jsx("option",{value:"",children:"Select Domain"}),Ce.map(O=>h.jsx("option",{value:O,children:O},O))]})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"submit",disabled:x,className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center justify-center",children:x?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"}),h.jsx("button",{type:"button",disabled:x,onClick:()=>{p(!1),c(""),k(!1),y({name:r?.name||"",role:r?.role||"",industry:r?.industry||"",domain:r?.domain||""})},className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-400 transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed",children:"Cancel"})]})]}):h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Full Name"}),h.jsx("p",{className:"text-lg text-gray-800 font-medium",children:r?.name||"Not specified"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Role"}),h.jsx("p",{className:"text-lg text-gray-800 font-medium",children:r?.role||"Not specified"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Email Address"}),h.jsx("p",{className:"text-lg text-gray-800",children:r?.email||"Not specified"})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Industry"}),h.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[h.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),r?.industry||"Not specified"]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Domain"}),h.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[h.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),r?.domain||"Not specified"]})]})]})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Applied"}),h.jsx("p",{className:"text-3xl font-bold text-blue-600",children:D}),h.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>me("/dashboard"),children:"View in Dashboard"})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),h.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Posted"}),h.jsx("p",{className:"text-3xl font-bold text-green-600",children:P}),h.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-green-600",onClick:()=>me("/dashboard"),children:"View in Dashboard"})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),h.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Opportunities Worked"}),h.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Y}),h.jsx("p",{className:"text-sm text-gray-500 cursor-pointer hover:text-purple-600",onClick:()=>me("/dashboard?filter=accepted"),children:"View in Dashboard"})]})]})]})]})}function QI(){const[r,e]=R.useState(""),[n,i]=R.useState(""),[l,c]=R.useState(""),[u,p]=R.useState(!1),m=vn(),y=async()=>{if(console.log("Login attempt started",{email:r,password:n}),c(""),p(!0),!r||!n){c("Please enter email and password"),p(!1);return}try{if(console.log("Making fetch request to backend..."),r==="test@finder.com"&&n==="test"||r==="akshay@finder.com"&&n==="1234"||r==="ap@finder.com"&&n==="1234"){console.log("Using mock login for testing"),localStorage.setItem("finder_email",r),p(!1),m("/dashboard");return}const x=new AbortController,_=setTimeout(()=>x.abort(),6e4),v=await fetch(_e("login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:n}),signal:x.signal});if(clearTimeout(_),console.log("Response received:",v.status,v.ok),!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const k=await v.json();console.log("Response data:",k),k.success?(localStorage.setItem("finder_email",r),console.log("Login successful, navigating to dashboard"),m("/dashboard")):k.message==="Invalid credentials"?c("Invalid credentials. If you are a new user, please register."):c(k.message||"Login failed")}catch(x){console.error("Login error:",x),x.name==="AbortError"?c("Request timeout - server may be starting up. Please try again in 60 seconds."):c("Login failed. Try again or use test@finder.com / test for demo.")}finally{p(!1)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-blue-50",children:h.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-md w-full max-w-md text-center",children:[h.jsx("div",{className:"mb-6 flex justify-center",children:h.jsx("img",{src:sa,alt:"Finder Logo",className:"h-12"})}),h.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Login to Continue"}),h.jsx("input",{type:"email",placeholder:"Enter your email",value:r,onChange:x=>e(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-3 focus:outline-none focus:ring-2 focus:ring-finder-blue-500"}),h.jsx("input",{type:"password",placeholder:"Enter your password",value:n,onChange:x=>i(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-2 focus:ring-finder-blue-500"}),l&&h.jsx("div",{className:"text-red-600 mb-2",children:l}),h.jsx("button",{onClick:()=>{console.log("Login button clicked!"),y()},disabled:u,className:"w-full bg-finder-blue-600 text-white py-2 rounded-xl font-medium mb-2 disabled:opacity-50",style:{backgroundColor:u?"#0E4A9A":"#115CBA"},children:u?"Logging in...":"Login"}),h.jsxs("div",{className:"text-sm text-gray-500",children:["New user? ",h.jsx("span",{className:"text-finder-blue-600 cursor-pointer",style:{color:"#115CBA"},onClick:()=>m("/register"),children:"Register"})]})]})})}function YI(){const r=ra(),e=r.state?.tab||"applied",[n,i]=R.useState(e),[l,c]=R.useState(null),[u,p]=R.useState([]),[m,y]=R.useState([]),[x,_]=R.useState(0),[v,k]=R.useState(0),[D,z]=R.useState(""),[P,G]=R.useState("all"),[Y,ce]=R.useState(()=>{try{const N=localStorage.getItem("finder_applicant_statuses");return N?JSON.parse(N):{}}catch{return{}}}),[me,Te]=R.useState(!1),[Ce,ve]=R.useState({}),[Me,Ve]=R.useState(!1),[oe,Ke]=R.useState(null),[Fe,O]=R.useState(!1),[se,Se]=R.useState(null),[K,X]=R.useState({}),F=vn(),M=localStorage.getItem("finder_email")||"";R.useEffect(()=>{const N=new URLSearchParams(r.search),A=N.get("filter"),Q=N.get("tab"),q=N.get("opportunityId");console.log("🔍 URL Parameters:",{filterParam:A,tabParam:Q,opportunityIdParam:q}),A==="accepted"?(i("applied"),G("accepted")):G("all"),Q==="posted"?i("posted"):Q==="applied"&&i("applied"),q&&Q==="posted"?(console.log("🎯 Setting pendingOpportunityId for posted:",q),window.pendingOpportunityId=q):q&&(Q==="applied"||A==="accepted")?(console.log("🎯 Setting pendingAppliedOpportunityId for applied:",q),window.pendingAppliedOpportunityId=q):(window.pendingOpportunityId=null,window.pendingAppliedOpportunityId=null)},[r.search]),R.useEffect(()=>{M&&(async()=>{try{const Q=await(await fetch(_e("employees"))).json(),q=Q.employees||Q||[],le={};q.forEach(ne=>{le[ne.email]=ne.name}),X(le);const he=q.find(ne=>(ne.email||"").trim().toLowerCase()===M.trim().toLowerCase());he&&z(he.name||"")}catch(A){console.error("Error fetching user name:",A)}})()},[M]),R.useEffect(()=>{localStorage.setItem("finder_applicant_statuses",JSON.stringify(Y))},[Y]),R.useEffect(()=>{M&&(async()=>{try{const[A,Q]=await Promise.all([fetch(_e("opportunities")).then(V=>V.json()),fetch(_e("employees")).then(V=>V.json())]),q=A.opportunities||[],le=(M||"").trim().toLowerCase(),he=q.filter(V=>(V.applied||[]).some(xe=>(xe||"").trim().toLowerCase()===le)),ne=q.filter(V=>(V.email||"").trim().toLowerCase()===le);_(he.length),k(ne.length)}catch(A){console.error("Error fetching opportunity counts:",A)}})()},[M,Y]),window.fixCurrentUserOpp1Status=()=>{const N=localStorage.getItem("finder_email")||"";console.log("Current user email:",N),fetch(_e("opportunities")).then(A=>A.json()).then(A=>{const Q=A.opportunities||[],q=Q.find(le=>le.title==="Opp 1");if(q){const he=`${Q.findIndex(V=>V.title===q.title&&V.email===q.email&&V.description===q.description)}-${N}`,ne=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");ne[he]="confirmed",localStorage.setItem("finder_applicant_statuses",JSON.stringify(ne)),console.log(`Fixed status for Opp 1 - User: ${N}, StatusKey: ${he}, set to: confirmed`),console.log("Updated statuses:",ne),window.location.reload()}else console.log("Opp 1 not found!")}).catch(A=>console.error("Error fixing status:",A))},window.fixCurrentUserOpp3Status=()=>{const N=localStorage.getItem("finder_email")||"";console.log("Current user email:",N),fetch(_e("opportunities")).then(A=>A.json()).then(A=>{const Q=A.opportunities||[],q=Q.find(le=>le.title==="Opp 3");if(q){const he=`${Q.findIndex(V=>V.title===q.title&&V.email===q.email&&V.description===q.description)}-${N}`,ne=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");ne[he]="confirmed",localStorage.setItem("finder_applicant_statuses",JSON.stringify(ne)),console.log(`Fixed status for Opp 3 - User: ${N}, StatusKey: ${he}, set to: confirmed`),console.log("Updated statuses:",ne),window.location.reload()}else console.log("Opp 3 not found!")}).catch(A=>console.error("Error fixing status:",A))},window.debugAllStatuses=()=>{const N=localStorage.getItem("finder_email")||"",A=JSON.parse(localStorage.getItem("finder_applicant_statuses")||"{}");console.log("Current user email:",N),console.log("All applicant statuses:",A),fetch(_e("opportunities")).then(Q=>Q.json()).then(Q=>{const q=Q.opportunities||[];console.log("All opportunities with their potential status keys:"),q.forEach((le,he)=>{const ne=`${he}-${N}`,V=A[ne];console.log(`${le.title} (Index: ${he}) - StatusKey: ${ne} - Status: ${V||"none"} - Server Status: ${le.application_statuses?.[N]||"none"}`)})})},window.clearAllLocalStorageStatuses=()=>{localStorage.removeItem("finder_applicant_statuses"),console.log("✅ Cleared all localStorage statuses. Refreshing page to sync with server data only..."),window.location.reload()},window.resetModalState=()=>{Ve(!1),Ke(null),window.pendingOpportunityId=null,window.pendingAppliedOpportunityId=null,console.log("✅ Reset all modal and notification state")},window.testRejectionNotification=N=>{console.log("🧪 Testing rejection notification for opportunity ID:",N);const A=`/dashboard?tab=applied&opportunityId=${N}`;console.log("🧪 Navigating to:",A),F(A)},window.testModalWithCorrectId=()=>{const N=localStorage.getItem("finder_email")||"";fetch(_e("opportunities")).then(A=>A.json()).then(A=>{const Q=A.opportunities||[],q=Q.filter(le=>(le.applied||[]).some(ne=>(ne||"").trim().toLowerCase()===N.trim().toLowerCase()));if(q.length>0){const le=q[0],he=Q.findIndex(V=>V.title===le.title&&V.email===le.email&&V.description===le.description);console.log(`🧪 Testing with correct ID: ${he} for opportunity: ${le.title}`);const ne=`/dashboard?tab=applied&opportunityId=${he}`;F(ne)}})},window.createTestRejectionNotification=(N,A)=>{const Q=localStorage.getItem("finder_email")||"";fetch(_e("opportunities")).then(q=>q.json()).then(q=>{const le=q.opportunities||[];console.log("🔍 All opportunities with their IDs:"),le.forEach((ne,V)=>{console.log(`ID: ${V}, Title: ${ne.title}, Email: ${ne.email}`)});const he=le.filter(ne=>(ne.applied||[]).some(Pe=>(Pe||"").trim().toLowerCase()===Q.trim().toLowerCase()));if(console.log("🎯 Applied opportunities for current user:"),he.forEach((ne,V)=>{const Pe=le.findIndex(xe=>xe.title===ne.title&&xe.email===ne.email&&xe.description===ne.description);console.log(`Applied ID: ${Pe}, Title: ${ne.title}, Status: ${ne.status||"open"}`)}),he.length>0){const ne=he[0],V=le.findIndex(ke=>ke.title===ne.title&&ke.email===ne.email&&ke.description===ne.description),Pe={id:Date.now().toString(),type:"application_rejected",title:"Application Update",message:`Your application for "${ne.title}" was not selected this time.`,icon:"❌",action:"View Status",actionUrl:`/dashboard?tab=applied&opportunityId=${V}`,timestamp:new Date().toISOString(),read:!1},xe=JSON.parse(localStorage.getItem(`notifications_${Q}`)||"[]");xe.unshift(Pe),localStorage.setItem(`notifications_${Q}`,JSON.stringify(xe)),console.log("✅ Created test rejection notification with CORRECT ID:",Pe),console.log(`🎯 Opportunity: "${ne.title}" with ID: ${V}`),window.location.reload()}else console.log("❌ No applied opportunities found for current user")}).catch(q=>console.error("Error creating test notification:",q))},R.useEffect(()=>{if(M)try{Mt.getNotifications(M).forEach(A=>{if(A.type==="application_accepted"||A.type==="application_rejected"){const Q=A.message.match(/for "([^"]+)"/);if(Q){const q=Q[1];fetch(_e("opportunities")).then(le=>le.json()).then(le=>{const he=le.opportunities||[],ne=he.find(V=>V.title===q);if(ne){const Pe=`${he.findIndex(ke=>ke.title===ne.title&&ke.email===ne.email&&ke.description===ne.description)}-${M}`,xe=A.type==="application_accepted"?"confirmed":"rejected";ce(ke=>!ke[Pe]||ke[Pe]!==xe?(console.log(`Syncing status for ${q}: ${xe}`),{...ke,[Pe]:xe}):ke)}}).catch(le=>console.error("Error syncing notification status:",le))}}})}catch(N){console.error("Error syncing notifications:",N)}},[M]),R.useEffect(()=>{n==="applied"&&(console.log("🚀 Fetching applied opportunities, tab:",n),Promise.all([fetch(_e("opportunities")).then(N=>N.json()),fetch(_e("employees")).then(N=>N.json())]).then(([N,A])=>{const Q=N.opportunities||[],q=A.employees||A||[],le={};q.forEach(V=>{le[V.email]=V.name});const ne=Q.filter(V=>{const Pe=V.applied||[],xe=(M||"").trim().toLowerCase();return Pe.some(ke=>(ke||"").trim().toLowerCase()===xe)}).map((V,Pe)=>{const xe=Q.findIndex(vt=>vt.title===V.title&&vt.email===V.email&&vt.description===V.description);let ke=null;if(V.application_statuses&&V.application_statuses[M]){ke=V.application_statuses[M]==="accepted"?"confirmed":"rejected";const Pt=`${xe}-${M}`;ce(wr=>({...wr,[Pt]:ke}))}else{ke=null;const vt=`${xe}-${M}`;Y[vt]&&(console.log(`🧹 Clearing stale localStorage status for opportunity ${V.title} (ID: ${xe})`),ce(Pt=>{const wr={...Pt};return delete wr[vt],wr}))}let et=[],je="In Review";return ke==="confirmed"?(et.push("Accepted"),je="Accepted"):ke==="rejected"?(et.push("Not Considered"),je="Not Considered"):(et.push("In Review"),je="In Review"),{id:xe,originalId:xe,title:V.title,status:je,statusArray:et,tags:V.skills||[],duration:`${V.hoursPerWeek} Hours/Week`,description:V.description,domain:V.domain,type:V.type,startDate:V.startDate,endDate:V.endDate,hoursPerWeek:V.hoursPerWeek,skills:V.skills,roles:V.roles,email:V.email,postedBy:le[V.email]||"Unknown User",isOpportunityClosed:V.status==="closed",userApplicationStatus:ke}});p(ne)}).catch(N=>console.error("Error fetching applied opportunities:",N)))},[n,M]),R.useEffect(()=>{if(console.log("🎯 Modal opening effect triggered"),console.log("🎯 pendingAppliedOpportunityId:",window.pendingAppliedOpportunityId),console.log("🎯 pendingOpportunityId:",window.pendingOpportunityId),console.log("🎯 tab:",n),console.log("🎯 opportunities.length:",u.length),console.log("🎯 postedOpportunities.length:",m.length),window.pendingAppliedOpportunityId&&n==="applied"&&u.length>0){const N=u.find(A=>A.id.toString()===window.pendingAppliedOpportunityId);if(N){console.log("✅ Opening modal for applied opportunity:",N.title),Ke(null),Ve(!1),requestAnimationFrame(()=>{Ke(N),Ve(!0)}),window.pendingAppliedOpportunityId=null;const A=new URL(window.location);A.searchParams.delete("opportunityId"),window.history.replaceState({},"",A.toString())}else console.log("❌ Applied opportunity not found with ID:",window.pendingAppliedOpportunityId)}if(window.pendingOpportunityId&&n==="posted"&&m.length>0){const N=m.find(A=>A.id.toString()===window.pendingOpportunityId);if(N){console.log("✅ Opening modal for posted opportunity:",N.title),Ke(null),Ve(!1),requestAnimationFrame(()=>{Ke(N),Ve(!0)}),window.pendingOpportunityId=null;const A=new URL(window.location);A.searchParams.delete("opportunityId"),window.history.replaceState({},"",A.toString())}else console.log("❌ Posted opportunity not found with ID:",window.pendingOpportunityId)}},[n,u,m]),R.useEffect(()=>{n==="posted"&&(console.log("🚀 Fetching posted opportunities, tab:",n),Promise.all([fetch(_e("opportunities")).then(N=>N.json()),fetch(_e("employees")).then(N=>N.json())]).then(([N,A])=>{const Q=N.opportunities||[],q=A.employees||A||[],le={};q.forEach(V=>{le[V.email]=V.name});const ne=Q.filter(V=>{const Pe=(V.email||"").trim().toLowerCase(),xe=(M||"").trim().toLowerCase();return Pe===xe}).map(V=>{const Pe=Q.findIndex(xe=>xe.title===V.title&&xe.email===V.email&&xe.description===V.description);return{...V,id:Pe,applicants:(V.applied||[]).map(xe=>({email:xe,name:le[xe]||"Unknown User"}))}});if(y(ne),window.pendingOpportunityId){console.log("🔍 Looking for posted opportunity with ID:",window.pendingOpportunityId),console.log("🔍 Available posted opportunities:",ne.map(Pe=>({id:Pe.id,title:Pe.title})));const V=ne.find(Pe=>Pe.id.toString()===window.pendingOpportunityId);if(V){console.log("✅ Found target posted opportunity:",V.title),Ke(V),Ve(!0),window.pendingOpportunityId=null;const Pe=new URL(window.location);Pe.searchParams.delete("opportunityId"),window.history.replaceState({},"",Pe.toString())}else console.log("❌ Target posted opportunity not found with ID:",window.pendingOpportunityId)}}).catch(N=>console.error("Error fetching posted opportunities:",N)))},[n,M]),R.useEffect(()=>{if(Me&&oe){const N=m.find(A=>A.id===oe.id);N&&Ke(N)}},[Y,m,Me]);const L=async(N,A,Q,q)=>{const le=q==="accept"?"accept":"reject",he=`${le.charAt(0).toUpperCase()+le.slice(1)} Candidate`,ne=`${le.charAt(0).toUpperCase()+le.slice(1)} "${Q}" for this role?`;ie(he,ne,async()=>{try{const V=q==="accept"?"accepted":"rejected";Ke(et=>({...et,application_statuses:{...et.application_statuses,[A]:V}})),y(et=>et.map(je=>je.id===N?{...je,application_statuses:{...je.application_statuses,[A]:V}}:je));const Pe=`${N}-${A}`;ce(et=>({...et,[Pe]:q==="accept"?"confirmed":"rejected"}));const xe=m.find(et=>et.id===N);xe&&(q==="accept"?Mt.notifyApplicationAccepted(A,xe.title,N):Mt.notifyApplicationRejected(A,xe.title,N)),(await fetch(_e(`opportunities/${N}/${q}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantEmail:A})})).ok?console.log(`✅ Successfully ${q}ed ${Q} on server`):console.log("Server update failed, but local status maintained")}catch(V){console.error("Accept/Reject error:",V)}})},E=async(N,A)=>{ie("Close Opportunity",`Are you sure you want to close the opportunity "${A}"?`,async()=>{try{const Q=m.find(he=>he.id===N),q=Q?Q.applied||[]:[];(await fetch(_e(`opportunities/${N}/close`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M})})).ok&&(q.forEach(he=>{he!==M&&Mt.notifyOpportunityClosed(he,A,N)}),Promise.all([fetch(_e("opportunities")).then(he=>he.json()),fetch(_e("employees")).then(he=>he.json())]).then(([he,ne])=>{const V=he.opportunities||[],Pe=ne.employees||ne||[],xe={};Pe.forEach(je=>{xe[je.email]=je.name});const et=V.filter(je=>je.email===M).map(je=>{const vt=V.findIndex(Pt=>Pt.title===je.title&&Pt.email===je.email&&Pt.description===je.description);return{...je,id:vt,applicants:(je.applied||[]).map(Pt=>({email:Pt,name:xe[Pt]||"Unknown User"}))}});y(et)}))}catch(Q){console.error("Error closing opportunity:",Q)}})},j=async(N,A)=>{ie("Reopen Opportunity",`Are you sure you want to reopen the opportunity "${A}"?`,async()=>{try{(await fetch(_e(`opportunities/${N}/reopen`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M})})).ok&&Promise.all([fetch(_e("opportunities")).then(q=>q.json()),fetch(_e("employees")).then(q=>q.json())]).then(([q,le])=>{const he=q.opportunities||[],ne=le.employees||le||[],V={};ne.forEach(ke=>{V[ke.email]=ke.name});const xe=he.filter(ke=>ke.email===M).map(ke=>{const et=he.findIndex(je=>je.title===ke.title&&je.email===ke.email&&je.description===ke.description);return{...ke,id:et,applicants:(ke.applied||[]).map(je=>({email:je,name:V[je]||"Unknown User"}))}});y(xe)})}catch(Q){console.error("Error reopening opportunity:",Q)}})},ie=(N,A,Q)=>{ve({title:N,message:A,onConfirm:Q}),Te(!0)},ae=()=>{Ce.onConfirm&&Ce.onConfirm(),Te(!1),ve({})},we=()=>{Te(!1),ve({})},pe=async N=>{try{const Q=await(await fetch(_e("employees"))).json(),le=(Q.employees||Q||[]).find(he=>(he.email||"").trim().toLowerCase()===N.trim().toLowerCase());le&&(Se(le),O(!0))}catch(A){console.error("Error fetching profile:",A)}},Re={"In Review":"bg-yellow-400",Accepted:"bg-green-600","Not Considered":"bg-red-600"};return h.jsxs("div",{className:"min-h-screen bg-blue-50 font-sans",children:[h.jsx(fo,{userEmail:M,userName:D}),me&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:Ce.title}),h.jsx("p",{className:"text-gray-600 mb-6",children:Ce.message}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx("button",{onClick:we,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),h.jsx("button",{onClick:ae,className:"px-4 py-2 bg-finder-blue-600 text-white rounded hover:bg-finder-blue-700",children:"Confirm"})]})]})}),Me&&oe&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"flex-1",children:h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{className:"flex-1",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:oe.title}),h.jsxs("div",{className:"flex items-center gap-4",children:[oe.isOpportunityClosed?h.jsx("span",{className:"px-3 py-1 bg-gray-400 text-white text-sm rounded-full",children:"Closed"}):h.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-sm rounded-full",children:"Open"}),n==="applied"?h.jsxs("span",{className:"text-finder-blue-600 font-medium",children:["Posted by: ",h.jsx("span",{className:"cursor-pointer hover:text-finder-blue-700 underline transition-colors",onClick:()=>pe(oe.email),children:oe.postedBy})]}):h.jsxs("span",{className:"text-finder-blue-600 font-medium",children:[oe.applicants?oe.applicants.length:0," Applications"]})]})]})})}),h.jsx("button",{onClick:()=>Ve(!1),className:"text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),h.jsx("p",{className:"text-gray-600",children:oe.description||"-"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),h.jsx("p",{className:"text-gray-600",children:oe.domain||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Type"}),h.jsx("p",{className:"text-gray-600",children:oe.type||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),h.jsx("p",{className:"text-gray-600",children:oe.industry||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Hours per Week"}),h.jsx("p",{className:"text-gray-600",children:oe.hoursPerWeek||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Start Date"}),h.jsx("p",{className:"text-gray-600",children:oe.startDate||"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"End Date"}),h.jsx("p",{className:"text-gray-600",children:oe.endDate||"-"})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Roles"}),oe.roles&&oe.roles.length>0?h.jsx("div",{className:"flex flex-wrap gap-2",children:oe.roles.map((N,A)=>h.jsx("span",{className:"px-2 py-1 bg-finder-blue-100 text-finder-blue-800 text-sm rounded",children:N},A))}):h.jsx("p",{className:"text-gray-600",children:"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Skills"}),oe.skills&&oe.skills.length>0?h.jsx("div",{className:"flex flex-wrap gap-2",children:oe.skills.map((N,A)=>h.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded",children:N},A))}):h.jsx("p",{className:"text-gray-600",children:"-"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Posted by"}),h.jsx("p",{className:"text-finder-blue-600 cursor-pointer hover:underline",onClick:()=>pe(oe.email),children:K[oe.email]||"Unknown User"})]})]}),n==="applied"&&oe.statusArray&&h.jsxs("div",{className:"border-t pt-6",children:[h.jsx("div",{className:"mb-4",children:h.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Application Status"})}),h.jsx("div",{className:"flex flex-wrap gap-2",children:oe.statusArray.map((N,A)=>h.jsx("span",{className:`text-white px-3 py-1 text-sm rounded-full ${Re[N]}`,children:N},A))})]}),n==="posted"&&h.jsxs("div",{className:"border-t pt-6",children:[h.jsx("div",{className:"mb-4",children:h.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Applicants"})}),oe.applicants&&oe.applicants.length>0?h.jsx("div",{className:"space-y-3",children:oe.applicants.map((N,A)=>{`${oe.id}${N.email}`;const Q=oe.status==="closed";let q=null;return oe.application_statuses&&oe.application_statuses[N.email]?(q=oe.application_statuses[N.email]==="accepted"?"confirmed":"rejected",console.log(`🔍 Using server status for ${N.email}: ${q}`)):console.log(`🔍 No server status found for ${N.email}, showing Accept/Reject buttons`),h.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-medium text-gray-800 cursor-pointer hover:text-finder-blue-600 transition-colors",onClick:()=>pe(N.email),children:N.name}),h.jsx("p",{className:"text-sm text-gray-500",children:N.email}),h.jsxs("div",{className:"mt-1 space-y-1",children:[q&&h.jsx("p",{className:`text-sm font-medium ${q==="confirmed"?"text-green-600":"text-red-600"}`,children:q==="confirmed"?"✅ Candidate Accepted":"❌ Candidate Rejected"}),!q&&!Q&&h.jsx("p",{className:"text-sm text-yellow-600",children:"⏳ Pending Decision"})]})]}),!q&&!Q&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>L(oe.id,N.email,N.name,"accept"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Accept"}),h.jsx("button",{onClick:()=>L(oe.id,N.email,N.name,"reject"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Not Considered"})]})]},`${A}-${q||"none"}`)})}):h.jsx("p",{className:"text-gray-500 text-sm",children:"No applications yet"})]}),n==="posted"&&h.jsx("div",{className:"border-t pt-4 flex justify-center",children:oe.status==="closed"?h.jsx("button",{onClick:()=>j(oe.id,oe.title),className:"px-6 py-3 bg-finder-blue-600 text-white font-medium rounded-lg hover:bg-finder-blue-700 transition-colors",children:"Reopen Opportunity"}):h.jsx("button",{onClick:()=>E(oe.id,oe.title),className:"px-6 py-3 bg-gray-500 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors",children:"Close Opportunity"})})]})})}),Fe&&se&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70]",children:h.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Profile Details"}),h.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center mb-6",children:(()=>{const N=localStorage.getItem(`profile_picture_${se.email}`);if(N)return h.jsx("img",{src:N,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100"});{const A=se.name||"Unknown User",Q=A.split(" ").map(he=>he[0]).join("").substring(0,2).toUpperCase(),q=["bg-red-400","bg-blue-400","bg-green-400","bg-yellow-400","bg-purple-400","bg-pink-400","bg-indigo-400"],le=A.length%q.length;return h.jsx("div",{className:`w-24 h-24 rounded-full ${q[le]} flex items-center justify-center text-white text-xl font-bold border-4 border-blue-100`,children:Q})}})()}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Name"}),h.jsx("p",{className:"text-gray-600",children:se.name||"Not specified"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Email"}),h.jsx("p",{className:"text-gray-600",children:se.email})]}),se.role&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Role"}),h.jsx("p",{className:"text-gray-600",children:se.role})]}),se.domain&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Domain"}),h.jsx("p",{className:"text-gray-600",children:se.domain})]}),se.industry&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"Industry"}),h.jsx("p",{className:"text-gray-600",children:se.industry})]})]})]})})}),h.jsxs("section",{className:"text-center mt-10",children:[h.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-8 text-center flex items-center justify-center gap-3",children:["Your next firm contribution starts with",h.jsx("img",{src:sa,alt:"FInder",className:"h-6 md:h-8 inline-block -mt-1"})]}),h.jsx("p",{className:"mt-2 text-gray-500",children:"FInder your next opportunity here!"})]}),h.jsx("div",{className:"flex justify-center mt-8",children:h.jsxs("div",{className:"flex border rounded-xl overflow-hidden",children:[h.jsxs("button",{onClick:()=>{i("applied"),G("all"),F("/dashboard")},className:`px-6 py-2 font-medium ${n==="applied"?"bg-finder-blue-600 text-white":"bg-white text-finder-blue-600"}`,children:["Opportunities Applied (",x,")"]}),h.jsxs("button",{onClick:()=>{i("posted"),G("all"),F("/dashboard")},className:`px-6 py-2 font-medium ${n==="posted"?"bg-finder-blue-600 text-white":"bg-white text-finder-blue-600"}`,children:["Opportunities Posted (",v,")"]})]})}),P==="accepted"&&n==="applied"&&h.jsx("div",{className:"flex justify-center mt-4",children:h.jsxs("div",{className:"bg-purple-100 text-purple-800 px-4 py-2 rounded-lg flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("span",{className:"text-sm font-medium",children:"Showing accepted opportunities only"}),h.jsx("button",{onClick:()=>{G("all"),F("/dashboard")},className:"ml-2 text-purple-600 hover:text-purple-800",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),h.jsxs("div",{className:"px-8 mt-8 pb-10",children:[n==="applied"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.filter(N=>P==="accepted"?N.status==="Accepted"||N.statusArray?.includes("Accepted"):!0).sort((N,A)=>!N.isOpportunityClosed&&A.isOpportunityClosed?-1:N.isOpportunityClosed&&!A.isOpportunityClosed?1:A.originalId-N.originalId).map((N,A)=>h.jsxs("div",{className:`bg-white p-6 rounded-xl shadow cursor-pointer hover:shadow-lg transition-shadow ${N.isOpportunityClosed?"opacity-75":""}`,onClick:()=>{Ke(N),Ve(!0)},children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"font-bold text-lg flex-1",children:N.title}),h.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[N.statusArray.map((Q,q)=>h.jsx("span",{className:`text-white px-2 py-1 text-xs rounded-full ${Re[Q]}`,children:Q},q)),N.isOpportunityClosed?h.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-500 text-white ml-1",children:"Closed"}):h.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-500 text-white ml-1",children:"Open"})]})]}),h.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:N.description}),h.jsxs("div",{className:"text-right text-xs text-gray-500",children:["Posted by: ",h.jsx("span",{className:"cursor-pointer hover:text-finder-blue-600 underline transition-colors",onClick:Q=>{Q.stopPropagation(),pe(N.email)},children:N.postedBy})]})]},A)),u.filter(N=>P==="accepted"?N.status==="Accepted"||N.statusArray?.includes("Accepted"):!0).length===0&&h.jsx("div",{className:"col-span-full text-center py-16",children:h.jsx("div",{className:"max-w-md mx-auto",children:P==="accepted"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Accepted Opportunities Yet"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't been accepted to any opportunities yet. Keep applying and showcasing your skills!"}),h.jsx("button",{onClick:()=>{G("all"),F("/dashboard")},className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors mr-3",children:"View All Applications"}),h.jsx("button",{onClick:()=>F("/find-opportunities"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium transition-colors",children:"Find More Opportunities"})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-6xl mb-4",children:"🚀"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Ready to Launch Your Next Adventure?"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"Discover exciting opportunities waiting for you! Browse available positions and take the first step toward your next career milestone."}),h.jsx("button",{onClick:()=>F("/find-opportunities"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors",children:"Explore Opportunities"})]})})})]}),n==="posted"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[[...m].sort((N,A)=>N.status==="closed"&&A.status!=="closed"?1:N.status!=="closed"&&A.status==="closed"?-1:A.id-N.id).map(N=>h.jsx("div",{className:`bg-white rounded-xl shadow overflow-hidden cursor-pointer hover:shadow-lg transition-shadow ${N.status==="closed"?"opacity-75":""}`,onClick:()=>{Ke(N),Ve(!0)},children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsx("h3",{className:"font-bold text-lg flex-1",children:N.title}),N.status==="closed"?h.jsx("span",{className:"px-2 py-1 bg-gray-400 text-white text-xs rounded-full",children:"Closed"}):h.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded-full",children:"Open"})]}),h.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:N.description}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("span",{className:"text-finder-blue-600 font-medium",children:[N.applicants?N.applicants.length:0," Applications"]}),h.jsx("span",{className:"text-gray-400 text-sm",children:"Click to view details"})]})]})},N.id)),m.length===0&&h.jsx("div",{className:"col-span-full text-center py-16",children:h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx("div",{className:"text-6xl mb-4",children:"💡"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Share Your Vision, Build Your Team!"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"Have an amazing project idea? Create your first opportunity and connect with talented individuals who can help bring your vision to life."}),h.jsx("button",{onClick:()=>F("/post-opportunity"),className:"px-6 py-3 bg-finder-blue-600 text-white rounded-lg hover:bg-finder-blue-700 font-medium transition-colors",children:"Post Your First Opportunity"})]})})]})]})]})}function JI(){return h.jsx(Fx,{children:h.jsxs(Dx,{children:[h.jsx(ir,{path:"/",element:h.jsx(QI,{})}),h.jsx(ir,{path:"/register",element:h.jsx(KI,{})}),h.jsx(ir,{path:"/dashboard",element:h.jsx(YI,{})}),h.jsx(ir,{path:"/find-opportunities",element:h.jsx(VI,{})}),h.jsx(ir,{path:"/post-opportunity",element:h.jsx($I,{})}),h.jsx(ir,{path:"/profile",element:h.jsx(qI,{})}),h.jsx(ir,{path:"/opportunity/:id",element:h.jsx(GI,{})})]})})}async function XI(){try{console.log("🚀 Starting migration of existing data to Firebase..."),console.log("📥 Fetching existing employees...");const e=await(await fetch("/api/employees")).json(),n=e.employees||e||[];console.log("📥 Fetching existing opportunities...");const l=await(await fetch("/api/opportunities")).json(),c=l.opportunities||l||[];console.log(`Found ${n.length} employees and ${c.length} opportunities to migrate`),console.log("👥 Migrating employees to Firebase...");let u=0;for(const m of n)try{await $i.getEmployeeByEmail(m.email)?console.log(`⏩ Employee already exists: ${m.name} (${m.email})`):(await $i.createEmployee(m),console.log(`✅ Migrated employee: ${m.name} (${m.email})`),u++)}catch(y){console.error(`❌ Failed to migrate employee ${m.email}:`,y)}console.log("💼 Migrating opportunities to Firebase...");let p=0;for(const m of c)try{await $i.createOpportunity(m),console.log(`✅ Migrated opportunity: ${m.title}`),p++}catch(y){console.error(`❌ Failed to migrate opportunity ${m.title}:`,y)}return console.log("🎉 Migration completed!"),console.log(`📊 Summary: ${u} employees and ${p} opportunities migrated to Firebase`),{success:!0,message:`Migration completed: ${u} employees, ${p} opportunities`}}catch(r){return console.error("💥 Migration failed:",r),{success:!1,error:r.message}}}window.migrateDataToFirebase=XI;async function ZI(){try{console.log("🔍 Checking Firebase data...");const r=await $i.getAllEmployees(),e=await $i.getAllOpportunities();return console.log(`📊 Firebase contains: ${r.length} employees, ${e.length} opportunities`),console.log("👥 Employees:",r.map(n=>`${n.name} (${n.email})`)),console.log("💼 Opportunities:",e.map(n=>n.title)),{employees:r,opportunities:e}}catch(r){return console.error("❌ Failed to check Firebase data:",r),null}}window.checkFirebaseData=ZI;B0.createRoot(document.getElementById("root")).render(h.jsx(pg.StrictMode,{children:h.jsx(JI,{})}));
